"use strict";(self.webpackChunkimserp=self.webpackChunkimserp||[]).push([[2193],{82661:(k,N,l)=>{l.d(N,{C:()=>F});var P=l(26215),T=l(54536),o=l(64537),e=l(88692);let D=(()=>{class h{constructor(u,g){this.dialogref=u,this.data=g,this.heading="Information",this.heading=g.header,this.message$=g.message}authResult(u){this.dialogref.close(u)}}return h.\u0275fac=function(u){return new(u||h)(o.Y36(T.so),o.Y36(T.WI))},h.\u0275cmp=o.Xpm({type:h,selectors:[["result-dialog"]],decls:11,vars:4,consts:[[1,"modal-dialog","modal-md"],[1,"modal-content"],[1,"modal-header","custom-modal-header"],[1,"modal-title"],["aria-label","Close",1,"close",3,"click"],[1,"modal-body"],[2,"display","inline-block"]],template:function(u,g){1&u&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),o._uU(4),o.qZA(),o.TgZ(5,"div",4),o.NdJ("click",function(){return g.authResult(!0)}),o._uU(6,"\xd7"),o.qZA()(),o.TgZ(7,"div",5),o._UZ(8,"div",6),o._uU(9),o.ALo(10,"async"),o.qZA()()()),2&u&&(o.xp6(4),o.Oqu(g.heading),o.xp6(5),o.hij(" ",o.lcZ(10,2,g.message$)," "))},dependencies:[e.Ov],encapsulation:2}),h})();var S=l(67297),C=l(53074),Z=l(14970),U=l(7976),_=l(67311);function O(h,b){1&h&&(o.TgZ(0,"h4",5),o._uU(1,"Your Fiscal Year is Changed. Year End Process will generate new sequence for transaction. Would you like to start Inventry year Ending Process ? "),o.qZA())}function I(h,b){1&h&&(o.TgZ(0,"h4",5),o._uU(1,"Your Fiscal Year is Changed.Please do year end process from Online portal and sync the transaction.If you want do back date Sales invoice Click Ok to continue.Thank you... "),o.qZA())}function v(h,b){if(1&h){const u=o.EpF();o.TgZ(0,"button",6),o.NdJ("click",function(){o.CHM(u);const f=o.oxw();return o.KtG(f.YesClick())}),o._uU(1,"Yes"),o.qZA()}}function d(h,b){if(1&h){const u=o.EpF();o.TgZ(0,"button",6),o.NdJ("click",function(){o.CHM(u);const f=o.oxw();return o.KtG(f.NoClick())}),o._uU(1,"No"),o.qZA()}}function Y(h,b){if(1&h){const u=o.EpF();o.TgZ(0,"button",6),o.NdJ("click",function(){o.CHM(u);const f=o.oxw();return o.KtG(f.offlinelineOK())}),o._uU(1,"OK"),o.qZA()}}let q=(()=>{class h{constructor(u,g,f,x,w,A){this.dialogref=u,this.authSerice=g,this.masterService=f,this.spinnerService=x,this.router=w,this.alertService=A}YesClick(){1!==this.masterService.userSetting.ENABLEOFFLINESALE&&(this.spinnerService.show("Processing...Please Wait..."),this.masterService.masterGetmethod("/yearEndingInventory").subscribe(u=>{"ok"===u.status?(this.authSerice.setSessionVariable("isIYE",1),this.dialogref.close(),this.alertService.success("The year end for inventory are done successfully..."),setTimeout(()=>{console.log("from logout"),this.router.navigate(["login",{logout:"logout"}]).then(()=>{window.location.reload()})},5e3)):(this.spinnerService.hide(),alert(u.result.error))},u=>{this.spinnerService.hide(),alert(JSON.parse(u._body))}))}NoClick(){this.authSerice.setSessionVariable("isIYE",2),this.dialogref.close()}offlinelineOK(){this.authSerice.setSessionVariable("isIYE",2),this.dialogref.close()}}return h.\u0275fac=function(u){return new(u||h)(o.Y36(T.so),o.Y36(S.e),o.Y36(C.P),o.Y36(Z.V),o.Y36(U.F0),o.Y36(_.c))},h.\u0275cmp=o.Xpm({type:h,selectors:[["inventry-yearend-dialog"]],decls:8,vars:5,consts:[[1,"modal-content","modal-content-main-area",2,"width","100%"],[1,"modal-header"],["class","modal-title","id","myModalLabel",4,"ngIf"],[1,"modal-body"],["class","btn btn-info",3,"click",4,"ngIf"],["id","myModalLabel",1,"modal-title"],[1,"btn","btn-info",3,"click"]],template:function(u,g){1&u&&(o.TgZ(0,"div",0)(1,"div",1),o.YNc(2,O,2,0,"h4",2),o.YNc(3,I,2,0,"h4",2),o.qZA(),o.TgZ(4,"div",3),o.YNc(5,v,2,0,"button",4),o.YNc(6,d,2,0,"button",4),o.YNc(7,Y,2,0,"button",4),o.qZA()()),2&u&&(o.xp6(2),o.Q6J("ngIf",1!=g.masterService.userSetting.ENABLEOFFLINESALE),o.xp6(1),o.Q6J("ngIf",1==g.masterService.userSetting.ENABLEOFFLINESALE),o.xp6(2),o.Q6J("ngIf",1!=g.masterService.userSetting.ENABLEOFFLINESALE),o.xp6(1),o.Q6J("ngIf",1!=g.masterService.userSetting.ENABLEOFFLINESALE),o.xp6(1),o.Q6J("ngIf",1==g.masterService.userSetting.ENABLEOFFLINESALE))},dependencies:[e.O5],styles:[".md-dialog-container[_ngcontent-%COMP%]{height:auto!important;width:auto!important;overflow:hidden!important;box-shadow:0!important}.mat-dialog-container[_ngcontent-%COMP%]{background:transparent!important;box-shadow:none!important;margin-left:auto;margin-right:auto;overflow:hidden!important;height:350px!important}.auth-main[_ngcontent-%COMP%]{position:inherit!important;display:inherit!important}.cdk-overlay-pane[_ngcontent-%COMP%], .md-overlay-pane[_ngcontent-%COMP%]{height:auto!important}.cdk-overlay-pane[_ngcontent-%COMP%], .md-overlay-pane[_ngcontent-%COMP%]{flex:1 1 0}"]}),h})();var y=l(71180);let F=(()=>{class h{constructor(u,g,f,x,w){this.gblstate=u,this._authService=g,this.masterService=f,this.router=x,this.dialog=w,this.viewPermission=[],this.userSetting={},this.enableFiscalYearEnd=!1,this.viewPermission=u.getGlobalSetting("View-Permission")||[],this.userSetting=this.masterService.userSetting}canActivate(u,g){const f=new P.X(""),x=f.asObservable(),w=this._authService.getAuth();let A="";null!=u.url[0]&&(A=u.url[0].path);let M=u.params.mode;if(void 0===M&&(M="list"),!w||!w.profile){f.next("You are not logged In.Please login in");const E=this.dialog.open(D,{hasBackdrop:!0,data:{header:"Information",message:x}});return setTimeout(()=>{E.close()},1e3),!1}if(this.masterService.checkUserValid().subscribe(L=>{if(!1===L){f.next("Invalid User");const R=this.dialog.open(D,{hasBackdrop:!0,data:{header:"Information",message:x}});return setTimeout(()=>(R.close(),!1),1e3),!1}}),0===this._authService.getSessionVariable("isIYE")&&(this.dialog.closeAll(),this.dialog.open(q,{hasBackdrop:!0,data:{header:"Information",message:""}}),"dashboard"!==A))return!1;if(0===this.userSetting.ENABLEOFFLINESALE||2===this.userSetting.ENABLEOFFLINESALE){if(w&&w.profile&&"dashboard"===A)return!0;if(0===this.userSetting.ENABLEOFFLINESALE){if("ADMIN"===this.masterService.userProfile.username.toUpperCase()||"patanjali_user"===this.masterService.userProfile.username)return!0}else if(2===this.userSetting.ENABLEOFFLINESALE){if("addsientry"===A||"add-creditnote-itembase"===A){f.next("You are not authorize for this operation");const L=this.dialog.open(D,{hasBackdrop:!0,data:{header:"Information",message:x}});return setTimeout(()=>(L.close(),!1),2e3),!1}if("ADMIN"===this.masterService.userProfile.username.toUpperCase()||"patanjali_user"===this.masterService.userProfile.username)return!0}const E=this._authService.getMenuRight(A,M);if(A){if(!0===E.right)return!0;if("list"===M&&!0===E.list)return!0}else if(!0===E.list)return!0}else if(1===this.userSetting.ENABLEOFFLINESALE)return!0}}return h.\u0275fac=function(u){return new(u||h)(o.LFG(y.q),o.LFG(S.e),o.LFG(C.P),o.LFG(U.F0),o.LFG(T.uw))},h.\u0275prov=o.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},18488:(k,N,l)=>{l.d(N,{G:()=>C});var P=l(35732),T=l(79765),o=l(64537),e=l(7976),D=l(67297),S=l(71180);let C=(()=>{class Z{constructor(_,O,I,v){this.http=_,this.activatedRoute=O,this.authService=I,this.state=v;const d=this.state.getGlobalSetting("apiUrl");d&&d.length>0&&(this.apiUrl=d)}getRequestOption(){return new P.WM({"Content-type":"application/csv",Authorization:this.authService.getAuth().token,"X-Requested-With":"XMLHttpRequest"})}RequestOptionForCSV(){return{headers:new P.WM({Authorization:this.authService.getAuth().token})}}downloadSampleFile(_,O="download"){return this.http.get(this.apiUrl+`${_}`,{headers:this.getRequestOption(),responseType:"blob"})}downloadSampleExcelforPIImport(_){return this.http.post(this.apiUrl+"/downloadSampleExcelforPIImport",_,{responseType:"blob"})}importSelectedFiles(_,O){let I={status:"error",result:"error"},v=new T.xQ;return this.http.post(this.apiUrl+`${_}`,O).subscribe(d=>{v.next(d),v.unsubscribe()},d=>{I.status="error",I.result=d,v.next(I),v.unsubscribe()}),v}}return Z.\u0275fac=function(_){return new(_||Z)(o.LFG(P.eN),o.LFG(e.gz),o.LFG(D.e),o.LFG(S.q))},Z.\u0275prov=o.Yz7({token:Z,factory:Z.\u0275fac}),Z})()},96489:(k,N,l)=>{l.r(N),l.d(N,{UtilitiesModule:()=>X});var P=l(46543),T=l(87584),o=l(7976),e=l(64537);let D=(()=>{class s{constructor(){}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["utilities"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},dependencies:[o.lC],encapsulation:2}),s})();var S=l(67311),C=l(14970),Z=l(67297),U=l(79765),_=l(35732),O=l(71180),I=l(53074);let v=(()=>{class s{constructor(t,n,i,r,a,p){this.http=t,this._authService=n,this.state=i,this.alert=r,this.load=a,this.masterRepo=p;const m=this.state.getGlobalSetting("apiUrl");m&&m.length>0&&(this.apiUrl=m)}savePumpDetails(t){return this.http.post(`${this.apiUrl}/savePumpDetails`,t)}getItemWarrantyInfo(t){return this.http.get(`${this.apiUrl}/getItemWarrantyInfo/${t}`)}getDivisionByUser(t){let n={status:"error",result:""},i=new U.xQ;return this.http.get(`${this.apiUrl}/getDivisionByUser?USER=${t}`).subscribe(r=>{i.next(r),i.unsubscribe()},r=>{n.status="error",n.result=r,i.next(n),i.unsubscribe()}),i}getDivisionByUserTrnPrivilege(){let t={status:"error",result:""},n=new U.xQ;return this.http.get(`${this.apiUrl}/getDivisionForTrnPrivilege`).subscribe(i=>{n.next(i),n.unsubscribe()},i=>{t.status="error",t.result=i,n.next(t),n.unsubscribe()}),n}getWarehouseByDivision(t){let n={status:"error",result:""},i=new U.xQ;return this.http.get(`${this.apiUrl}/getWarehouseByDivision?DIVISION=${t}`).subscribe(r=>{i.next(r),i.unsubscribe()},r=>{n.status="error",n.result=r,i.next(n),i.unsubscribe()}),i}updateDivision(t,n,i){let r={status:"error",result:""},a=new U.xQ;return this.http.get(this.apiUrl+"/updateDivison/"+t+"/"+n+"/"+i).subscribe(p=>{a.next(p)},p=>{r.status="error",r.result=p,a.next(r),a.unsubscribe()}),a}Relogin(t,n,i="",r="",a=""){return this.http.post(this.apiUrl+"/Relogin",{username:t,password:n,division:i,warehouse:r,PhiscalId:a}).map(p=>{console.log("after relogin",p);let m=p;m&&m.token?(console.log("reachsetQuth"),this._authService.setSessionAuth(m),this.state.setGlobalSetting("LoggedIn",[!0]),this.state.setGlobalSetting("userName",[t]),this.state.setGlobalSetting("View-Permission",["Divisions","smartTables","addDivision"]),this.masterRepo.userProfile=this._authService.getUserProfile()):this.alert.warning("cannot change division")},p=>{this.load.hide(),this.alert.error(p)})}getPhiscalYearList(){return this.http.get(this.apiUrl+"/getPhiscalYearList")}updatePhiscalYear(t,n){let i={status:"error",result:""},r=new U.xQ;return this.http.post(this.apiUrl+"/updatePhiscalYear",{PhiscalID:t,user:n}).subscribe(p=>{r.next(p)},p=>{i.status="error",i.result=p,r.next(i),r.unsubscribe()}),r}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(_.eN),e.LFG(Z.e),e.LFG(O.q),e.LFG(S.c),e.LFG(C.V),e.LFG(I.P))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();var d=l(20092);const Y=["f"];let q=(()=>{class s{constructor(t,n,i,r,a){this.alertService=t,this.loadingSerive=n,this.authservice=i,this.route=r,this.utilitiesService=a,this.warrantyInfoObj={}}ngOnInit(){}onEnter(){let t=this.signupForm.value.ImeiSearch;console.log("imieval",t),this.getItemWarrantyInfo(t)}getItemWarrantyInfo(t){this.loadingSerive.show("Data is Loading.."),this.utilitiesService.getItemWarrantyInfo(t).subscribe(n=>{"ok"==n.status?(this.loadingSerive.hide(),this.ItemWarrantyInfoList=n.result[0],this.warrantyInfoObj.ITEMDESCA=this.ItemWarrantyInfoList.DESCA,this.warrantyInfoObj.MCODE=this.ItemWarrantyInfoList.MCODE,this.warrantyInfoObj.IMEINO=this.ItemWarrantyInfoList.IMEINO,this.warrantyInfoObj.WARRANTYPERIOD=this.ItemWarrantyInfoList.WARRANTY_PERIOD,this.warrantyInfoObj.TRNDATE=this.ItemWarrantyInfoList.TRNDATE?.substring(0,10),this.warrantyInfoObj.CUSTNAME=this.ItemWarrantyInfoList.BILLTO,this.warrantyInfoObj.MOBILENO=this.ItemWarrantyInfoList.BILLTOMOB,this.warrantyInfoObj.ADDRESS=this.ItemWarrantyInfoList.BILLTOADD):(this.warrantyInfoObj={},this.loadingSerive.hide(),this.alertService.info(n.result))},n=>{this.loadingSerive.hide(),this.alertService.info(n.error.result)})}changeSearchEvent(){(""==this.signupForm.value.ImeiSearch||null==this.signupForm.value.ImeiSearch)&&(this.warrantyInfoObj.ITEMDESCA="",this.warrantyInfoObj.MCODE="",this.warrantyInfoObj.IMEINO="",this.warrantyInfoObj.WARRANTYPERIOD=null,this.warrantyInfoObj.TRNDATE=null,this.warrantyInfoObj.CUSTNAME="",this.warrantyInfoObj.MOBILENO="",this.warrantyInfoObj.ADDRESS="")}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(S.c),e.Y36(C.V),e.Y36(Z.e),e.Y36(o.gz),e.Y36(v))},s.\u0275cmp=e.Xpm({type:s,selectors:[["additemwarrantyinfo"]],viewQuery:function(t,n){if(1&t&&e.Gf(Y,5),2&t){let i;e.iGM(i=e.CRH())&&(n.signupForm=i.first)}},features:[e._Bn([T.p])],decls:80,vars:19,consts:[[1,"card"],[1,"card-header","row"],[1,"col-md-4"],[1,"page-title"],[1,"card-body"],[1,"row"],[1,"col-md-6"],[3,"ngSubmit"],["f","ngForm"],[1,"form-group","row"],[1,"col-md-3"],[1,"form-control-label"],[1,"col-md-7",2,"width","100%","margin-top","2px"],["type","text","placeholder","Search..","ngModel","","name","ImeiSearch","autocomplete","off","required","",1,"form-control",3,"keydown.enter","ngModelChange"],[1,"col-md-2",2,"padding-left","0px"],["type","submit",1,"btn","btn-info","btn-sm",3,"disabled"],[2,"border","2px solid #d9d9d9"],[2,"font-size","13px","font-weight","bold","text-align","left","margin-bottom","5px","margin-left","3px","width","auto"],[1,"col-md-8",2,"width","100%"],["type","text","name","ItemName",1,"form-control",3,"ngModel","readOnly","ngModelChange"],["type","text","name","ItemCode",1,"form-control",3,"ngModel","readOnly","ngModelChange"],["type","text","name","ImeiNo",1,"form-control",3,"ngModel","readOnly","ngModelChange"],["type","text",1,"form-control",3,"ngModel","readOnly","ngModelChange"],["type","text","placeholder","mm/dd/yyyy","name","SalesDate",1,"form-control",3,"ngModel","readOnly","ngModelChange"],["type","text","name","WarrantyPeriod",1,"form-control",3,"readOnly","ngModel","ngModelChange"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5",3),e._uU(4,"Item Warranty Info"),e.qZA()()(),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"form",7,8),e.NdJ("ngSubmit",function(){return n.onEnter()}),e.TgZ(10,"div",9)(11,"div",10)(12,"label",11),e._uU(13," IMEI NO:"),e.qZA()(),e.TgZ(14,"div",12)(15,"input",13),e.NdJ("keydown.enter",function(){return n.onEnter()})("ngModelChange",function(){return n.changeSearchEvent()}),e.qZA()(),e.TgZ(16,"div",14)(17,"button",15),e._uU(18,"Search"),e.qZA()()()(),e.TgZ(19,"fieldset",16)(20,"legend",17),e._uU(21,"Item Info"),e.qZA(),e.TgZ(22,"div",9)(23,"div",2)(24,"label",11),e._uU(25,"Item Name:"),e.qZA()(),e.TgZ(26,"div",18)(27,"input",19),e.NdJ("ngModelChange",function(r){return n.warrantyInfoObj.ITEMDESCA=r}),e.qZA()()(),e.TgZ(28,"div",9)(29,"div",2)(30,"label",11),e._uU(31,"Item Code:"),e.qZA()(),e.TgZ(32,"div",18)(33,"input",20),e.NdJ("ngModelChange",function(r){return n.warrantyInfoObj.MCODE=r}),e.qZA()()(),e.TgZ(34,"div",9)(35,"div",2)(36,"label",11),e._uU(37,"IMEI No:"),e.qZA()(),e.TgZ(38,"div",18)(39,"input",21),e.NdJ("ngModelChange",function(r){return n.warrantyInfoObj.IMEINO=r}),e.qZA()()()()(),e.TgZ(40,"div",6)(41,"fieldset",16)(42,"legend",17),e._uU(43,"Sales Info"),e.qZA(),e.TgZ(44,"div",9)(45,"div",2)(46,"label",11),e._uU(47,"Customer Name:"),e.qZA()(),e.TgZ(48,"div",18)(49,"input",22),e.NdJ("ngModelChange",function(r){return n.warrantyInfoObj.CUSTNAME=r}),e.qZA()()(),e.TgZ(50,"div",9)(51,"div",2)(52,"label",11),e._uU(53,"Mobile No:"),e.qZA()(),e.TgZ(54,"div",18)(55,"input",22),e.NdJ("ngModelChange",function(r){return n.warrantyInfoObj.MOBILENO=r}),e.qZA()()(),e.TgZ(56,"div",9)(57,"div",2)(58,"label",11),e._uU(59,"Address:"),e.qZA()(),e.TgZ(60,"div",18)(61,"input",22),e.NdJ("ngModelChange",function(r){return n.warrantyInfoObj.ADDRESS=r}),e.qZA()()(),e.TgZ(62,"div",9)(63,"div",2)(64,"label",11),e._uU(65,"Sales Date:"),e.qZA()(),e.TgZ(66,"div",18)(67,"input",23),e.NdJ("ngModelChange",function(r){return n.warrantyInfoObj.TRNDATE=r}),e.qZA()()(),e.TgZ(68,"div",9)(69,"div",2)(70,"label",11),e._uU(71,"Warranty Period:"),e.qZA()(),e.TgZ(72,"div",18)(73,"input",24),e.NdJ("ngModelChange",function(r){return n.warrantyInfoObj.WARRANTYPERIOD=r}),e.qZA()()(),e.TgZ(74,"div",9)(75,"div",2)(76,"label",11),e._uU(77,"Status:"),e.qZA()(),e.TgZ(78,"div",18)(79,"input",22),e.NdJ("ngModelChange",function(r){return n.warrantyInfoObj.STATUS=r}),e.qZA()()()()()()()()),2&t){const i=e.MAs(9);e.xp6(17),e.Q6J("disabled",!i.valid),e.xp6(10),e.Q6J("ngModel",n.warrantyInfoObj.ITEMDESCA)("readOnly",!0),e.xp6(6),e.Q6J("ngModel",n.warrantyInfoObj.MCODE)("readOnly",!0),e.xp6(6),e.Q6J("ngModel",n.warrantyInfoObj.IMEINO)("readOnly",!0),e.xp6(10),e.Q6J("ngModel",n.warrantyInfoObj.CUSTNAME)("readOnly",!0),e.xp6(6),e.Q6J("ngModel",n.warrantyInfoObj.MOBILENO)("readOnly",!0),e.xp6(6),e.Q6J("ngModel",n.warrantyInfoObj.ADDRESS)("readOnly",!0),e.xp6(6),e.Q6J("ngModel",n.warrantyInfoObj.TRNDATE)("readOnly",!0),e.xp6(6),e.Q6J("readOnly",!0)("ngModel",n.warrantyInfoObj.WARRANTYPERIOD),e.xp6(6),e.Q6J("ngModel",n.warrantyInfoObj.STATUS)("readOnly",!0)}},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.Q7,d.On,d.F],styles:[".card[_ngcontent-%COMP%]{margin:5vh auto!important;width:70%}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{border:1px solid #cbcbcb;border-radius:3px;height:4vh;font-size:13px;color:#000}label[_ngcontent-%COMP%]{font-size:13px;width:100%}"]}),s})();var y=l(88692);function F(s,c){if(1&s&&(e.TgZ(0,"label",26),e._uU(1),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Oqu(t.customerTranList[0].BILLTO)}}function h(s,c){if(1&s&&(e.TgZ(0,"label",26),e._uU(1),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Oqu(t.customerTranList[0].BILLTOADD)}}function b(s,c){if(1&s&&(e.TgZ(0,"tr")(1,"td",27),e._uU(2),e.qZA(),e.TgZ(3,"td",28),e._uU(4),e.qZA(),e.TgZ(5,"td",29),e._uU(6),e.qZA(),e.TgZ(7,"td",30),e._uU(8),e.ALo(9,"number"),e.qZA(),e.TgZ(10,"td",29),e._uU(11),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"td",29),e._uU(14),e.ALo(15,"date"),e.qZA(),e.TgZ(16,"td",27),e._uU(17),e.qZA()()),2&s){const t=c.$implicit,n=c.index;e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.ITEMDESC),e.xp6(2),e.Oqu(t.BC),e.xp6(2),e.Oqu(e.xi3(9,7,t.In_Rate_A,"1.2-2")),e.xp6(3),e.Oqu(e.lcZ(12,10,t.TRNDATE)),e.xp6(3),e.Oqu(e.lcZ(15,12,t.WARRANTY_EXPIRY_DATE)),e.xp6(3),e.Oqu(t.STATUS)}}function u(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"div")(1,"div",31)(2,"div",32)(3,"div",33)(4,"h5",34),e._uU(5,"Warranty Info"),e.qZA(),e.TgZ(6,"button",35),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.closeModal())}),e.TgZ(7,"span",36),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"div",37)(10,"div",38),e._UZ(11,"img",39),e.qZA()()()()()}if(2&s){const t=e.oxw();e.xp6(11),e.s9C("src",t.image,e.LSH)}}let g=(()=>{class s{constructor(t,n,i){this.loadSerivce=t,this.alertService=n,this.materService=i,this.customerTranList=[],this.image="../../../../../assets/warranty-img.jpg"}ngOnInit(){this.showImage=!1}searchProductList(){this.getCustomerTransactionHistory()}getCustomerTransactionHistory(){this.searchInput&&(this.loadSerivce.show("Data is  loading.."),this.materService.getProductCustomerHistory(this.searchInput).subscribe(t=>{"ok"==t.status?(this.loadSerivce.hide(),this.customerTranList=t.result):(this.customerTranList=[],this.loadSerivce.hide(),this.alertService.info(t.result.error.result))},t=>{this.customerTranList=[],this.loadSerivce.hide()}))}changeSearchEvent(){(""==this.searchInput||null==this.searchInput)&&(this.customerTranList=[])}viewWarranty(t){this.showImage=!0,this.image=0==t?"../../../../../assets/warranty-img.jpg":"../../../../../assets/samsung.jpg"}closeModal(){this.showImage=!1}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(C.V),e.Y36(S.c),e.Y36(I.P))},s.\u0275cmp=e.Xpm({type:s,selectors:[["customer-transaction-history"]],decls:48,vars:5,consts:[[1,"row","col-md-12"],[1,"col-md-4"],[1,"col-md-8"],[1,"container"],[1,"row",2,"margin-top","10px"],[2,"border","2px solid #d9d9d9","height","78vh","width","100%"],[1,"col-md-12"],[1,"form-group","row",2,"margin-bottom","0.3rem"],[1,"form-label","col-md-2",2,"font-size","14px","font-weight","bold"],[1,"col-md-3",2,"padding-left","0px"],["type","text",1,"form-control","col-md-9",2,"width","75%","height","4vh","font-size","14px",3,"ngModel","ngModelChange","keydown.enter"],[1,"col-md-2",2,"margin-top","-4px","margin-left","-65px"],["type","button",1,"btn","btn-info",2,"margin-left","5px","font-size","12px",3,"click"],[1,"form-group","row"],[1,"col-md-2"],["classs","form-label",2,"font-size","14px","width","90%","font-weight","bold"],["classs","form-label","style","font-size: 14px;width: 90%;",4,"ngIf"],[1,"col-md-1"],[1,"table","table-striped",2,"width","95%","margin-left","25px"],[2,"line-height","10px"],["colspan","1",2,"width","5%"],["colspan","1",2,"width","15%"],["colspan","1",2,"width","8%"],["colspan","1",2,"width","6%"],[4,"ngFor","ngForOf"],[4,"ngIf"],["classs","form-label",2,"font-size","14px","width","90%"],[2,"width","5%"],[2,"width","15%"],[2,"width","8%"],[2,"width","6%"],[1,"modal-sticky",2,"display","block","padding","0px","margin-bottom","1rem","margin-right","18rem"],[1,"modal-content","modal-content-main-area",2,"width","100%","height","90%"],[1,"modal-header",2,"padding","0px","background","#c0c0c0"],[1,"modal-title",2,"padding-left","5px"],["aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"images",2,"height","366.6px","width","550px","margin","auto",3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h5"),e._uU(3,"Customer Transaction History"),e.qZA()(),e._UZ(4,"div",2),e.qZA(),e.TgZ(5,"div",3)(6,"div",4)(7,"fieldset",5)(8,"div",6)(9,"div",7)(10,"label",8),e._uU(11," Search by Mobile: "),e.qZA(),e.TgZ(12,"div",9)(13,"input",10),e.NdJ("ngModelChange",function(r){return n.searchInput=r})("ngModelChange",function(){return n.changeSearchEvent()})("keydown.enter",function(){return n.searchProductList()}),e.qZA()(),e.TgZ(14,"div",11)(15,"button",12),e.NdJ("click",function(){return n.searchProductList()}),e._uU(16,"Search"),e.qZA()()(),e.TgZ(17,"div",13)(18,"div",14)(19,"label",15),e._uU(20,"Customer Name:"),e.qZA()(),e.TgZ(21,"div",9),e.YNc(22,F,2,1,"label",16),e.qZA(),e.TgZ(23,"div",17)(24,"label",15),e._uU(25,"Address:"),e.qZA()(),e.TgZ(26,"div",9),e.YNc(27,h,2,1,"label",16),e.qZA()()(),e.TgZ(28,"table",18)(29,"thead")(30,"tr",19)(31,"th",20),e._uU(32,"SN"),e.qZA(),e.TgZ(33,"th",21),e._uU(34,"Item Name"),e.qZA(),e.TgZ(35,"th",22),e._uU(36,"IMEI No"),e.qZA(),e.TgZ(37,"th",23),e._uU(38,"Sale Rate"),e.qZA(),e.TgZ(39,"th",22),e._uU(40,"Sale Date"),e.qZA(),e.TgZ(41,"th",22),e._uU(42,"Warranty Date"),e.qZA(),e.TgZ(43,"th",20),e._uU(44,"Status"),e.qZA()()(),e.TgZ(45,"tbody"),e.YNc(46,b,18,14,"tr",24),e.qZA()()()()(),e.YNc(47,u,12,1,"div",25)),2&t&&(e.xp6(13),e.Q6J("ngModel",n.searchInput),e.xp6(9),e.Q6J("ngIf",n.customerTranList.length>0),e.xp6(5),e.Q6J("ngIf",n.customerTranList.length>0),e.xp6(19),e.Q6J("ngForOf",n.customerTranList),e.xp6(1),e.Q6J("ngIf",n.showImage))},dependencies:[y.sg,y.O5,d.Fj,d.JJ,d.On,y.JJ,y.uU],styles:["tbody[_ngcontent-%COMP%]{display:block;height:58vh;overflow:auto}thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}th[_ngcontent-%COMP%]{font-size:14px;padding:10px 0}td[_ngcontent-%COMP%]{font-size:13px;padding:0}.btn-sm[_ngcontent-%COMP%]{line-height:.5rem}"]}),s})();var f=l(28698);const x=["genericGridRefBill"];function w(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"tr")(1,"td",22),e._uU(2),e.qZA(),e.TgZ(3,"td",23),e._uU(4),e.qZA(),e.TgZ(5,"td",24),e._uU(6),e.qZA(),e.TgZ(7,"td",24),e._uU(8),e.qZA(),e.TgZ(9,"td",24),e._uU(10),e.ALo(11,"number"),e.qZA(),e.TgZ(12,"td",24),e._uU(13),e.ALo(14,"number"),e.qZA(),e.TgZ(15,"td",16)(16,"input",25),e.NdJ("change",function(i){const a=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.onFileSelected(i,a))}),e.qZA(),e.TgZ(17,"button",26),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.uploadFile())}),e._uU(18,"Upload"),e.qZA()()()}if(2&s){const t=c.$implicit,n=c.index;e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.DESCRIPTION),e.xp6(2),e.Oqu(t.MCODE),e.xp6(2),e.Oqu(t.Quantity),e.xp6(2),e.Oqu(e.xi3(11,6,t.RATE,"1.0-2")),e.xp6(3),e.Oqu(e.xi3(14,9,t.AMOUNT,"1.0-2"))}}let A=(()=>{class s{constructor(t,n,i,r){this.masterService=t,this.alertService=n,this.loadService=i,this._trnMainService=r,this.gridPopupSettingsForRefBill=new f.im,this.itemList=[],this.gridPopupSettingsForRefBill=this.masterService.getGenericGridPopUpSettings("REFBILLOFPURCHASERETURN")}ngOnInit(){}RefBillEnterCommand(t){t.preventDefault(),this.genericGridSetting("/getMobileItemRefBillPagedList"),this.genericGridRefBill.show()}onRefBillSelected(t){console.log("@ref bill selected",t),this.refBill=t.VCHRNO,this.customerName=t.BILLTO,this.address=t.BILLTOADD,this.phone=t.BILLTOTEL,this.loadData(t.VCHRNO,t.DIVISION,t.PhiscalID,null)}loadData(t,n,i,r){this.loadService.show("Getting data please wait...."),this.masterService.LoadTransaction(t,n,i,r).subscribe(a=>{"ok"==a.status?(this.loadService.hide(),this.itemList=a.result.ProdList?a.result.ProdList:[],console.log("item list for warrantty info",this.itemList)):(this.loadService.hide(),this.itemList=[],this.alertService.error("Couldn't load transaction"))},a=>{this.loadService.hide(),this.alertService.error(a)})}genericGridSetting(t){this.gridPopupSettingsForRefBill={title:"Vouchers",apiEndpoints:`${t}`,defaultFilterIndex:1,columns:[{key:"TRNDATE",title:"DATE",hidden:!1,noSearch:!1},{key:"VCHRNO",title:"VOUCHER NO.",hidden:!1,noSearch:!1},{key:"NETAMNT",title:"AMOUNT",hidden:!1,noSearch:!1},{key:"REMARKS",title:"REMARKS",hidden:!1,noSearch:!1}]}}onFileSelected(t,n){console.log("file selected",n),this.selectedFile=t.target.files[0],this.mcode=n.MCODE,this.vchrno=n.VCHRNO;let i=this.selectedFile;const r=new FormData;r.append("file",i,i.name),this.loadService.show("Uploading file. Please Wait..."),this.masterService.importConfig(r).subscribe(a=>{if("ok"==a.status){this.loadService.hide(),this.alertService.success("Image Selected.");let p=this.masterService.apiUrl;this.imgURL=""+p.substring(p.length-3,0)+a.result,console.log("@@after upload",a.result,this.imgURL)}else this.loadService.hide(),this.alertService.error(a.result)},a=>{this.loadService.hide(),this.alertService.error(a)})}uploadFile(){this.masterService.postWarrantyImg({VCHRNO:this.vchrno,MCODE:this.mcode,PATH:this.imgURL}).subscribe(n=>{"ok"==n.status?this.alertService.success("Upload Successful!"):this.alertService.error(n.result)},n=>{this.alertService.error(n)})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(I.P),e.Y36(S.c),e.Y36(C.V),e.Y36(T.p))},s.\u0275cmp=e.Xpm({type:s,selectors:[["warranty-upload-info"]],viewQuery:function(t,n){if(1&t&&e.Gf(x,5),2&t){let i;e.iGM(i=e.CRH())&&(n.genericGridRefBill=i.first)}},decls:58,vars:10,consts:[[1,"row","col-md-12"],[1,"col-md-4"],[1,"col-md-8"],[1,"container"],[1,"row",2,"margin-top","10px"],[2,"border","2px solid #d9d9d9","height","21vh","width","100%"],[1,"row",2,"margin-top","0.5rem"],[1,"col-md-6"],[1,"row","form-group"],[1,"form-label","col-md-3"],["type","text","placeholder","Press Enter to select Ref Bill No.",1,"form-control",3,"ngModel","keydown.enter","ngModelChange"],["type","text",1,"form-control",3,"disabled","ngModel","ngModelChange"],["type","text",1,"form-control",3,"disabled"],[1,"table","table-striped",2,"width","100%"],[2,"line-height","5px"],["colspan","1",2,"width","2%"],["colspan","1",2,"width","15%"],["colspan","1",2,"width","5%"],["colspan","1",2,"width","15%","text-align","center"],[4,"ngFor","ngForOf"],[3,"popupsettings","onItemDoubleClick"],["genericGridRefBill",""],[2,"width","2%"],[2,"width","15%"],[2,"width","5%"],["type","file",2,"width","70%",3,"change"],[1,"btn","btn-sm","btn-info",2,"font-size","12px","padding","2px 10px",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h5"),e._uU(3,"Warranty Information"),e.qZA()(),e._UZ(4,"div",2),e.qZA(),e.TgZ(5,"div",3)(6,"div",4)(7,"fieldset",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"label",9),e._uU(12,"Ref Bill:"),e.qZA(),e.TgZ(13,"div",2)(14,"input",10),e.NdJ("keydown.enter",function(r){return n.RefBillEnterCommand(r)})("ngModelChange",function(r){return n.refBill=r}),e.qZA()()(),e.TgZ(15,"div",8)(16,"label",9),e._uU(17,"Customer Name:"),e.qZA(),e.TgZ(18,"div",2)(19,"input",11),e.NdJ("ngModelChange",function(r){return n.customerName=r}),e.qZA()()(),e.TgZ(20,"div",8)(21,"label",9),e._uU(22,"Address:"),e.qZA(),e.TgZ(23,"div",2)(24,"input",11),e.NdJ("ngModelChange",function(r){return n.address=r}),e.qZA()()()(),e.TgZ(25,"div",7)(26,"div",8)(27,"label",9),e._uU(28,"Phone No:"),e.qZA(),e.TgZ(29,"div",2)(30,"input",11),e.NdJ("ngModelChange",function(r){return n.phone=r}),e.qZA()()(),e.TgZ(31,"div",8)(32,"label",9),e._uU(33,"IMEI No:"),e.qZA(),e.TgZ(34,"div",2),e._UZ(35,"input",12),e.qZA()()()()()(),e.TgZ(36,"div",6)(37,"table",13)(38,"thead")(39,"tr",14)(40,"th",15),e._uU(41,"SN"),e.qZA(),e.TgZ(42,"th",16),e._uU(43,"Item Name"),e.qZA(),e.TgZ(44,"th",17),e._uU(45,"Item Code"),e.qZA(),e.TgZ(46,"th",17),e._uU(47,"Qty"),e.qZA(),e.TgZ(48,"th",17),e._uU(49,"Rate"),e.qZA(),e.TgZ(50,"th",17),e._uU(51,"Amount "),e.qZA(),e.TgZ(52,"th",18),e._uU(53,"Upload Image"),e.qZA()()(),e.TgZ(54,"tbody"),e.YNc(55,w,19,12,"tr",19),e.qZA()()()(),e.TgZ(56,"generic-popup-grid",20,21),e.NdJ("onItemDoubleClick",function(r){return n.onRefBillSelected(r)}),e.qZA()),2&t&&(e.xp6(14),e.Q6J("ngModel",n.refBill),e.xp6(5),e.Q6J("disabled",!0)("ngModel",n.customerName),e.xp6(5),e.Q6J("disabled",!0)("ngModel",n.address),e.xp6(6),e.Q6J("disabled",!0)("ngModel",n.phone),e.xp6(5),e.Q6J("disabled",!0),e.xp6(20),e.Q6J("ngForOf",n.itemList),e.xp6(1),e.Q6J("popupsettings",n.gridPopupSettingsForRefBill))},dependencies:[y.sg,d.Fj,d.JJ,d.On,f.Zl,y.JJ],styles:[".card[_ngcontent-%COMP%]{margin:5vh auto!important;width:70%}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{border:1px solid #cbcbcb;border-radius:3px;height:4vh;font-size:13px;color:#000}label[_ngcontent-%COMP%]{font-size:13px;width:100%}.form-group[_ngcontent-%COMP%]{margin-bottom:.5rem}tbody[_ngcontent-%COMP%]{display:block;height:58vh;overflow:auto}thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}th[_ngcontent-%COMP%]{font-size:14px;padding:10px 0}td[_ngcontent-%COMP%]{font-size:13px;padding:0}"]}),s})();var M=l(82661),E=l(16497),L=l(48050);function R(s,c){if(1&s&&(e.TgZ(0,"option",18),e._uU(1),e.qZA()),2&s){const t=c.$implicit;e.Q6J("value",t.Division),e.xp6(1),e.hij(" ",t.NAME," ")}}function B(s,c){if(1&s&&(e.TgZ(0,"option",18),e._uU(1),e.qZA()),2&s){const t=c.$implicit;e.Q6J("value",t.NAME),e.xp6(1),e.hij(" ",t.NAME," ")}}function j(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"div")(1,"div",20)(2,"div",21)(3,"div",22)(4,"h5",23),e._uU(5,"Confirm Password !"),e.qZA(),e.TgZ(6,"button",24),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.closeModal())}),e.TgZ(7,"span",25),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"div",26)(10,"div",27)(11,"label",28),e._uU(12,"User Name:"),e.qZA(),e.TgZ(13,"div",29)(14,"input",30),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.currentUser=i)}),e.qZA()()(),e.TgZ(15,"div",27)(16,"label",28),e._uU(17,"Password:"),e.qZA(),e.TgZ(18,"div",29)(19,"input",31),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.password=i)}),e.qZA()()()(),e.TgZ(20,"div",32)(21,"button",33),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.submit())}),e._uU(22,"Confirm"),e.qZA()()()()()}if(2&s){const t=e.oxw();e.xp6(14),e.Q6J("ngModel",t.currentUser),e.xp6(5),e.Q6J("ngModel",t.password)}}function G(s,c){if(1&s&&(e.TgZ(0,"option",17),e._uU(1),e.qZA()),2&s){const t=c.$implicit;e.Q6J("value",t.PhiscalID),e.xp6(1),e.hij(" ",t.PHISCALNAME," ")}}function H(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"div")(1,"div",18)(2,"div",19)(3,"div",20)(4,"h5",21),e._uU(5,"Confirm Password !"),e.qZA(),e.TgZ(6,"button",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.closeModal())}),e.TgZ(7,"span",23),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"div",24)(10,"div",25)(11,"label",26),e._uU(12,"Password:"),e.qZA(),e.TgZ(13,"div",27)(14,"input",28),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.password=i)}),e.qZA()()()(),e.TgZ(15,"div",29)(16,"button",30),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.submit())}),e._uU(17,"Confirm"),e.qZA()()()()()}if(2&s){const t=e.oxw();e.xp6(14),e.Q6J("ngModel",t.password)}}const V=o.Bz.forChild([{path:"",component:D,children:[{path:"itemwarrantyinfo",component:q,canActivate:[M.C]},{path:"customertransactionhistory",component:g,canActivate:[M.C]},{path:"warrantyinformation",component:A,canActivate:[M.C]},{path:"changedivision",component:(()=>{class s{constructor(t,n,i,r,a,p,m,J,W,ee){this.alertService=t,this.spinnerService=n,this.masterRepo=i,this.utilityService=r,this.state=a,this.cacheService=p,this.load=m,this.router=J,this.authService=W,this.userinfoservice=ee,this.divisionLists=[],this.confirmPassword=!1,this.disabledWarehouse=!0,this.loggedinUserDetail={},this.urlpath=""}ngOnInit(){this.loggedinUserDetail=this.cacheService.get("USER_PROFILE"),this.currentUser=this.loggedinUserDetail.username,this.currentDivision=this.loggedinUserDetail.divisionName,this.currentWarehouse=this.loggedinUserDetail.userWarehouse,this.assignUserInfo(),console.log("HMMMMM",this.cacheService.MainDivision),this.utilityService.getDivisionByUserTrnPrivilege().subscribe(t=>{console.log("divison list",t),this.divisionLists=t||[]})}assignUserInfo(){console.log("session storage",this.cacheService.sessionGet("USER_PROFILE"),"localstorgare",this.cacheService.get("USER_PROFILE")),this.loggedinUserDetail=this.cacheService.sessionGet("USER_PROFILE")?this.cacheService.sessionGet("USER_PROFILE"):this.cacheService.get("USER_PROFILE"),this.currentUser=this.loggedinUserDetail.username,this.currentDivision=this.loggedinUserDetail.divisionName,this.currentWarehouse=this.loggedinUserDetail.userWarehouse}closeModal(){this.confirmPassword=!1}onSave(){this.newDiv?this.newWarehouse?(console.log("change div",this.newDiv),this.confirmPassword=!0,setTimeout(()=>{document.getElementById("confirmpassword").focus()},500)):this.alertService.warning("Please select warehouse"):this.alertService.warning("Please select new division")}submit(){console.log("to submit",this.newDiv,this.currentUser,this.password,this.newWarehouse),this.onChangeDivision()}onChangeDivision(){this.load.show("Changing Division, Please Wait.."),this.utilityService.Relogin(this.currentUser,this.password,this.newDiv,this.newWarehouse,this.masterRepo.userProfile.PhiscalYearInfo.PhiscalID).subscribe(t=>{this.load.hide(),this.newDiv="",this.newWarehouse="",this.closeModal(),this.assignUserInfo(),this.userinfoservice.MainDivisionName=this.currentDivision,this.userinfoservice.PhiscalYearName="20"+this.loggedinUserDetail.PhiscalYearInfo.PhiscalID,console.log("main divison after change",this.userinfoservice.MainDivisionName)},t=>{this.load.hide(),this.alertService.info("Divsion change not successful. Kindly, Sign out and try again .")})}changeDiv(){this.utilityService.getWarehouseByDivision(this.newDiv).subscribe(t=>{this.warehouseList=t||[]})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(S.c),e.Y36(C.V),e.Y36(I.P),e.Y36(v),e.Y36(O.q),e.Y36(E.Q),e.Y36(C.V),e.Y36(o.F0),e.Y36(Z.e),e.Y36(L.$))},s.\u0275cmp=e.Xpm({type:s,selectors:[["changedivision"]],features:[e._Bn([T.p])],decls:46,vars:8,consts:[[1,"sticky-top","row"],[1,"col-md-4"],[1,"col-md-8"],[1,"row","pull-right","mx-2"],["type","button",1,"btn","btn-info",2,"font-size","12px",3,"click"],["save",""],["type","button","routerLink","/pages/dashboard","title","Cancel",1,"btn","btn-info",2,"font-size","12px"],[1,"card"],[1,"card-body"],[1,"container"],[1,"row"],[1,"col-sm-3","form-control-label"],[1,"col-sm-7"],[2,"font-style","italic"],[1,"form-group","row",2,"margin-top","5px"],["autocomplete","off",1,"form-control",2,"padding","0px 5px",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["autocomplete","off",1,"form-control",2,"padding","0px 5px",3,"ngModel","ngModelChange"],[3,"value"],[4,"ngIf"],[1,"modal-sticky",2,"display","block","padding","0px","margin-bottom","-4rem","margin-right","13rem"],[1,"modal-content","modal-content-main-area",2,"width","70%"],[1,"modal-header",2,"padding","0px","background","#c0c0c0"],[1,"modal-title",2,"padding-left","5px"],["aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row",2,"margin-top","1rem"],[1,"col-sm-4","form-control-label",2,"font-size","13px"],[1,"col-sm-7",2,"padding-left","0px"],["type","text","id","confirmuser","autocomplete","off","readonly","",1,"form-control",2,"height","4vh","font-size","13px","background-color","aliceblue",3,"ngModel","ngModelChange"],["type","password","id","confirmpassword","autocomplete","off",1,"form-control",2,"height","4vh","font-size","13px",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","submit",1,"btn","btn-sm","btn-info",2,"font-size","12px",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h5"),e._uU(3,"Change Division "),e.qZA()(),e.TgZ(4,"div",2)(5,"div",3)(6,"button",4,5),e.NdJ("click",function(){return n.onSave()}),e._uU(8,"Save"),e.qZA(),e.TgZ(9,"button",6),e._uU(10,"Reset"),e.qZA()()()(),e.TgZ(11,"div",7)(12,"div",8)(13,"div",9)(14,"div",10)(15,"label",11),e._uU(16,"Current User:"),e.qZA(),e.TgZ(17,"div",12)(18,"label",13),e._uU(19),e.qZA()()(),e.TgZ(20,"div",10)(21,"label",11),e._uU(22,"Current Division:"),e.qZA(),e.TgZ(23,"div",12)(24,"label",13),e._uU(25),e.qZA()()(),e.TgZ(26,"div",10)(27,"label",11),e._uU(28,"Current Warehouse:"),e.qZA(),e.TgZ(29,"div",12)(30,"label",13),e._uU(31),e.qZA()()(),e.TgZ(32,"div",14)(33,"label",11),e._uU(34,"Division:"),e.qZA(),e.TgZ(35,"div",12)(36,"select",15),e.NdJ("ngModelChange",function(r){return n.newDiv=r})("change",function(){return n.changeDiv()}),e.YNc(37,R,2,2,"option",16),e.qZA()()(),e.TgZ(38,"div",14)(39,"label",11),e._uU(40,"Warehouse:"),e.qZA(),e.TgZ(41,"div",12)(42,"select",17),e.NdJ("ngModelChange",function(r){return n.newWarehouse=r}),e._UZ(43,"option",18),e.YNc(44,B,2,2,"option",16),e.qZA()()()()()(),e.YNc(45,j,23,2,"div",19)),2&t&&(e.xp6(19),e.hij(" ",n.currentUser,""),e.xp6(6),e.Oqu(n.currentDivision),e.xp6(6),e.Oqu(n.currentWarehouse),e.xp6(5),e.Q6J("ngModel",n.newDiv),e.xp6(1),e.Q6J("ngForOf",n.divisionLists),e.xp6(5),e.Q6J("ngModel",n.newWarehouse),e.xp6(2),e.Q6J("ngForOf",n.warehouseList),e.xp6(1),e.Q6J("ngIf",n.confirmPassword))},dependencies:[o.rH,y.sg,y.O5,d.YN,d.Kr,d.Fj,d.EJ,d.JJ,d.On],styles:[".card[_ngcontent-%COMP%]{margin:36px 30px 0 300px!important;width:60%}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{border:1px solid #cbcbcb;border-radius:3px;height:4vh;font-size:14px;color:#000}label[_ngcontent-%COMP%]{font-size:15px;width:100%}p[_ngcontent-%COMP%]{font-size:13px}"]}),s})(),canActivate:[M.C]},{path:"changePhiscalYear",component:(()=>{class s{constructor(t,n,i,r,a,p,m,J){this.alertService=t,this.spinnerService=n,this.masterRepo=i,this.utilityService=r,this.state=a,this.cache=p,this.load=m,this.userInfoService=J,this.confirmPassword=!1,this.loggedInUserDetail={},this.assignUserInfo(),this.utilityService.getPhiscalYearList().subscribe(W=>{this.phiscalYearList=W})}assignUserInfo(){console.log("session storage",this.cache.sessionGet("USER_PROFILE"),"localstorgare",this.cache.get("USER_PROFILE")),this.loggedInUserDetail=this.cache.sessionGet("USER_PROFILE")?this.cache.sessionGet("USER_PROFILE"):this.cache.get("USER_PROFILE"),this.currentUser=this.loggedInUserDetail.username,this.currentPhiscalYear="20"+this.loggedInUserDetail.PhiscalYearInfo.PhiscalID}ngOnInit(){}onApply(){""!=this.phiscalYear&&null!=this.phiscalYear&&null!=this.phiscalYear?(console.log("phiscalYear",this.phiscalYear),this.confirmPassword=!0):this.alertService.warning("Please select Fiscal year")}closeModal(){this.confirmPassword=!1}onChangePhiscalYear(){this.load.show("Changing Fiscal year, Please Wait.."),this.utilityService.Relogin(this.masterRepo.userProfile.username,this.password,this.masterRepo.userProfile.userDivision,this.masterRepo.userProfile.userWarehouse,this.phiscalYear).subscribe(t=>{this.load.hide(),this.phiscalYear="",this.closeModal(),this.assignUserInfo(),this.userInfoService.PhiscalYearName=this.currentPhiscalYear,console.log("division name on Fiscal year change",this.loggedInUserDetail.divisionName),this.userInfoService.MainDivisionName=this.loggedInUserDetail.divisionName,window.location.reload()},t=>{this.load.hide(),this.alertService.error("Fiscal Year change not successful. Kindly, Sign out and try again ..")})}submit(){""!=this.password&&null!=this.password&&null!=this.password?this.onChangePhiscalYear():this.alertService.warning("Please enter password !")}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(S.c),e.Y36(C.V),e.Y36(I.P),e.Y36(v),e.Y36(O.q),e.Y36(E.Q),e.Y36(C.V),e.Y36(L.$))},s.\u0275cmp=e.Xpm({type:s,selectors:[["changePhiscalYear"]],features:[e._Bn([T.p])],decls:32,vars:5,consts:[[1,"sticky-top","row"],[1,"col-md-4"],[1,"col-md-8"],[1,"row","pull-right"],["type","button",1,"btn","btn-info",2,"font-size","12px",3,"click"],["type","button","routerLink","/pages/dashboard","title","Cancel",1,"btn","btn-info",2,"font-size","12px"],[1,"card"],[1,"card-body"],[1,"container"],[1,"row"],[1,"col-sm-3","form-control-label"],[1,"col-sm-7"],[2,"font-style","italic"],[1,"form-group","row",2,"margin-top","5px"],["autocomplete","off","name","phisaclYear",1,"form-control",2,"padding","0px 5px",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],[1,"modal-sticky",2,"display","block","padding","0px","margin-bottom","-4rem","margin-right","13rem"],[1,"modal-content","modal-content-main-area",2,"width","70%"],[1,"modal-header",2,"padding","0px","background","#c0c0c0"],[1,"modal-title",2,"padding-left","5px"],["aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row",2,"margin-top","1rem"],[1,"col-sm-4","form-control-label",2,"font-size","13px"],[1,"col-sm-7",2,"padding-left","0px"],["type","password","id","Parent","autocomplete","off",1,"form-control",2,"height","4vh","font-size","13px",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","submit",1,"btn","btn-sm","btn-info",2,"font-size","12px",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h5"),e._uU(3,"Change Fiscal Year "),e.qZA()(),e.TgZ(4,"div",2)(5,"div",3)(6,"button",4),e.NdJ("click",function(){return n.onApply()}),e._uU(7,"Apply"),e.qZA(),e.TgZ(8,"button",5),e._uU(9,"Reset"),e.qZA()()()(),e.TgZ(10,"div",6)(11,"div",7)(12,"div",8)(13,"div",9)(14,"label",10),e._uU(15,"Current user:"),e.qZA(),e.TgZ(16,"div",11)(17,"label",12),e._uU(18),e.qZA()()(),e.TgZ(19,"div",9)(20,"label",10),e._uU(21,"Current Fiscal Year:"),e.qZA(),e.TgZ(22,"div",11)(23,"label",12),e._uU(24),e.qZA()()(),e.TgZ(25,"div",13)(26,"label",10),e._uU(27,"Fiscal Year:"),e.qZA(),e.TgZ(28,"div",11)(29,"select",14),e.NdJ("ngModelChange",function(r){return n.phiscalYear=r}),e.YNc(30,G,2,2,"option",15),e.qZA()()()()()(),e.YNc(31,H,18,1,"div",16)),2&t&&(e.xp6(18),e.Oqu(n.currentUser),e.xp6(6),e.Oqu(n.currentPhiscalYear),e.xp6(5),e.Q6J("ngModel",n.phiscalYear),e.xp6(1),e.Q6J("ngForOf",n.phiscalYearList),e.xp6(1),e.Q6J("ngIf",n.confirmPassword))},dependencies:[o.rH,y.sg,y.O5,d.YN,d.Kr,d.Fj,d.EJ,d.JJ,d.On],styles:[".card[_ngcontent-%COMP%]{margin:36px 30px 0 300px!important;width:60%}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{border:1px solid #cbcbcb;border-radius:3px;height:4vh;font-size:14px;color:#000}label[_ngcontent-%COMP%]{font-size:15px;width:100%}p[_ngcontent-%COMP%]{font-size:13px}.row[_ngcontent-%COMP%]{margin-right:0!important}"]}),s})(),canActivate:[M.C]}]}]);var $=l(34579);let X=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[M.C,T.p,v],imports:[V,$.h,P.m,d.u5,y.ez]}),s})()}}]);