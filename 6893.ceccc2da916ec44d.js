"use strict";(self.webpackChunkimserp=self.webpackChunkimserp||[]).push([[6893],{56893:(Lo,Nr,ot)=>{ot.d(Nr,{tW:()=>w,iM:()=>D,qr:()=>Oo,xc:()=>Po});var s=ot(64537),B=ot(88692),st=function(t,n){return(st=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])})(t,n)};function _n(t,n){function e(){this.constructor=t}st(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var R=function(){return R=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},R.apply(this,arguments)};function On(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var i,a,r=e.call(t),o=[];try{for(;(void 0===n||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){a={error:l}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o}function at(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(On(arguments[n]));return t}var He=[];Object.freeze(He);var lt={};Object.freeze(lt);var Cr={};function me(){return typeof window<"u"?window:typeof global<"u"?global:Cr}function F(){return++d.mobxGuid}function f(t){throw ce(!1,t),"X"}function ce(t,n){if(!t)throw new Error("[mobx] "+(n||"An invariant failed, however the error is obfuscated because this is an production build."))}function dt(t){var n=!1;return function(){if(!n)return n=!0,t.apply(this,arguments)}}var Ge=function(){};function ut(t){return null!==t&&"object"==typeof t}function ye(t){if(null===t||"object"!=typeof t)return!1;var n=Object.getPrototypeOf(t);return n===Object.prototype||null===n}function fe(t,n,e){Object.defineProperty(t,n,{enumerable:!1,writable:!0,configurable:!0,value:e})}function Se(t,n,e){Object.defineProperty(t,n,{enumerable:!1,writable:!1,configurable:!0,value:e})}function oe(t,n){var e="isMobX"+t;return n.prototype[e]=!0,function(r){return ut(r)&&!0===r[e]}}function be(t){return void 0!==me().Map&&t instanceof me().Map}function Me(t){return t instanceof Set}function z(t){for(var n=[];;){var e=t.next();if(e.done)break;n.push(e.value)}return n}function En(){return"function"==typeof Symbol&&Symbol.toPrimitive||"@@toPrimitive"}function Nn(t){return null===t?null:"object"==typeof t?""+t:t}function ct(){return"function"==typeof Symbol&&Symbol.iterator||"@@iterator"}function ft(t,n){Se(t,ct(),n)}function Ie(t){return t[ct()]=Mr,t}function pt(){return"function"==typeof Symbol&&Symbol.toStringTag||"@@toStringTag"}function Mr(){return this}var Ue=function(){function t(n){void 0===n&&(n="Atom@"+F()),this.name=n,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=y.NOT_TRACKING}return t.prototype.onBecomeUnobserved=function(){},t.prototype.onBecomeObserved=function(){},t.prototype.reportObserved=function(){return Hn(this)},t.prototype.reportChanged=function(){H(),function ti(t){if(t.lowestObserverState!==y.STALE){t.lowestObserverState=y.STALE;for(var n=t.observers,e=n.length;e--;){var r=n[e];r.dependenciesState===y.UP_TO_DATE&&(r.isTracing!==V.NONE&&Gn(r,t),r.onBecomeStale()),r.dependenciesState=y.STALE}}}(this),G()},t.prototype.toString=function(){return this.name},t}(),ht=oe("Atom",Ue);function Dn(t,n){return t===n}var _e={identity:Dn,structural:function Rr(t,n){return Ct(t,n)},default:function Pr(t,n){return function Sr(t,n){return"number"==typeof t&&"number"==typeof n&&isNaN(t)&&isNaN(n)}(t,n)||Dn(t,n)},shallow:function Fr(t,n){return Ct(t,n,1)}},Lr={},jr={};function Br(t,n){var e=n?Lr:jr;return e[t]||(e[t]={configurable:!0,enumerable:n,get:function(){return pe(this),this[t]},set:function(r){pe(this),this[t]=r}})}function pe(t){if(!0!==t.__mobxDidRunLazyInitializers){var n=t.__mobxDecorators;if(n)for(var e in fe(t,"__mobxDidRunLazyInitializers",!0),n){var r=n[e];r.propertyCreator(t,r.prop,r.descriptor,r.decoratorTarget,r.decoratorArguments)}}}function Cn(t,n){return function(){var r,i=function(a,l,c,p){return!0===p?(n(a,l,c,a,r),null):(Object.prototype.hasOwnProperty.call(a,"__mobxDecorators")||fe(a,"__mobxDecorators",R({},a.__mobxDecorators)),a.__mobxDecorators[l]={prop:l,propertyCreator:n,descriptor:c,decoratorTarget:a,decoratorArguments:r},Br(l,t))};return Vr(arguments)?(r=He,i.apply(null,arguments)):(r=Array.prototype.slice.call(arguments),i)}}function Vr(t){return(2===t.length||3===t.length)&&"string"==typeof t[1]||4===t.length&&!0===t[3]}function Re(t,n,e){return Xe(t)?t:Array.isArray(t)?m.array(t,{name:e}):ye(t)?m.object(t,void 0,{name:e}):be(t)?m.map(t,{name:e}):Me(t)?m.set(t,{name:e}):t}function Fe(t){return t}function $e(t){var n=Cn(!0,function(r,i,o,a,l){!function sr(t,n,e,r){var i=Dt(t);if(Z(i)){var o=K(i,{object:t,name:n,type:"add",newValue:e});if(!o)return;e=o.newValue}e=(i.values[n]=new le(e,r,i.name+"."+n,!1)).value,Object.defineProperty(t,n,function Pi(t){return ar[t]||(ar[t]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.read(this,t)},set:function(n){this.$mobx.write(this,t,n)}})}(n)),i.keys&&i.keys.push(n),function ji(t,n,e,r){var i=J(t),o=A(),a=i||o?{type:"add",object:n,name:e,newValue:r}:null;o&&U(R({},a,{name:t.name,key:e})),i&&Y(t,a),o&&$()}(i,t,n,e)}(r,i,o?o.initializer?o.initializer.call(r):o.value:void 0,t)}),e=(typeof process<"u"&&process,n);return e.enhancer=t,e}var Tn={deep:!0,name:void 0,defaultDecorator:void 0};function Oe(t){return null==t?Tn:"string"==typeof t?{name:t,deep:!0}:t}function Je(t){return t.defaultDecorator?t.defaultDecorator.enhancer:!1===t.deep?Fe:Re}Object.freeze(Tn),Object.freeze({deep:!1,name:void 0,defaultDecorator:void 0});var vt=$e(Re),Gr=$e(function kr(t,n,e){return null==t||j(t)||P(t)||M(t)||L(t)?t:Array.isArray(t)?m.array(t,{name:e,deep:!1}):ye(t)?m.object(t,void 0,{name:e,deep:!1}):be(t)?m.map(t,{name:e,deep:!1}):Me(t)?m.set(t,{name:e,deep:!1}):f(!1)}),wn=$e(Fe),Ur=$e(function Hr(t,n,e){return Ct(t,n)?n:t}),Sn={box:function(t,n){arguments.length>2&&X("box");var e=Oe(n);return new le(t,Je(e),e.name,!0,e.equals)},shallowBox:function(t,n){return arguments.length>2&&X("shallowBox"),m.box(t,{name:n,deep:!1})},array:function(t,n){arguments.length>2&&X("array");var e=Oe(n);return new te(t,Je(e),e.name)},shallowArray:function(t,n){return arguments.length>2&&X("shallowArray"),m.array(t,{name:n,deep:!1})},map:function(t,n){arguments.length>2&&X("map");var e=Oe(n);return new et(t,Je(e),e.name)},shallowMap:function(t,n){return arguments.length>2&&X("shallowMap"),m.map(t,{name:n,deep:!1})},set:function(t,n){arguments.length>2&&X("set");var e=Oe(n);return new nt(t,Je(e),e.name)},object:function(t,n,e){"string"==typeof arguments[1]&&X("object");var r=Oe(e);return Zn({},t,n,r)},shallowObject:function(t,n){return"string"==typeof arguments[1]&&X("shallowObject"),m.object(t,{},{name:n,deep:!1})},ref:wn,shallow:Gr,deep:vt,struct:Ur},m=function $r(t,n,e){if("string"==typeof arguments[1])return vt.apply(null,arguments);if(Xe(t))return t;var r=ye(t)?m.object(t,n,e):Array.isArray(t)?m.array(t,n):be(t)?m.map(t,n):Me(t)?m.set(t,n):t;if(r!==t)return r;f(!1)};function X(t){f("Expected one or two arguments to observable."+t+". Did you accidentally try to use observable."+t+" as decorator?")}Object.keys(Sn).forEach(function(t){return m[t]=Sn[t]});var Ye=Cn(!1,function(t,n,e,r,i){!function Fi(t,n,e){var r=Dt(t);e.name=r.name+"."+n,e.context=t,r.values[n]=new de(e),Object.defineProperty(t,n,function Li(t){return lr[t]||(lr[t]={configurable:d.computedConfigurable,enumerable:!1,get:function(){return dr(this).read(this,t)},set:function(n){dr(this).write(this,t,n)}})}(n))}(t,n,R({get:e.get,set:e.set},i[0]||{}))}),Jr=Ye({equals:_e.structural}),E=function(n,e,r){if("string"==typeof e||null!==n&&"object"==typeof n&&1===arguments.length)return Ye.apply(null,arguments);var i="object"==typeof e?e:{};return i.get=n,i.set="function"==typeof e?e:i.set,i.name=i.name||n.name||"",new de(i)};E.struct=Jr;var y=(()=>{return(t=y||(y={}))[t.NOT_TRACKING=-1]="NOT_TRACKING",t[t.UP_TO_DATE=0]="UP_TO_DATE",t[t.POSSIBLY_STALE=1]="POSSIBLY_STALE",t[t.STALE=2]="STALE",y;var t})(),V=(()=>{return(t=V||(V={}))[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK",V;var t})(),qe=function t(n){this.cause=n};function Pe(t){return t instanceof qe}function gt(t){switch(t.dependenciesState){case y.UP_TO_DATE:return!1;case y.NOT_TRACKING:case y.STALE:return!0;case y.POSSIBLY_STALE:for(var n=xe(),e=t.observing,r=e.length,i=0;i<r;i++){var o=e[i];if(Ee(o)){if(d.disableErrorBoundaries)o.get();else try{o.get()}catch{return se(n),!0}if(t.dependenciesState===y.STALE)return se(n),!0}}return Pn(t),se(n),!1}}function Qe(t){var n=t.observers.length>0;d.computationDepth>0&&n&&f(!1),!d.allowStateChanges&&(n||"strict"===d.enforceActions)&&f(!1)}function Mn(t,n,e){var r=Rn(!0);Pn(t),t.newObserving=new Array(t.observing.length+100),t.unboundDepsCount=0,t.runId=++d.runId;var o,i=d.trackingDerivation;if(d.trackingDerivation=t,!0===d.disableErrorBoundaries)o=n.call(e);else try{o=n.call(e)}catch(a){o=new qe(a)}return d.trackingDerivation=i,function Yr(t){for(var n=t.observing,e=t.observing=t.newObserving,r=y.UP_TO_DATE,i=0,o=t.unboundDepsCount,a=0;a<o;a++)0===(l=e[a]).diffValue&&(l.diffValue=1,i!==a&&(e[i]=l),i++),l.dependenciesState>r&&(r=l.dependenciesState);for(e.length=i,t.newObserving=null,o=n.length;o--;)0===(l=n[o]).diffValue&&Vn(l,t),l.diffValue=0;for(;i--;){var l;1===(l=e[i]).diffValue&&(l.diffValue=0,ei(l,t))}r!==y.UP_TO_DATE&&(t.dependenciesState=r,t.onBecomeStale())}(t),Fn(r),o}function mt(t){var n=t.observing;t.observing=[];for(var e=n.length;e--;)Vn(n[e],t);t.dependenciesState=y.NOT_TRACKING}function In(t){var n=xe(),e=t();return se(n),e}function xe(){var t=d.trackingDerivation;return d.trackingDerivation=null,t}function se(t){d.trackingDerivation=t}function Rn(t){var n=d.allowStateReads;return d.allowStateReads=t,n}function Fn(t){d.allowStateReads=t}function Pn(t){if(t.dependenciesState!==y.UP_TO_DATE){t.dependenciesState=y.UP_TO_DATE;for(var n=t.observing,e=n.length;e--;)n[e].lowestObserverState=y.UP_TO_DATE}}var We=0,qr=1;function ae(t,n){var e=function(){return Ln(t,n,this,arguments)};return e.isMobxAction=!0,e}function Ln(t,n,e,r){var i=function Qr(t,n,e){var r=A()&&!!t,i=0;if(r){i=Date.now();var o=e&&e.length||0,a=new Array(o);if(o>0)for(var l=0;l<o;l++)a[l]=e[l];U({type:"action",name:t,object:n,arguments:a})}var c=xe();H();var O={prevDerivation:c,prevAllowStateChanges:yt(!0),prevAllowStateReads:Rn(!0),notifySpy:r,startTime:i,actionId:qr++,parentActionId:We};return We=O.actionId,O}(t,e,r);try{return n.apply(e,r)}catch(o){throw i.error=o,o}finally{!function Wr(t){We!==t.actionId&&f("invalid action stack. did you forget to finish an action?"),We=t.parentActionId,void 0!==t.error&&(d.suppressReactionErrors=!0),bt(t.prevAllowStateChanges),Fn(t.prevAllowStateReads),G(),se(t.prevDerivation),t.notifySpy&&$({time:Date.now()-t.startTime}),d.suppressReactionErrors=!1}(i)}}function yt(t){var n=d.allowStateChanges;return d.allowStateChanges=t,n}function bt(t){d.allowStateChanges=t}var le=function(t){function n(e,r,i,o,a){void 0===i&&(i="ObservableValue@"+F()),void 0===o&&(o=!0),void 0===a&&(a=_e.default);var l=t.call(this,i)||this;return l.enhancer=r,l.name=i,l.equals=a,l.hasUnreportedChange=!1,l.value=r(e,void 0,i),o&&A()&&he({type:"create",name:l.name,newValue:""+l.value}),l}return _n(n,t),n.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.prototype.set=function(e){var r=this.value;if((e=this.prepareNewValue(e))!==d.UNCHANGED){var i=A();i&&U({type:"update",name:this.name,newValue:e,oldValue:r}),this.setNewValue(e),i&&$()}},n.prototype.prepareNewValue=function(e){if(Qe(this),Z(this)){var r=K(this,{object:this,type:"update",newValue:e});if(!r)return d.UNCHANGED;e=r.newValue}return e=this.enhancer(e,this.value,this.name),this.equals(this.value,e)?d.UNCHANGED:e},n.prototype.setNewValue=function(e){var r=this.value;this.value=e,this.reportChanged(),J(this)&&Y(this,{type:"update",object:this,newValue:e,oldValue:r})},n.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},n.prototype.intercept=function(e){return Ve(this,e)},n.prototype.observe=function(e,r){return r&&e({object:this,type:"update",newValue:this.value,oldValue:void 0}),ke(this,e)},n.prototype.toJSON=function(){return this.get()},n.prototype.toString=function(){return this.name+"["+this.value+"]"},n.prototype.valueOf=function(){return Nn(this.get())},n}(Ue);le.prototype[En()]=le.prototype.valueOf,oe("ObservableValue",le);var de=function(){function t(n){this.dependenciesState=y.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=y.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+F(),this.value=new qe(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=V.NONE,this.derivation=n.get,this.name=n.name||"ComputedValue@"+F(),n.set&&(this.setter=ae(this.name+"-setter",n.set)),this.equals=n.equals||(n.compareStructural||n.struct?_e.structural:_e.default),this.scope=n.context,this.requiresReaction=!!n.requiresReaction,this.keepAlive=!!n.keepAlive}return t.prototype.onBecomeStale=function(){!function ri(t){if(t.lowestObserverState===y.UP_TO_DATE){t.lowestObserverState=y.POSSIBLY_STALE;for(var n=t.observers,e=n.length;e--;){var r=n[e];r.dependenciesState===y.UP_TO_DATE&&(r.dependenciesState=y.POSSIBLY_STALE,r.isTracing!==V.NONE&&Gn(r,t),r.onBecomeStale())}}}(this)},t.prototype.onBecomeUnobserved=function(){},t.prototype.onBecomeObserved=function(){},t.prototype.get=function(){this.isComputing&&f("Cycle detected in computation "+this.name+": "+this.derivation),0!==d.inBatch||0!==this.observers.length||this.keepAlive?(Hn(this),gt(this)&&this.trackAndCompute()&&function ni(t){if(t.lowestObserverState!==y.STALE){t.lowestObserverState=y.STALE;for(var n=t.observers,e=n.length;e--;){var r=n[e];r.dependenciesState===y.POSSIBLY_STALE?r.dependenciesState=y.STALE:r.dependenciesState===y.UP_TO_DATE&&(t.lowestObserverState=y.UP_TO_DATE)}}}(this)):gt(this)&&(this.warnAboutUntrackedRead(),H(),this.value=this.computeValue(!1),G());var n=this.value;if(Pe(n))throw n.cause;return n},t.prototype.peek=function(){var n=this.computeValue(!1);if(Pe(n))throw n.cause;return n},t.prototype.set=function(n){if(this.setter){ce(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,n)}finally{this.isRunningSetter=!1}}else ce(!1,!1)},t.prototype.trackAndCompute=function(){A()&&he({object:this.scope,type:"compute",name:this.name});var n=this.value,e=this.dependenciesState===y.NOT_TRACKING,r=this.computeValue(!0),i=e||Pe(n)||Pe(r)||!this.equals(n,r);return i&&(this.value=r),i},t.prototype.computeValue=function(n){var e;if(this.isComputing=!0,d.computationDepth++,n)e=Mn(this,this.derivation,this.scope);else if(!0===d.disableErrorBoundaries)e=this.derivation.call(this.scope);else try{e=this.derivation.call(this.scope)}catch(r){e=new qe(r)}return d.computationDepth--,this.isComputing=!1,e},t.prototype.suspend=function(){this.keepAlive||(mt(this),this.value=void 0)},t.prototype.observe=function(n,e){var r=this,i=!0,o=void 0;return je(function(){var a=r.get();if(!i||e){var l=xe();n({type:"update",object:r,newValue:a,oldValue:o}),se(l)}i=!1,o=a})},t.prototype.warnAboutUntrackedRead=function(){},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},t.prototype.valueOf=function(){return Nn(this.get())},t}();de.prototype[En()]=de.prototype.valueOf;var t,Ee=oe("ComputedValue",de),Le=function t(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},Ze=!0,d=((t=me()).__mobxInstanceCount>0&&!t.__mobxGlobals&&(Ze=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==(new Le).version&&(Ze=!1),Ze?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new Le):(setTimeout(function(){f("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new Le));function ei(t,n){var e=t.observers.length;e&&(t.observersIndexes[n.__mapid]=e),t.observers[e]=n,t.lowestObserverState>n.dependenciesState&&(t.lowestObserverState=n.dependenciesState)}function Vn(t,n){if(1===t.observers.length)t.observers.length=0,kn(t);else{var e=t.observers,r=t.observersIndexes,i=e.pop();if(i!==n){var o=r[n.__mapid]||0;o?r[i.__mapid]=o:delete r[i.__mapid],e[o]=i}delete r[n.__mapid]}}function kn(t){!1===t.isPendingUnobservation&&(t.isPendingUnobservation=!0,d.pendingUnobservations.push(t))}function H(){d.inBatch++}function G(){if(0==--d.inBatch){Jn();for(var t=d.pendingUnobservations,n=0;n<t.length;n++){var e=t[n];e.isPendingUnobservation=!1,0===e.observers.length&&(e.isBeingObserved&&(e.isBeingObserved=!1,e.onBecomeUnobserved()),e instanceof de&&e.suspend())}d.pendingUnobservations=[]}}function Hn(t){var n=d.trackingDerivation;return null!==n?(n.runId!==t.lastAccessedBy&&(t.lastAccessedBy=n.runId,n.newObserving[n.unboundDepsCount++]=t,t.isBeingObserved||(t.isBeingObserved=!0,t.onBecomeObserved())),!0):(0===t.observers.length&&d.inBatch>0&&kn(t),!1)}function Gn(t,n){if(console.log("[mobx.trace] '"+t.name+"' is invalidated due to a change in: '"+n.name+"'"),t.isTracing===V.BREAK){var e=[];Un(function hi(t,n){return Kn(q(t,n))}(t),e,1),new Function("debugger;\n/*\nTracing '"+t.name+"'\n\nYou are entering this break point because derivation '"+t.name+"' is being traced and '"+n.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(t instanceof de?t.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+e.join("\n")+"\n*/\n    ")()}}function Un(t,n,e){n.length>=1e3?n.push("(and many more)"):(n.push(""+new Array(e).join("\t")+t.name),t.dependencies&&t.dependencies.forEach(function(r){return Un(r,n,e+1)}))}var Ke=function(){function t(n,e,r,i){void 0===n&&(n="Reaction@"+F()),void 0===i&&(i=!1),this.name=n,this.onInvalidate=e,this.errorHandler=r,this.requiresObservable=i,this.observing=[],this.newObserving=[],this.dependenciesState=y.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+F(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=V.NONE}return t.prototype.onBecomeStale=function(){this.schedule()},t.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,d.pendingReactions.push(this),Jn())},t.prototype.isScheduled=function(){return this._isScheduled},t.prototype.runReaction=function(){if(!this.isDisposed){if(H(),this._isScheduled=!1,gt(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&A()&&he({name:this.name,type:"scheduled-reaction"})}catch(n){this.reportExceptionInDerivation(n)}}G()}},t.prototype.track=function(n){H();var r,e=A();e&&(r=Date.now(),U({name:this.name,type:"reaction"})),this._isRunning=!0;var i=Mn(this,n,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&mt(this),Pe(i)&&this.reportExceptionInDerivation(i.cause),e&&$({time:Date.now()-r}),G()},t.prototype.reportExceptionInDerivation=function(n){var e=this;if(this.errorHandler)this.errorHandler(n,this);else{if(d.disableErrorBoundaries)throw n;var r="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";d.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(r,n),A()&&he({type:"error",name:this.name,message:r,error:""+n}),d.globalReactionErrorHandlers.forEach(function(i){return i(n,e)})}},t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(H(),mt(this),G()))},t.prototype.getDisposer=function(){var n=this.dispose.bind(this);return n.$mobx=this,n},t.prototype.toString=function(){return"Reaction["+this.name+"]"},t.prototype.trace=function(n){void 0===n&&(n=!1),function Ei(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=!1;"boolean"==typeof t[t.length-1]&&(e=t.pop());var r=Ni(t);if(!r)return f(!1);r.isTracing===V.NONE&&console.log("[mobx.trace] '"+r.name+"' tracing enabled"),r.isTracing=e?V.BREAK:V.LOG}(this,n)},t}();function Jn(){d.inBatch>0||d.isRunningReactions||function(t){t()}(ii)}function ii(){d.isRunningReactions=!0;for(var t=d.pendingReactions,n=0;t.length>0;){100==++n&&(console.error("Reaction doesn't converge to a stable state after 100 iterations. Probably there is a cycle in the reactive function: "+t[0]),t.splice(0));for(var e=t.splice(0),r=0,i=e.length;r<i;r++)e[r].runReaction()}d.isRunningReactions=!1}var ze=oe("Reaction",Ke);function A(){return!!d.spyListeners.length}function he(t){if(d.spyListeners.length)for(var n=d.spyListeners,e=0,r=n.length;e<r;e++)n[e](t)}function U(t){he(R({},t,{spyReportStart:!0}))}var si={spyReportEnd:!0};function $(t){he(t?R({},t,{spyReportEnd:!0}):si)}function li(){f(!1)}function Yn(t){return function(n,e,r){if(r){if(r.value)return{value:ae(t,r.value),enumerable:!1,configurable:!0,writable:!0};var i=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return ae(t,i.call(this))}}}return di(t).apply(this,arguments)}}function di(t){return function(n,e,r){Object.defineProperty(n,e,{configurable:!0,enumerable:!1,get:function(){},set:function(i){fe(this,e,v(t,i))}})}}var v=function(n,e,r,i){return 1===arguments.length&&"function"==typeof n?ae(n.name||"<unnamed action>",n):2===arguments.length&&"function"==typeof e?ae(n,e):1===arguments.length&&"string"==typeof n?Yn(n):!0!==i?Yn(e).apply(null,arguments):void(n[e]=ae(n.name||e,r.value))};function Ot(t,n,e){fe(t,n,ae(n,e.bind(t)))}function je(t,n){void 0===n&&(n=lt);var i,e=n&&n.name||t.name||"Autorun@"+F();if(n.scheduler||n.delay){var o=qn(n),a=!1;i=new Ke(e,function(){a||(a=!0,o(function(){a=!1,i.isDisposed||i.track(l)}))},n.onError,n.requiresObservable)}else i=new Ke(e,function(){this.track(l)},n.onError,n.requiresObservable);function l(){t(i)}return i.schedule(),i.getDisposer()}v.bound=function ui(t,n,e,r){return!0===r?(Ot(t,n,e.value),null):e?{configurable:!0,enumerable:!1,get:function(){return Ot(this,n,e.value||e.initializer.call(this)),this[n]},set:li}:{enumerable:!1,configurable:!0,set:function(i){Ot(this,n,i)},get:function(){}}};var ci=function(t){return t()};function qn(t){return t.scheduler?t.scheduler:t.delay?function(n){return setTimeout(n,t.delay)}:ci}function Ne(t,n,e){void 0===e&&(e=lt),"boolean"==typeof e&&(e={fireImmediately:e});var p,r=e.name||"Reaction@"+F(),i=v(r,e.onError?function fi(t,n){return function(){try{return n.apply(this,arguments)}catch(e){t.call(this,e)}}}(e.onError,n):n),o=!e.scheduler&&!e.delay,a=qn(e),l=!0,c=!1,h=e.compareStructural?_e.structural:e.equals||_e.default,O=new Ke(r,function(){l||o?S():c||(c=!0,a(S))},e.onError,e.requiresObservable);function S(){if(c=!1,!O.isDisposed){var W=!1;O.track(function(){var N=t(O);W=l||!h(p,N),p=N}),l&&e.fireImmediately&&i(p,O),!l&&!0===W&&i(p,O),l&&(l=!1)}}return O.schedule(),O.getDisposer()}function Qn(t,n,e){return Wn("onBecomeUnobserved",t,n,e)}function Wn(t,n,e,r){var i="function"==typeof r?q(n,e):q(n),o="function"==typeof r?r:e,a=i[t];return"function"!=typeof a?f(!1):(i[t]=function(){a.call(this),o.call(this)},function(){i[t]=a})}function Zn(t,n,e,r){var o=(r=Oe(r)).defaultDecorator||(!1===r.deep?wn:vt);pe(t),Dt(t,r.name,o.enhancer),H();try{for(var i in n){var a=Object.getOwnPropertyDescriptor(n,i),c=(e&&i in e?e[i]:a.get?Ye:o)(t,i,a,!0);c&&Object.defineProperty(t,i,c)}}finally{G()}return t}function Kn(t){var n={name:t.name};return t.observing&&t.observing.length>0&&(n.dependencies=function Tr(t){var n=[];return t.forEach(function(e){-1===n.indexOf(e)&&n.push(e)}),n}(t.observing).map(Kn)),n}function tr(t,n){if(null==t)return!1;if(void 0!==n){if(j(t)){var e=t.$mobx;return e.values&&!!e.values[n]}return!1}return j(t)||!!t.$mobx||ht(t)||ze(t)||Ee(t)}function Xe(t){return 1!==arguments.length&&f(!1),tr(t)}function Ni(t){switch(t.length){case 0:return d.trackingDerivation;case 1:return q(t[0]);case 2:return q(t[0],t[1])}}function ee(t,n){void 0===n&&(n=void 0),H();try{return t.apply(n)}finally{G()}}function Z(t){return void 0!==t.interceptors&&t.interceptors.length>0}function Ve(t,n){var e=t.interceptors||(t.interceptors=[]);return e.push(n),dt(function(){var r=e.indexOf(n);-1!==r&&e.splice(r,1)})}function K(t,n){var e=xe();try{var r=t.interceptors;if(r)for(var i=0,o=r.length;i<o&&(ce(!(n=r[i](n))||n.type,"Intercept handlers should return nothing or a change object"),n);i++);return n}finally{se(e)}}function J(t){return void 0!==t.changeListeners&&t.changeListeners.length>0}function ke(t,n){var e=t.changeListeners||(t.changeListeners=[]);return e.push(n),dt(function(){var r=e.indexOf(n);-1!==r&&e.splice(r,1)})}function Y(t,n){var e=xe(),r=t.changeListeners;if(r){for(var i=0,o=(r=r.slice()).length;i<o;i++)r[i](n);se(e)}}var Ti=function(){var t=!1,n={};return Object.defineProperty(n,"0",{set:function(){t=!0}}),Object.create(n)[0]=1,!1===t}(),xt=0,Et=function t(){};(function Ai(t,n){typeof Object.setPrototypeOf<"u"?Object.setPrototypeOf(t.prototype,n):typeof t.prototype.__proto__<"u"?t.prototype.__proto__=n:t.prototype=n})(Et,Array.prototype),Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach(function(t){Object.defineProperty(Et.prototype,t,{configurable:!0,writable:!0,value:Array.prototype[t]})});var rr=function(){function t(n,e,r,i){this.array=r,this.owned=i,this.values=[],this.lastKnownLength=0,this.atom=new Ue(n||"ObservableArray@"+F()),this.enhancer=function(o,a){return e(o,a,n+"[..]")}}return t.prototype.dehanceValue=function(n){return void 0!==this.dehancer?this.dehancer(n):n},t.prototype.dehanceValues=function(n){return void 0!==this.dehancer&&n.length>0?n.map(this.dehancer):n},t.prototype.intercept=function(n){return Ve(this,n)},t.prototype.observe=function(n,e){return void 0===e&&(e=!1),e&&n({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),ke(this,n)},t.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},t.prototype.setArrayLength=function(n){if("number"!=typeof n||n<0)throw new Error("[mobx.array] Out of range: "+n);var e=this.values.length;if(n!==e)if(n>e){for(var r=new Array(n-e),i=0;i<n-e;i++)r[i]=void 0;this.spliceWithArray(e,0,r)}else this.spliceWithArray(n,e-n)},t.prototype.updateArrayLength=function(n,e){if(n!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=e,e>0&&n+e+1>xt&&Nt(n+e+1)},t.prototype.spliceWithArray=function(n,e,r){var i=this;Qe(this.atom);var o=this.values.length;if(void 0===n?n=0:n>o?n=o:n<0&&(n=Math.max(0,o+n)),e=1===arguments.length?o-n:null==e?0:Math.max(0,Math.min(e,o-n)),void 0===r&&(r=He),Z(this)){var a=K(this,{object:this.array,type:"splice",index:n,removedCount:e,added:r});if(!a)return He;e=a.removedCount,r=a.added}var l=(r=0===r.length?r:r.map(function(p){return i.enhancer(p,void 0)})).length-e;this.updateArrayLength(o,l);var c=this.spliceItemsIntoValues(n,e,r);return(0!==e||0!==r.length)&&this.notifyArraySplice(n,r,c),this.dehanceValues(c)},t.prototype.spliceItemsIntoValues=function(n,e,r){var i;if(r.length<1e4)return(i=this.values).splice.apply(i,at([n,e],r));var o=this.values.slice(n,n+e);return this.values=this.values.slice(0,n).concat(r,this.values.slice(n+e)),o},t.prototype.notifyArrayChildUpdate=function(n,e,r){var i=!this.owned&&A(),o=J(this),a=o||i?{object:this.array,type:"update",index:n,newValue:e,oldValue:r}:null;i&&U(R({},a,{name:this.atom.name})),this.atom.reportChanged(),o&&Y(this,a),i&&$()},t.prototype.notifyArraySplice=function(n,e,r){var i=!this.owned&&A(),o=J(this),a=o||i?{object:this.array,type:"splice",index:n,removed:r,added:e,removedCount:r.length,addedCount:e.length}:null;i&&U(R({},a,{name:this.atom.name})),this.atom.reportChanged(),o&&Y(this,a),i&&$()},t}(),te=function(t){function n(e,r,i,o){void 0===i&&(i="ObservableArray@"+F()),void 0===o&&(o=!1);var a=t.call(this)||this,l=new rr(i,r,a,o);if(Se(a,"$mobx",l),e&&e.length){var c=yt(!0);a.spliceWithArray(0,0,e),bt(c)}return Ti&&Object.defineProperty(l.array,"0",wi),a}return _n(n,t),n.prototype.intercept=function(e){return this.$mobx.intercept(e)},n.prototype.observe=function(e,r){return void 0===r&&(r=!1),this.$mobx.observe(e,r)},n.prototype.clear=function(){return this.splice(0)},n.prototype.concat=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),e.map(function(i){return P(i)?i.peek():i}))},n.prototype.replace=function(e){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,e)},n.prototype.toJS=function(){return this.slice()},n.prototype.toJSON=function(){return this.toJS()},n.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},n.prototype.find=function(e,r,i){void 0===i&&(i=0);var o=this.findIndex.apply(this,arguments);return-1===o?void 0:this.get(o)},n.prototype.findIndex=function(e,r,i){void 0===i&&(i=0);for(var o=this.peek(),a=o.length,l=i;l<a;l++)if(e.call(r,o[l],l,this))return l;return-1},n.prototype.splice=function(e,r){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(e);case 2:return this.$mobx.spliceWithArray(e,r)}return this.$mobx.spliceWithArray(e,r,i)},n.prototype.spliceWithArray=function(e,r,i){return this.$mobx.spliceWithArray(e,r,i)},n.prototype.push=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=this.$mobx;return i.spliceWithArray(i.values.length,0,e),i.values.length},n.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},n.prototype.shift=function(){return this.splice(0,1)[0]},n.prototype.unshift=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=this.$mobx;return i.spliceWithArray(0,0,e),i.values.length},n.prototype.reverse=function(){var e=this.slice();return e.reverse.apply(e,arguments)},n.prototype.sort=function(e){var r=this.slice();return r.sort.apply(r,arguments)},n.prototype.remove=function(e){var r=this.$mobx.dehanceValues(this.$mobx.values).indexOf(e);return r>-1&&(this.splice(r,1),!0)},n.prototype.move=function(e,r){function i(l){if(l<0)throw new Error("[mobx.array] Index out of bounds: "+l+" is negative");var c=this.$mobx.values.length;if(l>=c)throw new Error("[mobx.array] Index out of bounds: "+l+" is not smaller than "+c)}if(i.call(this,e),i.call(this,r),e!==r){var a,o=this.$mobx.values;a=e<r?at(o.slice(0,e),o.slice(e+1,r+1),[o[e]],o.slice(r+1)):at(o.slice(0,r),[o[e]],o.slice(r,e),o.slice(e+1)),this.replace(a)}},n.prototype.get=function(e){var r=this.$mobx;if(r){if(e<r.values.length)return r.atom.reportObserved(),r.dehanceValue(r.values[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+r.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},n.prototype.set=function(e,r){var i=this.$mobx,o=i.values;if(e<o.length){Qe(i.atom);var a=o[e];if(Z(i)){var l=K(i,{type:"update",object:this,index:e,newValue:r});if(!l)return;r=l.newValue}(r=i.enhancer(r,a))!==a&&(o[e]=r,i.notifyArrayChildUpdate(e,r,a))}else{if(e!==o.length)throw new Error("[mobx.array] Index out of bounds, "+e+" is larger than "+o.length);i.spliceWithArray(e,0,[r])}},n}(Et);ft(te.prototype,function(){this.$mobx.atom.reportObserved();var t=this,n=0;return Ie({next:function(){return n<t.length?{value:t[n++],done:!1}:{done:!0,value:void 0}}})}),Object.defineProperty(te.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(t){this.$mobx.setArrayLength(t)}}),fe(te.prototype,pt(),"Array"),["every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach(function(t){var n=Array.prototype[t];ce("function"==typeof n,"Base function not defined on Array prototype: '"+t+"'"),fe(te.prototype,t,function(){return n.apply(this.peek(),arguments)})}),function wr(t,n){for(var e=0;e<n.length;e++)fe(t,n[e],t[n[e]])}(te.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var wi=ir(0);function ir(t){return{enumerable:!1,configurable:!1,get:function(){return this.get(t)},set:function(n){this.set(t,n)}}}function Si(t){Object.defineProperty(te.prototype,""+t,ir(t))}function Nt(t){for(var n=xt;n<t;n++)Si(n);xt=t}Nt(1e3);var Mi=oe("ObservableArrayAdministration",rr);function P(t){return ut(t)&&Mi(t.$mobx)}var Ii={},et=function(){function t(n,e,r){if(void 0===e&&(e=Re),void 0===r&&(r="ObservableMap@"+F()),this.enhancer=e,this.name=r,this.$mobx=Ii,this._keys=new te(void 0,Fe,this.name+".keys()",!0),"function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(n)}return t.prototype._has=function(n){return this._data.has(n)},t.prototype.has=function(n){var e=this;if(!d.trackingDerivation)return this._has(n);var r=this._hasMap.get(n);if(!r){var i=r=new le(this._has(n),Fe,this.name+"."+tt(n)+"?",!1);this._hasMap.set(n,i),Qn(i,function(){return e._hasMap.delete(n)})}return r.get()},t.prototype.set=function(n,e){var r=this._has(n);if(Z(this)){var i=K(this,{type:r?"update":"add",object:this,newValue:e,name:n});if(!i)return this;e=i.newValue}return r?this._updateValue(n,e):this._addValue(n,e),this},t.prototype.delete=function(n){var e=this;if(Z(this)&&!(r=K(this,{type:"delete",object:this,name:n})))return!1;if(this._has(n)){var i=A(),o=J(this),r=o||i?{type:"delete",object:this,oldValue:this._data.get(n).value,name:n}:null;return i&&U(R({},r,{name:this.name,key:n})),ee(function(){e._keys.remove(n),e._updateHasMapEntry(n,!1),e._data.get(n).setNewValue(void 0),e._data.delete(n)}),o&&Y(this,r),i&&$(),!0}return!1},t.prototype._updateHasMapEntry=function(n,e){var r=this._hasMap.get(n);r&&r.setNewValue(e)},t.prototype._updateValue=function(n,e){var r=this._data.get(n);if((e=r.prepareNewValue(e))!==d.UNCHANGED){var i=A(),o=J(this),a=o||i?{type:"update",object:this,oldValue:r.value,name:n,newValue:e}:null;i&&U(R({},a,{name:this.name,key:n})),r.setNewValue(e),o&&Y(this,a),i&&$()}},t.prototype._addValue=function(n,e){var r=this;ee(function(){var l=new le(e,r.enhancer,r.name+"."+tt(n),!1);r._data.set(n,l),e=l.value,r._updateHasMapEntry(n,!0),r._keys.push(n)});var i=A(),o=J(this),a=o||i?{type:"add",object:this,name:n,newValue:e}:null;i&&U(R({},a,{name:this.name,key:n})),o&&Y(this,a),i&&$()},t.prototype.get=function(n){return this.has(n)?this.dehanceValue(this._data.get(n).get()):this.dehanceValue(void 0)},t.prototype.dehanceValue=function(n){return void 0!==this.dehancer?this.dehancer(n):n},t.prototype.keys=function(){return this._keys[ct()]()},t.prototype.values=function(){var n=this,e=0;return Ie({next:function(){return e<n._keys.length?{value:n.get(n._keys[e++]),done:!1}:{value:void 0,done:!0}}})},t.prototype.entries=function(){var n=this,e=0;return Ie({next:function(){if(e<n._keys.length){var r=n._keys[e++];return{value:[r,n.get(r)],done:!1}}return{done:!0}}})},t.prototype.forEach=function(n,e){var r=this;this._keys.forEach(function(i){return n.call(e,r.get(i),i,r)})},t.prototype.merge=function(n){var e=this;return M(n)&&(n=n.toJS()),ee(function(){ye(n)?Object.keys(n).forEach(function(r){return e.set(r,n[r])}):Array.isArray(n)?n.forEach(function(r){var i=On(r,2);return e.set(i[0],i[1])}):be(n)?n.constructor!==Map?f("Cannot initialize from classes that inherit from Map: "+n.constructor.name):n.forEach(function(r,i){return e.set(i,r)}):null!=n&&f("Cannot initialize map from "+n)}),this},t.prototype.clear=function(){var n=this;ee(function(){In(function(){n._keys.slice().forEach(function(e){return n.delete(e)})})})},t.prototype.replace=function(n){var e=this;return ee(function(){for(var r=function Ar(t){return be(t)||M(t)?t:Array.isArray(t)?new Map(t):ye(t)?new Map(Object.entries(t)):f("Cannot convert to map from '"+t+"'")}(n),i=e._keys,o=Array.from(r.keys()),a=!1,l=0;l<i.length;l++){var c=i[l];i.length===o.length&&c!==o[l]&&(a=!0),r.has(c)||(a=!0,e.delete(c))}r.forEach(function(p,h){e._data.has(h)||(a=!0),e.set(h,p)}),a&&e._keys.replace(o)}),this},Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.toPOJO=function(){var n=this,e={};return this._keys.forEach(function(r){return e["symbol"==typeof r?r:tt(r)]=n.get(r)}),e},t.prototype.toJS=function(){var n=this,e=new Map;return this._keys.forEach(function(r){return e.set(r,n.get(r))}),e},t.prototype.toJSON=function(){return this.toPOJO()},t.prototype.toString=function(){var n=this;return this.name+"[{ "+this._keys.map(function(e){return tt(e)+": "+n.get(e)}).join(", ")+" }]"},t.prototype.observe=function(n,e){return ke(this,n)},t.prototype.intercept=function(n){return Ve(this,n)},t}();function tt(t){return t&&t.toString?t.toString():new String(t).toString()}ft(et.prototype,function(){return this.entries()}),Se(et.prototype,pt(),"Map");var M=oe("ObservableMap",et),Ri={},nt=function(){function t(n,e,r){if(void 0===e&&(e=Re),void 0===r&&(r="ObservableSet@"+F()),this.name=r,this.$mobx=Ri,this._data=new Set,this._atom=function Ir(t,n,e){void 0===n&&(n=Ge),void 0===e&&(e=Ge);var r=new Ue(t);return function pi(t,n,e){Wn("onBecomeObserved",t,n,e)}(r,n),Qn(r,e),r}(this.name),"function"!=typeof Set)throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(i,o){return e(i,o,r)},n&&this.replace(n)}return t.prototype.dehanceValue=function(n){return void 0!==this.dehancer?this.dehancer(n):n},t.prototype.clear=function(){var n=this;ee(function(){In(function(){n._data.forEach(function(e){n.delete(e)})})})},t.prototype.forEach=function(n,e){var r=this;this._data.forEach(function(i){n.call(e,i,i,r)})},Object.defineProperty(t.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),t.prototype.add=function(n){var e=this;if(Qe(this._atom),Z(this)&&!(r=K(this,{type:"add",object:this,newValue:n})))return this;if(!this.has(n)){ee(function(){e._data.add(e.enhancer(n,void 0)),e._atom.reportChanged()});var i=A(),o=J(this),r=o||i?{type:"add",object:this,newValue:n}:null;o&&Y(this,r)}return this},t.prototype.delete=function(n){var e=this;if(Z(this)&&!(r=K(this,{type:"delete",object:this,oldValue:n})))return!1;if(this.has(n)){var i=A(),o=J(this),r=o||i?{type:"delete",object:this,oldValue:n}:null;return ee(function(){e._atom.reportChanged(),e._data.delete(n)}),o&&Y(this,r),!0}return!1},t.prototype.has=function(n){return this._atom.reportObserved(),this._data.has(this.dehanceValue(n))},t.prototype.entries=function(){var n=0,e=z(this.keys()),r=z(this.values());return Ie({next:function(){var i=n;return n+=1,i<r.length?{value:[e[i],r[i]],done:!1}:{done:!0}}})},t.prototype.keys=function(){return this.values()},t.prototype.values=function(){this._atom.reportObserved();var r,n=this,e=0;return void 0!==this._data.values?r=z(this._data.values()):(r=[],this._data.forEach(function(i){return r.push(i)})),Ie({next:function(){return e<r.length?{value:n.dehanceValue(r[e++]),done:!1}:{done:!0}}})},t.prototype.replace=function(n){var e=this;return L(n)&&(n=n.toJS()),ee(function(){Array.isArray(n)||Me(n)?(e.clear(),n.forEach(function(r){return e.add(r)})):null!=n&&f("Cannot initialize set from "+n)}),this},t.prototype.observe=function(n,e){return ke(this,n)},t.prototype.intercept=function(n){return Ve(this,n)},t.prototype.toJS=function(){return new Set(this)},t.prototype.toString=function(){return this.name+"[ "+z(this.keys()).join(", ")+" ]"},t}();ft(nt.prototype,function(){return this.values()}),Se(nt.prototype,pt(),"Set");var L=oe("ObservableSet",nt),or=function(){function t(n,e,r){this.target=n,this.name=e,this.defaultEnhancer=r,this.values={}}return t.prototype.read=function(n,e){if(this.target===n||(this.illegalAccess(n,e),this.values[e]))return this.values[e].get()},t.prototype.write=function(n,e,r){var i=this.target;i!==n&&this.illegalAccess(n,e);var o=this.values[e];if(o instanceof de)o.set(r);else{if(Z(this)){if(!(a=K(this,{type:"update",object:i,name:e,newValue:r})))return;r=a.newValue}if((r=o.prepareNewValue(r))!==d.UNCHANGED){var l=J(this),c=A(),a=l||c?{type:"update",object:i,oldValue:o.value,name:e,newValue:r}:null;c&&U(R({},a,{name:this.name,key:e})),o.setNewValue(r),l&&Y(this,a),c&&$()}}},t.prototype.remove=function(n){if(this.values[n]){var e=this.target;if(Z(this)&&!(r=K(this,{object:e,name:n,type:"remove"})))return;try{H();var i=J(this),o=A(),a=this.values[n].get();this.keys&&this.keys.remove(n),delete this.values[n],delete this.target[n];var r=i||o?{type:"remove",object:e,oldValue:a,name:n}:null;o&&U(R({},r,{name:this.name,key:n})),i&&Y(this,r),o&&$()}finally{G()}}},t.prototype.illegalAccess=function(n,e){console.warn("Property '"+e+"' of '"+n+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},t.prototype.observe=function(n,e){return ke(this,n)},t.prototype.intercept=function(n){return Ve(this,n)},t.prototype.getKeys=function(){var n=this;return void 0===this.keys&&(this.keys=new te(Object.keys(this.values).filter(function(e){return n.values[e]instanceof le}),Fe,"keys("+this.name+")",!0)),this.keys.slice()},t}();function Dt(t,n,e){void 0===n&&(n=""),void 0===e&&(e=Re);var r=t.$mobx;return r||(ye(t)||(n=(t.constructor.name||"ObservableObject")+"@"+F()),n||(n="ObservableObject@"+F()),Se(t,"$mobx",r=new or(t,n,e)),r)}var ar=Object.create(null),lr=Object.create(null);function dr(t){return t.$mobx||(pe(t),t.$mobx)}var Bi=oe("ObservableObjectAdministration",or);function j(t){return!!ut(t)&&(pe(t),Bi(t.$mobx))}function q(t,n){if("object"==typeof t&&null!==t){if(P(t))return void 0!==n&&f(!1),t.$mobx.atom;if(L(t))return t.$mobx;if(M(t)){var e=t;return void 0===n?q(e._keys):((r=e._data.get(n)||e._hasMap.get(n))||f(!1),r)}var r;if(pe(t),j(t))return n?((r=t.$mobx.values[n])||f(!1),r):f(!1);if(ht(t)||Ee(t)||ze(t))return t}else if("function"==typeof t&&ze(t.$mobx))return t.$mobx;return f(!1)}function ne(t,n){return t||f("Expecting some object"),void 0!==n?ne(q(t,n)):ht(t)||Ee(t)||ze(t)||M(t)||L(t)?t:(pe(t),t.$mobx?t.$mobx:void f(!1))}var ur=Object.prototype.toString;function Ct(t,n,e){return void 0===e&&(e=-1),Tt(t,n,e)}function Tt(t,n,e,r,i){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return!1;if(t!=t)return n!=n;var o=typeof t;if("function"!==o&&"object"!==o&&"object"!=typeof n)return!1;t=cr(t),n=cr(n);var a=ur.call(t);if(a!==ur.call(n))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(t)===Symbol.valueOf.call(n)}var l="[object Array]"===a;if(!l){if("object"!=typeof t||"object"!=typeof n)return!1;var c=t.constructor,p=n.constructor;if(c!==p&&!("function"==typeof c&&c instanceof c&&"function"==typeof p&&p instanceof p)&&"constructor"in t&&"constructor"in n)return!1}if(0===e)return!1;e<0&&(e=-1),i=i||[];for(var h=(r=r||[]).length;h--;)if(r[h]===t)return i[h]===n;if(r.push(t),i.push(n),l){if((h=t.length)!==n.length)return!1;for(;h--;)if(!Tt(t[h],n[h],e-1,r,i))return!1}else{var O=Object.keys(t),S=void 0;if(h=O.length,Object.keys(n).length!==h)return!1;for(;h--;)if(!ki(n,S=O[h])||!Tt(t[S],n[S],e-1,r,i))return!1}return r.pop(),i.pop(),!0}function cr(t){return P(t)?t.peek():be(t)||M(t)||Me(t)||L(t)?z(t.entries()):t}function ki(t,n){return Object.prototype.hasOwnProperty.call(t,n)}function Gi(t,n){1&t&&(s.TgZ(0,"span"),s._uU(1,"loading..."),s.qZA())}"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function ai(t){return d.spyListeners.push(t),dt(function(){d.spyListeners=d.spyListeners.filter(function(n){return n!==t})})},extras:{getDebugName:function Vi(t,n){return(void 0!==n?q(t,n):j(t)||M(t)||L(t)?ne(t):q(t)).name}},$mobx:"$mobx"});const Ui=function(t){return{$implicit:t}};function $i(t,n){if(1&t&&(s.ynx(0),s.TgZ(1,"div"),s.Hsn(2),s.qZA(),s.BQk()),2&t){const e=s.oxw();s.xp6(1),s.Udp("height",e.getTotalHeight())}}const Ce=function(){return{dontDetach:!0}},Ji=["*"],Yi=["loadingTemplate"],qi=["treeNodeTemplate"],Qi=["treeNodeWrapperTemplate"],Wi=["treeNodeFullTemplate"],Zi=["viewport"],Ki=function(t,n,e,r){return{loadingTemplate:t,treeNodeTemplate:n,treeNodeWrapperTemplate:e,treeNodeFullTemplate:r}};function zi(t,n){if(1&t&&s._UZ(0,"tree-node-collection",4),2&t){const e=s.oxw();s.Q6J("nodes",e.treeModel.roots)("treeModel",e.treeModel)("templates",s.l5B(3,Ki,e.loadingTemplate,e.treeNodeTemplate,e.treeNodeWrapperTemplate,e.treeNodeFullTemplate))}}function Xi(t,n){if(1&t&&s._UZ(0,"tree-node-drop-slot",5),2&t){const e=s.oxw();s.Q6J("dropIndex",0)("node",e.treeModel.virtualRoot)}}function eo(t,n){if(1&t&&s._UZ(0,"tree-node-drop-slot",6),2&t){const e=s.oxw(3);s.Q6J("dropIndex",e.node.index)("node",e.node.parent)}}function to(t,n){if(1&t&&(s.TgZ(0,"div"),s.YNc(1,eo,1,2,"tree-node-drop-slot",3),s._UZ(2,"tree-node-wrapper",4)(3,"tree-node-children",5)(4,"tree-node-drop-slot",6),s.qZA()),2&t){const e=s.oxw(2);s.Tol(e.node.getClass()),s.ekj("tree-node",!0)("tree-node-expanded",e.node.isExpanded&&e.node.hasChildren)("tree-node-collapsed",e.node.isCollapsed&&e.node.hasChildren)("tree-node-leaf",e.node.isLeaf)("tree-node-active",e.node.isActive)("tree-node-focused",e.node.isFocused),s.xp6(1),s.Q6J("ngIf",0===e.index),s.xp6(1),s.Q6J("node",e.node)("index",e.index)("templates",e.templates),s.xp6(1),s.Q6J("node",e.node)("templates",e.templates),s.xp6(1),s.Q6J("dropIndex",e.node.index+1)("node",e.node.parent)}}const pr=function(t,n,e,r){return{$implicit:t,node:n,index:e,templates:r}};function no(t,n){if(1&t&&(s.ynx(0),s.YNc(1,to,5,22,"div",1),s.GkF(2,2),s.BQk()),2&t){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",!e.templates.treeNodeFullTemplate),s.xp6(1),s.Q6J("ngTemplateOutlet",e.templates.treeNodeFullTemplate)("ngTemplateOutletContext",s.l5B(3,pr,e.node,e.node,e.index,e.templates))}}function ro(t,n){if(1&t&&(s.TgZ(0,"span"),s._uU(1),s.qZA()),2&t){const e=s.oxw();s.xp6(1),s.Oqu(e.node.displayField)}}const io=function(t,n,e){return{$implicit:t,node:n,index:e}};function oo(t,n){if(1&t){const e=s.EpF();s.TgZ(0,"span",3),s.NdJ("click",function(i){s.CHM(e);const o=s.oxw(2);return s.KtG(o.node.mouseAction("expanderClick",i))}),s._UZ(1,"span",4),s.qZA()}if(2&t){const e=s.oxw(2);s.ekj("toggle-children-wrapper-expanded",e.node.isExpanded)("toggle-children-wrapper-collapsed",e.node.isCollapsed)}}function so(t,n){1&t&&s._UZ(0,"span",5)}function ao(t,n){if(1&t&&(s.ynx(0),s.YNc(1,oo,2,4,"span",1),s.YNc(2,so,1,0,"span",2),s.BQk()),2&t){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.node.hasChildren),s.xp6(1),s.Q6J("ngIf",!e.node.hasChildren)}}function lo(t,n){if(1&t&&s._UZ(0,"tree-node-collection",4),2&t){const e=s.oxw(3);s.Q6J("nodes",e.node.children)("templates",e.templates)("treeModel",e.node.treeModel)}}function uo(t,n){if(1&t&&s._UZ(0,"tree-loading-component",5),2&t){const e=s.oxw(3);s.Udp("padding-left",e.node.getNodePadding()),s.Q6J("template",e.templates.loadingTemplate)("node",e.node)}}function co(t,n){if(1&t&&(s.TgZ(0,"div"),s.YNc(1,lo,1,3,"tree-node-collection",2),s.YNc(2,uo,1,4,"tree-loading-component",3),s.qZA()),2&t){const e=s.oxw(2);s.ekj("tree-children",!0)("tree-children-no-padding",e.node.options.levelPadding),s.xp6(1),s.Q6J("ngIf",e.node.children),s.xp6(1),s.Q6J("ngIf",!e.node.children)}}function fo(t,n){if(1&t&&(s.ynx(0),s.YNc(1,co,3,6,"div",1),s.BQk()),2&t){const e=s.oxw();s.xp6(1),s.Q6J("treeAnimateOpen",e.node.isExpanded)("treeAnimateOpenSpeed",e.node.options.animateSpeed)("treeAnimateOpenAcceleration",e.node.options.animateAcceleration)("treeAnimateOpenEnabled",e.node.options.animateExpand)}}function po(t,n){if(1&t&&s._UZ(0,"tree-node",2),2&t){const e=n.$implicit,r=n.index,i=s.oxw(2);s.Q6J("node",e)("index",r)("templates",i.templates)}}function ho(t,n){if(1&t&&(s.ynx(0),s.TgZ(1,"div"),s.YNc(2,po,1,3,"tree-node",1),s.qZA(),s.BQk()),2&t){const e=s.oxw();s.xp6(1),s.Udp("margin-top",e.marginTop),s.xp6(1),s.Q6J("ngForOf",e.viewportNodes)("ngForTrackBy",e.trackNode)}}function vo(t,n){if(1&t&&s._UZ(0,"tree-node-checkbox",4),2&t){const e=s.oxw(2);s.Q6J("node",e.node)}}function go(t,n){if(1&t){const e=s.EpF();s.TgZ(0,"div",2),s.YNc(1,vo,1,1,"tree-node-checkbox",3),s._UZ(2,"tree-node-expander",4),s.TgZ(3,"div",5),s.NdJ("click",function(i){s.CHM(e);const o=s.oxw();return s.KtG(o.node.mouseAction("click",i))})("dblclick",function(i){s.CHM(e);const o=s.oxw();return s.KtG(o.node.mouseAction("dblClick",i))})("mouseover",function(i){s.CHM(e);const o=s.oxw();return s.KtG(o.node.mouseAction("mouseOver",i))})("mouseout",function(i){s.CHM(e);const o=s.oxw();return s.KtG(o.node.mouseAction("mouseOut",i))})("contextmenu",function(i){s.CHM(e);const o=s.oxw();return s.KtG(o.node.mouseAction("contextMenu",i))})("treeDrop",function(i){s.CHM(e);const o=s.oxw();return s.KtG(o.node.onDrop(i))})("treeDropDragOver",function(i){s.CHM(e);const o=s.oxw();return s.KtG(o.node.mouseAction("dragOver",i))})("treeDropDragLeave",function(i){s.CHM(e);const o=s.oxw();return s.KtG(o.node.mouseAction("dragLeave",i))})("treeDropDragEnter",function(i){s.CHM(e);const o=s.oxw();return s.KtG(o.node.mouseAction("dragEnter",i))}),s._UZ(4,"tree-node-content",6),s.qZA()()}if(2&t){const e=s.oxw();s.Udp("padding-left",e.node.getNodePadding()),s.xp6(1),s.Q6J("ngIf",e.node.options.useCheckbox),s.xp6(1),s.Q6J("node",e.node),s.xp6(1),s.ekj("node-content-wrapper-active",e.node.isActive)("node-content-wrapper-focused",e.node.isFocused),s.Q6J("treeAllowDrop",e.node.allowDrop)("allowDragoverStyling",e.node.allowDragoverStyling())("treeDrag",e.node)("treeDragEnabled",e.node.allowDrag()),s.xp6(1),s.Q6J("node",e.node)("index",e.index)("template",e.templates.treeNodeTemplate)}}function mo(t,n){if(1&t){const e=s.EpF();s.ynx(0),s.TgZ(1,"input",1),s.NdJ("click",function(i){s.CHM(e);const o=s.oxw();return s.KtG(o.node.mouseAction("checkboxClick",i))}),s.qZA(),s.BQk()}if(2&t){const e=s.oxw();s.xp6(1),s.Q6J("checked",e.node.isSelected)("indeterminate",e.node.isPartiallySelected)}}let Te=(()=>{class t{constructor(e,r){this.templateRef=e,this.viewContainer=r,this.templateBindings={}}ngOnInit(){this.view=this.viewContainer.createEmbeddedView(this.templateRef),this.dispose&&this.dispose(),this.shouldDetach()&&this.view.detach(),this.autoDetect(this.view)}shouldDetach(){return this.treeMobxAutorun&&this.treeMobxAutorun.detach}autoDetect(e){this.dispose=je(()=>e.detectChanges())}ngOnDestroy(){this.dispose&&this.dispose()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.Rgc),s.Y36(s.s_b))},t.\u0275dir=s.lG2({type:t,selectors:[["","treeMobxAutorun",""]],inputs:{treeMobxAutorun:"treeMobxAutorun"}}),t})();const w={LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,SPACE:32,CONTEXT_MENU:32},D={TOGGLE_ACTIVE:(t,n,e)=>n&&n.toggleActivated(),TOGGLE_ACTIVE_MULTI:(t,n,e)=>n&&n.toggleActivated(!0),TOGGLE_SELECTED:(t,n,e)=>n&&n.toggleSelected(),ACTIVATE:(t,n,e)=>n.setIsActive(!0),DEACTIVATE:(t,n,e)=>n.setIsActive(!1),SELECT:(t,n,e)=>n.setIsSelected(!0),DESELECT:(t,n,e)=>n.setIsSelected(!1),FOCUS:(t,n,e)=>n.focus(),TOGGLE_EXPANDED:(t,n,e)=>n.hasChildren&&n.toggleExpanded(),EXPAND:(t,n,e)=>n.expand(),COLLAPSE:(t,n,e)=>n.collapse(),DRILL_DOWN:(t,n,e)=>t.focusDrillDown(),DRILL_UP:(t,n,e)=>t.focusDrillUp(),NEXT_NODE:(t,n,e)=>t.focusNextNode(),PREVIOUS_NODE:(t,n,e)=>t.focusPreviousNode(),MOVE_NODE:(t,n,e,{from:r,to:i})=>{e.ctrlKey?t.copyNode(r,i):t.moveNode(r,i)}},Ae={mouse:{click:D.TOGGLE_ACTIVE,dblClick:null,contextMenu:null,expanderClick:D.TOGGLE_EXPANDED,checkboxClick:D.TOGGLE_SELECTED,drop:D.MOVE_NODE},keys:{[w.RIGHT]:D.DRILL_DOWN,[w.LEFT]:D.DRILL_UP,[w.DOWN]:D.NEXT_NODE,[w.UP]:D.PREVIOUS_NODE,[w.SPACE]:D.TOGGLE_ACTIVE,[w.ENTER]:D.TOGGLE_ACTIVE}};class hr{constructor(n={}){var e,r,i,o,a,l,c,p,h,O,S,W,N,T,ie,ge,wt,St,Mt,It,Rt,Ft,Pt,Lt,jt,Bt,Vt,kt,Ht,Gt,Ut,$t,Jt,Yt,qt,Qt,Wt,Zt,Kt,zt,Xt,en,tn,nn,rn,on,sn,an,ln,dn,un,cn,fn,pn,hn,vn,gn,mn,yn,bn;this.options=n,this.actionMapping={mouse:{click:null!==(o=null===(i=null===(r=null===(e=this.options)||void 0===e?void 0:e.actionMapping)||void 0===r?void 0:r.mouse)||void 0===i?void 0:i.click)&&void 0!==o?o:Ae.mouse.click,dblClick:null!==(p=null===(c=null===(l=null===(a=this.options)||void 0===a?void 0:a.actionMapping)||void 0===l?void 0:l.mouse)||void 0===c?void 0:c.dblClick)&&void 0!==p?p:Ae.mouse.dblClick,contextMenu:null!==(W=null===(S=null===(O=null===(h=this.options)||void 0===h?void 0:h.actionMapping)||void 0===O?void 0:O.mouse)||void 0===S?void 0:S.contextMenu)&&void 0!==W?W:Ae.mouse.contextMenu,expanderClick:null!==(ge=null===(ie=null===(T=null===(N=this.options)||void 0===N?void 0:N.actionMapping)||void 0===T?void 0:T.mouse)||void 0===ie?void 0:ie.expanderClick)&&void 0!==ge?ge:Ae.mouse.expanderClick,checkboxClick:null!==(It=null===(Mt=null===(St=null===(wt=this.options)||void 0===wt?void 0:wt.actionMapping)||void 0===St?void 0:St.mouse)||void 0===Mt?void 0:Mt.checkboxClick)&&void 0!==It?It:Ae.mouse.checkboxClick,drop:null!==(Lt=null===(Pt=null===(Ft=null===(Rt=this.options)||void 0===Rt?void 0:Rt.actionMapping)||void 0===Ft?void 0:Ft.mouse)||void 0===Pt?void 0:Pt.drop)&&void 0!==Lt?Lt:Ae.mouse.drop,dragStart:null!==(kt=null===(Vt=null===(Bt=null===(jt=this.options)||void 0===jt?void 0:jt.actionMapping)||void 0===Bt?void 0:Bt.mouse)||void 0===Vt?void 0:Vt.dragStart)&&void 0!==kt?kt:void 0,drag:null!==($t=null===(Ut=null===(Gt=null===(Ht=this.options)||void 0===Ht?void 0:Ht.actionMapping)||void 0===Gt?void 0:Gt.mouse)||void 0===Ut?void 0:Ut.drag)&&void 0!==$t?$t:void 0,dragEnd:null!==(Qt=null===(qt=null===(Yt=null===(Jt=this.options)||void 0===Jt?void 0:Jt.actionMapping)||void 0===Yt?void 0:Yt.mouse)||void 0===qt?void 0:qt.dragEnd)&&void 0!==Qt?Qt:void 0,dragOver:null!==(zt=null===(Kt=null===(Zt=null===(Wt=this.options)||void 0===Wt?void 0:Wt.actionMapping)||void 0===Zt?void 0:Zt.mouse)||void 0===Kt?void 0:Kt.dragOver)&&void 0!==zt?zt:void 0,dragLeave:null!==(nn=null===(tn=null===(en=null===(Xt=this.options)||void 0===Xt?void 0:Xt.actionMapping)||void 0===en?void 0:en.mouse)||void 0===tn?void 0:tn.dragLeave)&&void 0!==nn?nn:void 0,dragEnter:null!==(an=null===(sn=null===(on=null===(rn=this.options)||void 0===rn?void 0:rn.actionMapping)||void 0===on?void 0:on.mouse)||void 0===sn?void 0:sn.dragEnter)&&void 0!==an?an:void 0,mouseOver:null!==(cn=null===(un=null===(dn=null===(ln=this.options)||void 0===ln?void 0:ln.actionMapping)||void 0===dn?void 0:dn.mouse)||void 0===un?void 0:un.mouseOver)&&void 0!==cn?cn:void 0,mouseOut:null!==(vn=null===(hn=null===(pn=null===(fn=this.options)||void 0===fn?void 0:fn.actionMapping)||void 0===pn?void 0:pn.mouse)||void 0===hn?void 0:hn.mouseOut)&&void 0!==vn?vn:void 0},keys:{[w.RIGHT]:D.DRILL_DOWN,[w.LEFT]:D.DRILL_UP,[w.DOWN]:D.NEXT_NODE,[w.UP]:D.PREVIOUS_NODE,[w.SPACE]:D.TOGGLE_ACTIVE,[w.ENTER]:D.TOGGLE_ACTIVE}},!(null===(mn=null===(gn=this.options)||void 0===gn?void 0:gn.actionMapping)||void 0===mn)&&mn.keys&&(this.actionMapping.keys=Object.assign(Object.assign({},this.actionMapping.keys),this.options.actionMapping.keys)),n.rtl&&(this.actionMapping.keys[w.RIGHT]=(null===(yn=n.actionMapping)||void 0===yn?void 0:yn.keys[w.RIGHT])||D.DRILL_UP,this.actionMapping.keys[w.LEFT]=(null===(bn=n.actionMapping)||void 0===bn?void 0:bn.keys[w.LEFT])||D.DRILL_DOWN)}get hasChildrenField(){return this.options.hasChildrenField||"hasChildren"}get childrenField(){return this.options.childrenField||"children"}get displayField(){return this.options.displayField||"name"}get idField(){return this.options.idField||"id"}get isExpandedField(){return this.options.isExpandedField||"isExpanded"}get getChildren(){return this.options.getChildren}get levelPadding(){return this.options.levelPadding||0}get useVirtualScroll(){return this.options.useVirtualScroll}get animateExpand(){return this.options.animateExpand}get animateSpeed(){return this.options.animateSpeed||1}get animateAcceleration(){return this.options.animateAcceleration||1.2}get scrollOnActivate(){return void 0===this.options.scrollOnActivate||this.options.scrollOnActivate}get rtl(){return!!this.options.rtl}get rootId(){return this.options.rootId}get useCheckbox(){return this.options.useCheckbox}get useTriState(){return void 0===this.options.useTriState||this.options.useTriState}get scrollContainer(){return this.options.scrollContainer}get allowDragoverStyling(){return void 0===this.options.allowDragoverStyling||this.options.allowDragoverStyling}getNodeClone(n){if(this.options.getNodeClone)return this.options.getNodeClone(n);const e=Object.assign({},n.data);return e.id&&delete e.id,e}allowDrop(n,e,r){return this.options.allowDrop instanceof Function?this.options.allowDrop(n,e,r):void 0===this.options.allowDrop||this.options.allowDrop}allowDrag(n){return this.options.allowDrag instanceof Function?this.options.allowDrag(n):this.options.allowDrag}nodeClass(n){return this.options.nodeClass?this.options.nodeClass(n):""}nodeHeight(n){if(n.data.virtual)return 0;let e=this.options.nodeHeight||22;return"function"==typeof e&&(e=e(n)),e+(0===n.index?2:1)*this.dropSlotHeight}get dropSlotHeight(){return"number"==typeof this.options.dropSlotHeight?this.options.dropSlotHeight:2}}const x={toggleExpanded:"toggleExpanded",activate:"activate",deactivate:"deactivate",nodeActivate:"nodeActivate",nodeDeactivate:"nodeDeactivate",select:"select",deselect:"deselect",focus:"focus",blur:"blur",initialized:"initialized",updateData:"updateData",moveNode:"moveNode",copyNode:"copyNode",event:"event",loadNodeChildren:"loadNodeChildren",changeFilter:"changeFilter",stateChange:"stateChange"};var I=function(t,n,e,r){var a,i=arguments.length,o=i<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,n,e,r);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(o=(i<3?a(o):i>3?a(n,e,o):a(n,e))||o);return i>3&&o&&Object.defineProperty(n,e,o),o},_=function(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)};let vr=(()=>{class t{constructor(e,r,i,o){this.data=e,this.parent=r,this.treeModel=i,this.position=0,this.allowDrop=(a,l)=>this.options.allowDrop(a,{parent:this,index:0},l),this.allowDragoverStyling=()=>this.options.allowDragoverStyling,null==this.id&&(this.id=function yo(){return Math.floor(1e13*Math.random())}()),this.index=o,this.getField("children")&&this._initChildren(),this.autoLoadChildren()}get isHidden(){return this.treeModel.isHidden(this)}get isExpanded(){return this.treeModel.isExpanded(this)}get isActive(){return this.treeModel.isActive(this)}get isFocused(){return this.treeModel.isNodeFocused(this)}get isSelected(){return this.isSelectable()?this.treeModel.isSelected(this):this.children.some(e=>e.isSelected)}get isAllSelected(){return this.isSelectable()?this.treeModel.isSelected(this):this.children.every(e=>e.isAllSelected)}get isPartiallySelected(){return this.isSelected&&!this.isAllSelected}get level(){return this.parent?this.parent.level+1:0}get path(){return this.parent?[...this.parent.path,this.id]:[]}get elementRef(){throw"Element Ref is no longer supported since introducing virtual scroll\n\n      You may use a template to obtain a reference to the element"}get originalNode(){return this._originalNode}get hasChildren(){return!!(this.getField("hasChildren")||this.children&&this.children.length>0)}get isCollapsed(){return!this.isExpanded}get isLeaf(){return!this.hasChildren}get isRoot(){return this.parent.data.virtual}get realParent(){return this.isRoot?null:this.parent}get options(){return this.treeModel.options}fireEvent(e){this.treeModel.fireEvent(e)}get displayField(){return this.getField("display")}get id(){return this.getField("id")}set id(e){this.setField("id",e)}getField(e){return this.data[this.options[`${e}Field`]]}setField(e,r){this.data[this.options[`${e}Field`]]=r}_findAdjacentSibling(e,r=!1){const i=this._getParentsChildren(r),o=i.indexOf(this);return i.length>o+e?i[o+e]:null}findNextSibling(e=!1){return this._findAdjacentSibling(1,e)}findPreviousSibling(e=!1){return this._findAdjacentSibling(-1,e)}getVisibleChildren(){return this.visibleChildren}get visibleChildren(){return(this.children||[]).filter(e=>!e.isHidden)}getFirstChild(e=!1){let r=e?this.visibleChildren:this.children;return null!=r&&r.length?r[0]:null}getLastChild(e=!1){let r=e?this.visibleChildren:this.children;return null!=r&&r.length?r[r.length-1]:null}findNextNode(e=!0,r=!1){return e&&this.isExpanded&&this.getFirstChild(r)||this.findNextSibling(r)||this.parent&&this.parent.findNextNode(!1,r)}findPreviousNode(e=!1){let r=this.findPreviousSibling(e);return r?r._getLastOpenDescendant(e):this.realParent}_getLastOpenDescendant(e=!1){const r=this.getLastChild(e);return this.isCollapsed||!r?this:r._getLastOpenDescendant(e)}_getParentsChildren(e=!1){return this.parent&&(e?this.parent.getVisibleChildren():this.parent.children)||[]}getIndexInParent(e=!1){return this._getParentsChildren(e).indexOf(this)}isDescendantOf(e){return this===e||this.parent&&this.parent.isDescendantOf(e)}getNodePadding(){return this.options.levelPadding*(this.level-1)+"px"}getClass(){return[this.options.nodeClass(this),`tree-node-level-${this.level}`].join(" ")}onDrop(e){this.mouseAction("drop",e.event,{from:e.element,to:{parent:this,index:0,dropOnNode:!0}})}allowDrag(){return this.options.allowDrag(this)}loadNodeChildren(){return this.options.getChildren?Promise.resolve(this.options.getChildren(this)).then(e=>{e&&(this.setField("children",e),this._initChildren(),this.options.useTriState&&this.treeModel.isSelected(this)&&this.setIsSelected(!0),this.children.forEach(r=>{r.getField("isExpanded")&&r.hasChildren&&r.expand()}))}).then(()=>{this.fireEvent({eventName:x.loadNodeChildren,node:this})}):Promise.resolve()}expand(){return this.isExpanded||this.toggleExpanded(),this}collapse(){return this.isExpanded&&this.toggleExpanded(),this}doForAll(e){Promise.resolve(e(this)).then(()=>{this.children&&this.children.forEach(r=>r.doForAll(e))})}expandAll(){this.doForAll(e=>e.expand())}collapseAll(){this.doForAll(e=>e.collapse())}ensureVisible(){return this.realParent&&(this.realParent.expand(),this.realParent.ensureVisible()),this}toggleExpanded(){return this.setIsExpanded(!this.isExpanded),this}setIsExpanded(e){return this.hasChildren&&this.treeModel.setExpandedNode(this,e),this}autoLoadChildren(){this.handler=Ne(()=>this.isExpanded,e=>{!this.children&&this.hasChildren&&e&&this.loadNodeChildren()},{fireImmediately:!0})}dispose(){this.children&&this.children.forEach(e=>e.dispose()),this.handler&&this.handler(),this.parent=null,this.children=null}setIsActive(e,r=!1){return this.treeModel.setActiveNode(this,e,r),e&&this.focus(this.options.scrollOnActivate),this}isSelectable(){return this.isLeaf||!this.children||!this.options.useTriState}setIsSelected(e){return this.isSelectable()?this.treeModel.setSelectedNode(this,e):this.visibleChildren.forEach(r=>r.setIsSelected(e)),this}toggleSelected(){return this.setIsSelected(!this.isSelected),this}toggleActivated(e=!1){return this.setIsActive(!this.isActive,e),this}setActiveAndVisible(e=!1){return this.setIsActive(!0,e).ensureVisible(),setTimeout(this.scrollIntoView.bind(this)),this}scrollIntoView(e=!1){this.treeModel.virtualScroll.scrollIntoView(this,e)}focus(e=!0){let r=this.treeModel.getFocusedNode();return this.treeModel.setFocusedNode(this),e&&this.scrollIntoView(),r&&this.fireEvent({eventName:x.blur,node:r}),this.fireEvent({eventName:x.focus,node:this}),this}blur(){let e=this.treeModel.getFocusedNode();return this.treeModel.setFocusedNode(null),e&&this.fireEvent({eventName:x.blur,node:this}),this}setIsHidden(e){this.treeModel.setIsHidden(this,e)}hide(){this.setIsHidden(!0)}show(){this.setIsHidden(!1)}mouseAction(e,r,i=null){this.treeModel.setFocus(!0);const a=this.options.actionMapping.mouse[e];a&&a(this.treeModel,this,r,i)}getSelfHeight(){return this.options.nodeHeight(this)}_initChildren(){this.children=this.getField("children").map((e,r)=>new t(e,this,this.treeModel,r))}}return I([E,_("design:type",Object),_("design:paramtypes",[])],t.prototype,"isHidden",null),I([E,_("design:type",Object),_("design:paramtypes",[])],t.prototype,"isExpanded",null),I([E,_("design:type",Object),_("design:paramtypes",[])],t.prototype,"isActive",null),I([E,_("design:type",Object),_("design:paramtypes",[])],t.prototype,"isFocused",null),I([E,_("design:type",Object),_("design:paramtypes",[])],t.prototype,"isSelected",null),I([E,_("design:type",Object),_("design:paramtypes",[])],t.prototype,"isAllSelected",null),I([E,_("design:type",Object),_("design:paramtypes",[])],t.prototype,"isPartiallySelected",null),I([m,_("design:type",Array)],t.prototype,"children",void 0),I([m,_("design:type",Number)],t.prototype,"index",void 0),I([m,_("design:type",Object)],t.prototype,"position",void 0),I([m,_("design:type",Number)],t.prototype,"height",void 0),I([E,_("design:type",Number),_("design:paramtypes",[])],t.prototype,"level",null),I([E,_("design:type",Array),_("design:paramtypes",[])],t.prototype,"path",null),I([E,_("design:type",Object),_("design:paramtypes",[])],t.prototype,"visibleChildren",null),I([v,_("design:type",Function),_("design:paramtypes",[Object]),_("design:returntype",void 0)],t.prototype,"setIsSelected",null),I([v,_("design:type",Function),_("design:paramtypes",[]),_("design:returntype",void 0)],t.prototype,"_initChildren",null),t})();var b=function(t,n,e,r){var a,i=arguments.length,o=i<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,n,e,r);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(o=(i<3?a(o):i>3?a(n,e,o):a(n,e))||o);return i>3&&o&&Object.defineProperty(n,e,o),o},u=function(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)};let g=(()=>{class t{constructor(){this.options=new hr,this.eventNames=Object.keys(x),this.expandedNodeIds={},this.selectedLeafNodeIds={},this.activeNodeIds={},this.hiddenNodeIds={},this.focusedNodeId=null,this.firstUpdate=!0,this.subscriptions=[]}fireEvent(e){e.treeModel=this,this.events[e.eventName].emit(e),this.events.event.emit(e)}subscribe(e,r){const i=this.events[e].subscribe(r);this.subscriptions.push(i)}getFocusedNode(){return this.focusedNode}getActiveNode(){return this.activeNodes[0]}getActiveNodes(){return this.activeNodes}getVisibleRoots(){return this.virtualRoot.visibleChildren}getFirstRoot(e=!1){const r=e?this.getVisibleRoots():this.roots;return null!=r&&r.length?r[0]:null}getLastRoot(e=!1){const r=e?this.getVisibleRoots():this.roots;return null!=r&&r.length?r[r.length-1]:null}get isFocused(){return t.focusedTree===this}isNodeFocused(e){return this.focusedNode===e}isEmptyTree(){return this.roots&&0===this.roots.length}get focusedNode(){return this.focusedNodeId?this.getNodeById(this.focusedNodeId):null}get expandedNodes(){return Object.keys(this.expandedNodeIds).filter(r=>this.expandedNodeIds[r]).map(r=>this.getNodeById(r)).filter(Boolean)}get activeNodes(){return Object.keys(this.activeNodeIds).filter(r=>this.activeNodeIds[r]).map(r=>this.getNodeById(r)).filter(Boolean)}get hiddenNodes(){return Object.keys(this.hiddenNodeIds).filter(r=>this.hiddenNodeIds[r]).map(r=>this.getNodeById(r)).filter(Boolean)}get selectedLeafNodes(){return Object.keys(this.selectedLeafNodeIds).filter(r=>this.selectedLeafNodeIds[r]).map(r=>this.getNodeById(r)).filter(Boolean)}getNodeByPath(e,r=null){if(!e)return null;if(r=r||this.virtualRoot,0===e.length)return r;if(!r.children)return null;const i=e.shift(),o=r.children.find(a=>a.id===i);return o?this.getNodeByPath(e,o):null}getNodeById(e){const r=e.toString();return this.getNodeBy(i=>i.id.toString()===r)}getNodeBy(e,r=null){if(!(r=r||this.virtualRoot).children)return null;const i=r.children.find(e);if(i)return i;for(let o of r.children){const a=this.getNodeBy(e,o);if(a)return a}}isExpanded(e){return this.expandedNodeIds[e.id]}isHidden(e){return this.hiddenNodeIds[e.id]}isActive(e){return this.activeNodeIds[e.id]}isSelected(e){return this.selectedLeafNodeIds[e.id]}ngOnDestroy(){this.dispose(),this.unsubscribeAll()}dispose(){this.virtualRoot&&this.virtualRoot.dispose()}unsubscribeAll(){this.subscriptions.forEach(e=>e.unsubscribe()),this.subscriptions=[]}setData({nodes:e,options:r=null,events:i=null}){r&&(this.options=new hr(r)),i&&(this.events=i),e&&(this.nodes=e),this.update()}update(){let e={id:this.options.rootId,virtual:!0,[this.options.childrenField]:this.nodes};this.dispose(),this.virtualRoot=new vr(e,null,this,0),this.roots=this.virtualRoot.children,this.firstUpdate?this.roots&&(this.firstUpdate=!1,this._calculateExpandedNodes()):this.fireEvent({eventName:x.updateData})}setFocusedNode(e){this.focusedNodeId=e?e.id:null}setFocus(e){t.focusedTree=e?this:null}doForAll(e){this.roots.forEach(r=>r.doForAll(e))}focusNextNode(){let e=this.getFocusedNode(),r=e?e.findNextNode(!0,!0):this.getFirstRoot(!0);r&&r.focus()}focusPreviousNode(){let e=this.getFocusedNode(),r=e?e.findPreviousNode(!0):this.getLastRoot(!0);r&&r.focus()}focusDrillDown(){let e=this.getFocusedNode();if(e&&e.isCollapsed&&e.hasChildren)e.toggleExpanded();else{let r=e?e.getFirstChild(!0):this.getFirstRoot(!0);r&&r.focus()}}focusDrillUp(){let e=this.getFocusedNode();if(e)if(e.isExpanded)e.toggleExpanded();else{let r=e.realParent;r&&r.focus()}}setActiveNode(e,r,i=!1){i?this._setActiveNodeMulti(e,r):this._setActiveNodeSingle(e,r),r?(e.focus(this.options.scrollOnActivate),this.fireEvent({eventName:x.activate,node:e}),this.fireEvent({eventName:x.nodeActivate,node:e})):(this.fireEvent({eventName:x.deactivate,node:e}),this.fireEvent({eventName:x.nodeDeactivate,node:e}))}setSelectedNode(e,r){this.selectedLeafNodeIds=Object.assign({},this.selectedLeafNodeIds,{[e.id]:r}),r?(e.focus(),this.fireEvent({eventName:x.select,node:e})):this.fireEvent({eventName:x.deselect,node:e})}setExpandedNode(e,r){this.expandedNodeIds=Object.assign({},this.expandedNodeIds,{[e.id]:r}),this.fireEvent({eventName:x.toggleExpanded,node:e,isExpanded:r})}expandAll(){this.roots.forEach(e=>e.expandAll())}collapseAll(){this.roots.forEach(e=>e.collapseAll())}setIsHidden(e,r){this.hiddenNodeIds=Object.assign({},this.hiddenNodeIds,{[e.id]:r})}setHiddenNodeIds(e){this.hiddenNodeIds=e.reduce((r,i)=>Object.assign(r,{[i]:!0}),{})}performKeyAction(e,r){const i=this.options.actionMapping.keys[r.keyCode];return!!i&&(r.preventDefault(),i(this,e,r),!0)}filterNodes(e,r=!0){let i;if(!e)return this.clearFilter();if(e&&"string"==typeof e.valueOf())i=a=>-1!==a.displayField.toLowerCase().indexOf(e.toLowerCase());else{if(!e||"function"!=typeof e)return console.error("Don't know what to do with filter",e),void console.error("Should be either a string or function");i=e}const o={};this.roots.forEach(a=>this._filterNode(o,a,i,r)),this.hiddenNodeIds=o,this.fireEvent({eventName:x.changeFilter})}clearFilter(){this.hiddenNodeIds={},this.fireEvent({eventName:x.changeFilter})}moveNode(e,r){const i=e.getIndexInParent(),o=e.parent;if(!this.canMoveNode(e,r,i))return;const a=o.getField("children");r.parent.getField("children")||r.parent.setField("children",[]);const l=r.parent.getField("children"),c=a.splice(i,1)[0];let p=o===r.parent&&r.index>i?r.index-1:r.index;l.splice(p,0,c),o.treeModel.update(),r.parent.treeModel!==o.treeModel&&r.parent.treeModel.update(),this.fireEvent({eventName:x.moveNode,node:c,to:{parent:r.parent.data,index:p},from:{parent:o.data,index:i}})}copyNode(e,r){const i=e.getIndexInParent();if(!this.canMoveNode(e,r,i))return;r.parent.getField("children")||r.parent.setField("children",[]);const o=r.parent.getField("children"),a=this.options.getNodeClone(e);o.splice(r.index,0,a),e.treeModel.update(),r.parent.treeModel!==e.treeModel&&r.parent.treeModel.update(),this.fireEvent({eventName:x.copyNode,node:a,to:{parent:r.parent.data,index:r.index}})}getState(){return{expandedNodeIds:this.expandedNodeIds,selectedLeafNodeIds:this.selectedLeafNodeIds,activeNodeIds:this.activeNodeIds,hiddenNodeIds:this.hiddenNodeIds,focusedNodeId:this.focusedNodeId}}setState(e){!e||Object.assign(this,{expandedNodeIds:e.expandedNodeIds||{},selectedLeafNodeIds:e.selectedLeafNodeIds||{},activeNodeIds:e.activeNodeIds||{},hiddenNodeIds:e.hiddenNodeIds||{},focusedNodeId:e.focusedNodeId})}subscribeToState(e){je(()=>e(this.getState()))}canMoveNode(e,r,i){return i||e.getIndexInParent(),(e.parent!==r.parent||i!==r.index)&&!r.parent.isDescendantOf(e)}calculateExpandedNodes(){this._calculateExpandedNodes()}_filterNode(e,r,i,o){let a=i(r);return r.children&&r.children.forEach(l=>{this._filterNode(e,l,i,o)&&(a=!0)}),a||(e[r.id]=!0),o&&a&&r.ensureVisible(),a}_calculateExpandedNodes(e=null){(e=e||this.virtualRoot).data[this.options.isExpandedField]&&(this.expandedNodeIds=Object.assign({},this.expandedNodeIds,{[e.id]:!0})),e.children&&e.children.forEach(r=>this._calculateExpandedNodes(r))}_setActiveNodeSingle(e,r){this.activeNodes.filter(i=>i!==e).forEach(i=>{this.fireEvent({eventName:x.deactivate,node:i}),this.fireEvent({eventName:x.nodeDeactivate,node:i})}),this.activeNodeIds=r?{[e.id]:!0}:{}}_setActiveNodeMulti(e,r){this.activeNodeIds=Object.assign({},this.activeNodeIds,{[e.id]:r})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t.focusedTree=null,t})();b([m,u("design:type",Array)],g.prototype,"roots",void 0),b([m,u("design:type",Object)],g.prototype,"expandedNodeIds",void 0),b([m,u("design:type",Object)],g.prototype,"selectedLeafNodeIds",void 0),b([m,u("design:type",Object)],g.prototype,"activeNodeIds",void 0),b([m,u("design:type",Object)],g.prototype,"hiddenNodeIds",void 0),b([m,u("design:type",Object)],g.prototype,"focusedNodeId",void 0),b([m,u("design:type",vr)],g.prototype,"virtualRoot",void 0),b([E,u("design:type",Object),u("design:paramtypes",[])],g.prototype,"focusedNode",null),b([E,u("design:type",Object),u("design:paramtypes",[])],g.prototype,"expandedNodes",null),b([E,u("design:type",Object),u("design:paramtypes",[])],g.prototype,"activeNodes",null),b([E,u("design:type",Object),u("design:paramtypes",[])],g.prototype,"hiddenNodes",null),b([E,u("design:type",Object),u("design:paramtypes",[])],g.prototype,"selectedLeafNodes",null),b([v,u("design:type",Function),u("design:paramtypes",[Object]),u("design:returntype",void 0)],g.prototype,"setData",null),b([v,u("design:type",Function),u("design:paramtypes",[]),u("design:returntype",void 0)],g.prototype,"update",null),b([v,u("design:type",Function),u("design:paramtypes",[Object]),u("design:returntype",void 0)],g.prototype,"setFocusedNode",null),b([v,u("design:type",Function),u("design:paramtypes",[Object]),u("design:returntype",void 0)],g.prototype,"setFocus",null),b([v,u("design:type",Function),u("design:paramtypes",[Object]),u("design:returntype",void 0)],g.prototype,"doForAll",null),b([v,u("design:type",Function),u("design:paramtypes",[]),u("design:returntype",void 0)],g.prototype,"focusNextNode",null),b([v,u("design:type",Function),u("design:paramtypes",[]),u("design:returntype",void 0)],g.prototype,"focusPreviousNode",null),b([v,u("design:type",Function),u("design:paramtypes",[]),u("design:returntype",void 0)],g.prototype,"focusDrillDown",null),b([v,u("design:type",Function),u("design:paramtypes",[]),u("design:returntype",void 0)],g.prototype,"focusDrillUp",null),b([v,u("design:type",Function),u("design:paramtypes",[Object,Object,Object]),u("design:returntype",void 0)],g.prototype,"setActiveNode",null),b([v,u("design:type",Function),u("design:paramtypes",[Object,Object]),u("design:returntype",void 0)],g.prototype,"setSelectedNode",null),b([v,u("design:type",Function),u("design:paramtypes",[Object,Object]),u("design:returntype",void 0)],g.prototype,"setExpandedNode",null),b([v,u("design:type",Function),u("design:paramtypes",[]),u("design:returntype",void 0)],g.prototype,"expandAll",null),b([v,u("design:type",Function),u("design:paramtypes",[]),u("design:returntype",void 0)],g.prototype,"collapseAll",null),b([v,u("design:type",Function),u("design:paramtypes",[Object,Object]),u("design:returntype",void 0)],g.prototype,"setIsHidden",null),b([v,u("design:type",Function),u("design:paramtypes",[Object]),u("design:returntype",void 0)],g.prototype,"setHiddenNodeIds",null),b([v,u("design:type",Function),u("design:paramtypes",[Object,Object]),u("design:returntype",void 0)],g.prototype,"filterNodes",null),b([v,u("design:type",Function),u("design:paramtypes",[]),u("design:returntype",void 0)],g.prototype,"clearFilter",null),b([v,u("design:type",Function),u("design:paramtypes",[Object,Object]),u("design:returntype",void 0)],g.prototype,"moveNode",null),b([v,u("design:type",Function),u("design:paramtypes",[Object,Object]),u("design:returntype",void 0)],g.prototype,"copyNode",null),b([v,u("design:type",Function),u("design:paramtypes",[Object]),u("design:returntype",void 0)],g.prototype,"setState",null);let At=(()=>{class t{constructor(){this._draggedElement=null}set(e){this._draggedElement=e}get(){return this._draggedElement}isDragging(){return!!this.get()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,s.Yz7)({factory:function(){return new t},token:t,providedIn:"root"}),t})();var re=function(t,n,e,r){var a,i=arguments.length,o=i<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,n,e,r);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(o=(i<3?a(o):i>3?a(n,e,o):a(n,e))||o);return i>3&&o&&Object.defineProperty(n,e,o),o},C=function(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)};let Q=(()=>{class t{constructor(e){this.treeModel=e,this.yBlocks=0,this.x=0,this.viewportHeight=null,this.viewport=null,e.virtualScroll=this,this._dispose=[je(()=>this.fixScroll())]}get y(){return 150*this.yBlocks}get totalHeight(){return this.treeModel.virtualRoot?this.treeModel.virtualRoot.height:0}fireEvent(e){this.treeModel.fireEvent(e)}init(){const e=this.recalcPositions.bind(this);e(),this._dispose=[...this._dispose,Ne(()=>this.treeModel.roots,e),Ne(()=>this.treeModel.expandedNodeIds,e),Ne(()=>this.treeModel.hiddenNodeIds,e)],this.treeModel.subscribe(x.loadNodeChildren,e)}isEnabled(){return this.treeModel.options.useVirtualScroll}_setYBlocks(e){this.yBlocks=e}recalcPositions(){this.treeModel.virtualRoot.height=this._getPositionAfter(this.treeModel.getVisibleRoots(),0)}_getPositionAfter(e,r){let i=r;return e.forEach(o=>{o.position=i,i=this._getPositionAfterNode(o,i)}),i}_getPositionAfterNode(e,r){let i=e.getSelfHeight()+r;return e.children&&e.isExpanded&&(i=this._getPositionAfter(e.visibleChildren,i)),e.height=i-r,i}clear(){this._dispose.forEach(e=>e())}setViewport(e){Object.assign(this,{viewport:e,x:e.scrollLeft,yBlocks:Math.round(e.scrollTop/150),viewportHeight:e.getBoundingClientRect?e.getBoundingClientRect().height:0})}scrollIntoView(e,r,i=!0){if(e.options.scrollContainer){const o=e.options.scrollContainer,a=o.getBoundingClientRect().height,l=o.getBoundingClientRect().top,c=this.viewport.getBoundingClientRect().top+e.position-l;(r||c<o.scrollTop||c+e.getSelfHeight()>o.scrollTop+a)&&(o.scrollTop=i?c-a/2:c)}else(r||e.position<this.y||e.position+e.getSelfHeight()>this.y+this.viewportHeight)&&this.viewport&&(this.viewport.scrollTop=i?e.position-this.viewportHeight/2:e.position,this._setYBlocks(Math.floor(this.viewport.scrollTop/150)))}getViewportNodes(e){if(!e)return[];const r=e.filter(c=>!c.isHidden);if(!this.isEnabled())return r;if(!this.viewportHeight||!r.length)return[];const i=r.slice(-1)[0];if(!i.height&&0===i.position)return[];const o=mr(r,c=>c.position+500>this.y||c.position+c.height>this.y),a=mr(r,c=>c.position-500>this.y+this.viewportHeight,o),l=[];for(let c=o;c<=a;c++)l.push(r[c]);return l}fixScroll(){const e=Math.max(0,this.totalHeight-this.viewportHeight);this.y<0&&this._setYBlocks(0),this.y>e&&this._setYBlocks(e/150)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(g))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})();function mr(t,n,e=0){let r=e,i=t.length-1;for(;r!==i;){let o=Math.floor((r+i)/2);n(t[o])?i=o:r=r===o?i:o}return r}re([m,C("design:type",Object)],Q.prototype,"yBlocks",void 0),re([m,C("design:type",Object)],Q.prototype,"x",void 0),re([m,C("design:type",Object)],Q.prototype,"viewportHeight",void 0),re([E,C("design:type",Object),C("design:paramtypes",[])],Q.prototype,"y",null),re([E,C("design:type",Object),C("design:paramtypes",[])],Q.prototype,"totalHeight",null),re([v,C("design:type",Function),C("design:paramtypes",[Object]),C("design:returntype",void 0)],Q.prototype,"_setYBlocks",null),re([v,C("design:type",Function),C("design:paramtypes",[]),C("design:returntype",void 0)],Q.prototype,"recalcPositions",null),re([v,C("design:type",Function),C("design:paramtypes",[Object]),C("design:returntype",void 0)],Q.prototype,"setViewport",null),re([v,C("design:type",Function),C("design:paramtypes",[Object,Object,Object]),C("design:returntype",void 0)],Q.prototype,"scrollIntoView",null);let bo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["tree-loading-component"]],inputs:{template:"template",node:"node"},decls:2,vars:5,consts:[[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,r){1&e&&(s.YNc(0,Gi,2,0,"span",0),s.GkF(1,1)),2&e&&(s.Q6J("ngIf",!r.template),s.xp6(1),s.Q6J("ngTemplateOutlet",r.template)("ngTemplateOutletContext",s.VKq(3,Ui,r.node)))},dependencies:[B.O5,B.tP],encapsulation:2}),t})(),_o=(()=>{class t{constructor(e,r){this.elementRef=e,this.virtualScroll=r,this.setViewport=this.throttle(()=>{this.virtualScroll.setViewport(this.elementRef.nativeElement)},17),this.scrollEventHandler=this.setViewport.bind(this)}ngOnInit(){this.virtualScroll.init()}ngAfterViewInit(){setTimeout(()=>{this.setViewport(),this.virtualScroll.fireEvent({eventName:x.initialized})}),this.elementRef.nativeElement.addEventListener("scroll",this.scrollEventHandler)}ngOnDestroy(){this.virtualScroll.clear(),this.elementRef.nativeElement.removeEventListener("scroll",this.scrollEventHandler)}getTotalHeight(){return this.virtualScroll.isEnabled()&&this.virtualScroll.totalHeight+"px"||"auto"}throttle(e,r){let i=0;return function(){let o=Date.now();o-i>=r&&(e(),i=o)}}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(Q))},t.\u0275cmp=s.Xpm({type:t,selectors:[["tree-viewport"]],features:[s._Bn([Q])],ngContentSelectors:Ji,decls:1,vars:2,consts:[[4,"treeMobxAutorun"]],template:function(e,r){1&e&&(s.F$t(),s.YNc(0,$i,3,2,"ng-container",0)),2&e&&s.Q6J("treeMobxAutorun",s.DdM(1,Ce))},dependencies:[Te],encapsulation:2}),t})(),Oo=(()=>{class t{constructor(e,r){this.treeModel=e,this.treeDraggedElement=r,e.eventNames.forEach(i=>this[i]=new s.vpe),e.subscribeToState(i=>this.stateChange.emit(i))}set nodes(e){}set options(e){}set focused(e){this.treeModel.setFocus(e)}set state(e){this.treeModel.setState(e)}onKeydown(e){if(!this.treeModel.isFocused||["input","textarea"].includes(document.activeElement.tagName.toLowerCase()))return;const r=this.treeModel.getFocusedNode();this.treeModel.performKeyAction(r,e)}onMousedown(e){(function r(i,o){return!i||i.localName!==o&&r(i.parentElement,o)})(e.target,"tree-root")&&this.treeModel.setFocus(!1)}ngOnChanges(e){(e.options||e.nodes)&&this.treeModel.setData({options:e.options&&e.options.currentValue,nodes:e.nodes&&e.nodes.currentValue,events:this.pick(this,this.treeModel.eventNames)})}sizeChanged(){this.viewportComponent.setViewport()}pick(e,r){return r.reduce((i,o)=>(e&&e.hasOwnProperty(o)&&(i[o]=e[o]),i),{})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(g),s.Y36(At))},t.\u0275cmp=s.Xpm({type:t,selectors:[["Tree"],["tree-root"]],contentQueries:function(e,r,i){if(1&e&&(s.Suo(i,Yi,5),s.Suo(i,qi,5),s.Suo(i,Qi,5),s.Suo(i,Wi,5)),2&e){let o;s.iGM(o=s.CRH())&&(r.loadingTemplate=o.first),s.iGM(o=s.CRH())&&(r.treeNodeTemplate=o.first),s.iGM(o=s.CRH())&&(r.treeNodeWrapperTemplate=o.first),s.iGM(o=s.CRH())&&(r.treeNodeFullTemplate=o.first)}},viewQuery:function(e,r){if(1&e&&s.Gf(Zi,5),2&e){let i;s.iGM(i=s.CRH())&&(r.viewportComponent=i.first)}},hostBindings:function(e,r){1&e&&s.NdJ("keydown",function(o){return r.onKeydown(o)},!1,s.pYS)("mousedown",function(o){return r.onMousedown(o)},!1,s.pYS)},inputs:{nodes:"nodes",options:"options",focused:"focused",state:"state"},outputs:{toggleExpanded:"toggleExpanded",activate:"activate",deactivate:"deactivate",nodeActivate:"nodeActivate",nodeDeactivate:"nodeDeactivate",select:"select",deselect:"deselect",focus:"focus",blur:"blur",updateData:"updateData",initialized:"initialized",moveNode:"moveNode",copyNode:"copyNode",loadNodeChildren:"loadNodeChildren",changeFilter:"changeFilter",event:"event",stateChange:"stateChange"},features:[s._Bn([g]),s.TTD],decls:5,vars:6,consts:[["viewport",""],[1,"angular-tree-component"],[3,"nodes","treeModel","templates",4,"ngIf"],["class","empty-tree-drop-slot",3,"dropIndex","node",4,"ngIf"],[3,"nodes","treeModel","templates"],[1,"empty-tree-drop-slot",3,"dropIndex","node"]],template:function(e,r){1&e&&(s.TgZ(0,"tree-viewport",null,0)(2,"div",1),s.YNc(3,zi,1,8,"tree-node-collection",2),s.YNc(4,Xi,1,2,"tree-node-drop-slot",3),s.qZA()()),2&e&&(s.xp6(2),s.ekj("node-dragging",r.treeDraggedElement.isDragging())("angular-tree-component-rtl",r.treeModel.options.rtl),s.xp6(1),s.Q6J("ngIf",r.treeModel.roots),s.xp6(1),s.Q6J("ngIf",r.treeModel.isEmptyTree()))},dependencies:function(){return[B.O5,yr,we,_o]},encapsulation:2}),t})(),xo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["TreeNode"],["tree-node"]],inputs:{node:"node",index:"index",templates:"templates"},decls:1,vars:2,consts:[[4,"treeMobxAutorun"],[3,"class","tree-node","tree-node-expanded","tree-node-collapsed","tree-node-leaf","tree-node-active","tree-node-focused",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"dropIndex","node",4,"ngIf"],[3,"node","index","templates"],[3,"node","templates"],[3,"dropIndex","node"]],template:function(e,r){1&e&&s.YNc(0,no,3,8,"ng-container",0),2&e&&s.Q6J("treeMobxAutorun",s.DdM(1,Ce))},dependencies:function(){return[B.O5,B.tP,Do,yr,Mo,Te]},encapsulation:2}),t})(),Eo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["tree-node-content"]],inputs:{node:"node",index:"index",template:"template"},decls:2,vars:7,consts:[[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,r){1&e&&(s.YNc(0,ro,2,1,"span",0),s.GkF(1,1)),2&e&&(s.Q6J("ngIf",!r.template),s.xp6(1),s.Q6J("ngTemplateOutlet",r.template)("ngTemplateOutletContext",s.kEZ(3,io,r.node,r.node,r.index)))},dependencies:[B.O5,B.tP],encapsulation:2}),t})(),yr=(()=>{class t{onDrop(e){this.node.mouseAction("drop",e.event,{from:e.element,to:{parent:this.node,index:this.dropIndex}})}allowDrop(e,r){return this.node.options.allowDrop(e,{parent:this.node,index:this.dropIndex},r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["TreeNodeDropSlot"],["tree-node-drop-slot"]],inputs:{node:"node",dropIndex:"dropIndex"},decls:1,vars:2,consts:[[1,"node-drop-slot",3,"treeAllowDrop","allowDragoverStyling","treeDrop"]],template:function(e,r){1&e&&(s.TgZ(0,"div",0),s.NdJ("treeDrop",function(o){return r.onDrop(o)}),s.qZA()),2&e&&s.Q6J("treeAllowDrop",r.allowDrop.bind(r))("allowDragoverStyling",!0)},dependencies:function(){return[xr]},encapsulation:2}),t})(),No=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["tree-node-expander"]],inputs:{node:"node"},decls:1,vars:2,consts:[[4,"treeMobxAutorun"],["class","toggle-children-wrapper",3,"toggle-children-wrapper-expanded","toggle-children-wrapper-collapsed","click",4,"ngIf"],["class","toggle-children-placeholder",4,"ngIf"],[1,"toggle-children-wrapper",3,"click"],[1,"toggle-children"],[1,"toggle-children-placeholder"]],template:function(e,r){1&e&&s.YNc(0,ao,3,2,"ng-container",0),2&e&&s.Q6J("treeMobxAutorun",s.DdM(1,Ce))},dependencies:[B.O5,Te],encapsulation:2}),t})(),Do=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["tree-node-children"]],inputs:{node:"node",templates:"templates"},decls:1,vars:2,consts:[[4,"treeMobxAutorun"],[3,"tree-children","tree-children-no-padding",4,"treeAnimateOpen","treeAnimateOpenSpeed","treeAnimateOpenAcceleration","treeAnimateOpenEnabled"],[3,"nodes","templates","treeModel",4,"ngIf"],["class","tree-node-loading",3,"padding-left","template","node",4,"ngIf"],[3,"nodes","templates","treeModel"],[1,"tree-node-loading",3,"template","node"]],template:function(e,r){1&e&&s.YNc(0,fo,2,4,"ng-container",0),2&e&&s.Q6J("treeMobxAutorun",s.DdM(1,Ce))},dependencies:function(){return[B.O5,bo,we,Fo,Te]},encapsulation:2}),t})();const To=Object.assign(function Co(...t){return v(...t)},v),wo=Object.assign(function Ao(...t){return E(...t)},E),br=Object.assign(function So(...t){return m(...t)},m);var it=function(t,n,e,r){var a,i=arguments.length,o=i<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,n,e,r);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(o=(i<3?a(o):i>3?a(n,e,o):a(n,e))||o);return i>3&&o&&Object.defineProperty(n,e,o),o},ve=function(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)};let we=(()=>{class t{constructor(){this._dispose=[]}get nodes(){return this._nodes}set nodes(e){this.setNodes(e)}get marginTop(){const e=this.viewportNodes&&this.viewportNodes.length&&this.viewportNodes[0];return(e&&e.parent?e.position-e.parent.position-e.parent.getSelfHeight():0)+"px"}setNodes(e){this._nodes=e}ngOnInit(){this.virtualScroll=this.treeModel.virtualScroll,this._dispose=[Ne(()=>this.virtualScroll.getViewportNodes(this.nodes).map(e=>e.index),e=>{this.viewportNodes=e.map(r=>this.nodes[r])},{compareStructural:!0,fireImmediately:!0}),Ne(()=>this.nodes,e=>{this.viewportNodes=this.virtualScroll.getViewportNodes(e)})]}ngOnDestroy(){this._dispose.forEach(e=>e())}trackNode(e,r){return r.id}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["tree-node-collection"]],inputs:{nodes:"nodes",treeModel:"treeModel",templates:"templates"},decls:1,vars:2,consts:[[4,"treeMobxAutorun"],[3,"node","index","templates",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","index","templates"]],template:function(e,r){1&e&&s.YNc(0,ho,3,4,"ng-container",0),2&e&&s.Q6J("treeMobxAutorun",s.DdM(1,Ce))},dependencies:[B.sg,xo,Te],encapsulation:2}),t})();it([br,ve("design:type",Object)],we.prototype,"_nodes",void 0),it([br,ve("design:type",Array)],we.prototype,"viewportNodes",void 0),it([wo,ve("design:type",String),ve("design:paramtypes",[])],we.prototype,"marginTop",null),it([To,ve("design:type",Function),ve("design:paramtypes",[Object]),ve("design:returntype",void 0)],we.prototype,"setNodes",null);let Mo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["tree-node-wrapper"]],inputs:{node:"node",index:"index",templates:"templates"},decls:2,vars:8,consts:[["class","node-wrapper",3,"padding-left",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"node-wrapper"],[3,"node",4,"ngIf"],[3,"node"],[1,"node-content-wrapper",3,"treeAllowDrop","allowDragoverStyling","treeDrag","treeDragEnabled","click","dblclick","mouseover","mouseout","contextmenu","treeDrop","treeDropDragOver","treeDropDragLeave","treeDropDragEnter"],[3,"node","index","template"]],template:function(e,r){1&e&&(s.YNc(0,go,5,15,"div",0),s.GkF(1,1)),2&e&&(s.Q6J("ngIf",!r.templates.treeNodeWrapperTemplate),s.xp6(1),s.Q6J("ngTemplateOutlet",r.templates.treeNodeWrapperTemplate)("ngTemplateOutletContext",s.l5B(3,pr,r.node,r.node,r.index,r.templates)))},dependencies:function(){return[B.O5,B.tP,Eo,xr,Ro,No,Io]},encapsulation:2}),t})(),Io=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["tree-node-checkbox"]],inputs:{node:"node"},decls:1,vars:2,consts:[[4,"treeMobxAutorun"],["type","checkbox",1,"tree-node-checkbox",3,"checked","indeterminate","click"]],template:function(e,r){1&e&&s.YNc(0,mo,2,2,"ng-container",0),2&e&&s.Q6J("treeMobxAutorun",s.DdM(1,Ce))},dependencies:[Te],encapsulation:2}),t})();const _r="is-dragging-over",Or="is-dragging-over-disabled";let xr=(()=>{class t{constructor(e,r,i,o){this.el=e,this.renderer=r,this.treeDraggedElement=i,this.ngZone=o,this.allowDragoverStyling=!0,this.onDropCallback=new s.vpe,this.onDragOverCallback=new s.vpe,this.onDragLeaveCallback=new s.vpe,this.onDragEnterCallback=new s.vpe,this._allowDrop=(a,l)=>!0,this.dragOverEventHandler=this.onDragOver.bind(this),this.dragEnterEventHandler=this.onDragEnter.bind(this),this.dragLeaveEventHandler=this.onDragLeave.bind(this)}set treeAllowDrop(e){this._allowDrop=e instanceof Function?e:(r,i)=>e}allowDrop(e){return this._allowDrop(this.treeDraggedElement.get(),e)}ngAfterViewInit(){let e=this.el.nativeElement;this.ngZone.runOutsideAngular(()=>{e.addEventListener("dragover",this.dragOverEventHandler),e.addEventListener("dragenter",this.dragEnterEventHandler),e.addEventListener("dragleave",this.dragLeaveEventHandler)})}ngOnDestroy(){let e=this.el.nativeElement;e.removeEventListener("dragover",this.dragOverEventHandler),e.removeEventListener("dragenter",this.dragEnterEventHandler),e.removeEventListener("dragleave",this.dragLeaveEventHandler)}onDragOver(e){if(!this.allowDrop(e))return this.allowDragoverStyling?this.addDisabledClass():void 0;this.onDragOverCallback.emit({event:e,element:this.treeDraggedElement.get()}),e.preventDefault(),this.allowDragoverStyling&&this.addClass()}onDragEnter(e){!this.allowDrop(e)||(e.preventDefault(),this.onDragEnterCallback.emit({event:e,element:this.treeDraggedElement.get()}))}onDragLeave(e){if(!this.allowDrop(e))return this.allowDragoverStyling?this.removeDisabledClass():void 0;this.onDragLeaveCallback.emit({event:e,element:this.treeDraggedElement.get()}),this.allowDragoverStyling&&this.removeClass()}onDrop(e){!this.allowDrop(e)||(e.preventDefault(),this.onDropCallback.emit({event:e,element:this.treeDraggedElement.get()}),this.allowDragoverStyling&&this.removeClass(),this.treeDraggedElement.set(null))}addClass(){this.renderer.addClass(this.el.nativeElement,_r)}removeClass(){this.renderer.removeClass(this.el.nativeElement,_r)}addDisabledClass(){this.renderer.addClass(this.el.nativeElement,Or)}removeDisabledClass(){this.renderer.removeClass(this.el.nativeElement,Or)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(At),s.Y36(s.R0b))},t.\u0275dir=s.lG2({type:t,selectors:[["","treeDrop",""]],hostBindings:function(e,r){1&e&&s.NdJ("drop",function(o){return r.onDrop(o)})},inputs:{allowDragoverStyling:"allowDragoverStyling",treeAllowDrop:"treeAllowDrop"},outputs:{onDropCallback:"treeDrop",onDragOverCallback:"treeDropDragOver",onDragLeaveCallback:"treeDropDragLeave",onDragEnterCallback:"treeDropDragEnter"}}),t})(),Ro=(()=>{class t{constructor(e,r,i,o){this.el=e,this.renderer=r,this.treeDraggedElement=i,this.ngZone=o,this.dragEventHandler=this.onDrag.bind(this)}ngAfterViewInit(){let e=this.el.nativeElement;this.ngZone.runOutsideAngular(()=>{e.addEventListener("drag",this.dragEventHandler)})}ngDoCheck(){this.renderer.setAttribute(this.el.nativeElement,"draggable",this.treeDragEnabled?"true":"false")}ngOnDestroy(){this.el.nativeElement.removeEventListener("drag",this.dragEventHandler)}onDragStart(e){e.dataTransfer.setData("text",e.target.id),this.treeDraggedElement.set(this.draggedElement),this.draggedElement.mouseAction&&this.draggedElement.mouseAction("dragStart",e)}onDrag(e){this.draggedElement.mouseAction&&this.draggedElement.mouseAction("drag",e)}onDragEnd(){this.draggedElement.mouseAction&&this.draggedElement.mouseAction("dragEnd"),this.treeDraggedElement.set(null)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(At),s.Y36(s.R0b))},t.\u0275dir=s.lG2({type:t,selectors:[["","treeDrag",""]],hostBindings:function(e,r){1&e&&s.NdJ("dragstart",function(o){return r.onDragStart(o)})("dragend",function(){return r.onDragEnd()})},inputs:{draggedElement:["treeDrag","draggedElement"],treeDragEnabled:"treeDragEnabled"}}),t})(),Fo=(()=>{class t{constructor(e,r,i){this.renderer=e,this.templateRef=r,this.viewContainerRef=i}set isOpen(e){e?(this._show(),this.isEnabled&&!1===this._isOpen&&this._animateOpen()):this.isEnabled?this._animateClose():this._hide(),this._isOpen=!!e}_show(){this.innerElement||(this.innerElement=this.viewContainerRef.createEmbeddedView(this.templateRef).rootNodes[0])}_hide(){this.viewContainerRef.clear(),this.innerElement=null}_animateOpen(){let e=this.animateSpeed,r=this.animateAcceleration,i=0;this.renderer.setStyle(this.innerElement,"max-height","0"),setTimeout(()=>{const o=setInterval(()=>{if(!this._isOpen||!this.innerElement)return clearInterval(o);i+=e;const a=Math.round(i);this.renderer.setStyle(this.innerElement,"max-height",`${a}px`);const l=this.innerElement.getBoundingClientRect?this.innerElement.getBoundingClientRect().height:0;e*=r,r*=1.005,l<a&&(this.renderer.setStyle(this.innerElement,"max-height",null),clearInterval(o))},17)})}_animateClose(){if(!this.innerElement)return;let e=this.animateSpeed,r=this.animateAcceleration,i=this.innerElement.getBoundingClientRect().height;const o=setInterval(()=>{if(this._isOpen||!this.innerElement)return clearInterval(o);i-=e,this.renderer.setStyle(this.innerElement,"max-height",`${i}px`),e*=r,r*=1.005,i<=0&&(this.viewContainerRef.clear(),this.innerElement=null,clearInterval(o))},17)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.Qsj),s.Y36(s.Rgc),s.Y36(s.s_b))},t.\u0275dir=s.lG2({type:t,selectors:[["","treeAnimateOpen",""]],inputs:{isOpen:["treeAnimateOpen","isOpen"],animateSpeed:["treeAnimateOpenSpeed","animateSpeed"],animateAcceleration:["treeAnimateOpenAcceleration","animateAcceleration"],isEnabled:["treeAnimateOpenEnabled","isEnabled"]}}),t})(),Po=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[B.ez]}),t})()}}]);