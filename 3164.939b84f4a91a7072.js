"use strict";(self.webpackChunkimserp=self.webpackChunkimserp||[]).push([[3164],{77879:(b,m,s)=>{s.d(m,{H:()=>g});var h=s(64537),f=s(53074);let g=(()=>{class u{constructor(t){this.masterRepo=t}ngOnInit(){}isOldFYearDB(){return 1===this.masterRepo.userSetting.IsOldFyearDB}}return u.\u0275fac=function(t){return new(t||u)(h.Y36(f.P))},u.\u0275dir=h.lG2({type:u,selectors:[["","appOldFYearDB",""]],exportAs:["appOldFYearDB"]}),u})()},23164:(b,m,s)=>{s.r(m),s.d(m,{LocationEntryModule:()=>I});var h=s(88692),f=s(46543),g=s(72533),u=s(12640),d=s(7976),t=s(64537),y=s(35732),E=s(79765),C=s(67297),T=s(71180);let _=(()=>{class o{constructor(e,n,i){this.http=e,this.authService=n,this.state=i;const r=this.state.getGlobalSetting("apiUrl");r&&r.length>0&&(this.apiUrl=r)}getRequestOptions(){return new y.WM({"Content-type":"application/json",Authorization:this.authService.getAuth().token,"X-Requested-With":"XMLHttpRequest"})}saveLocationEntry(e,n){let i={status:"error",result:""},r=new E.xQ;const l={headers:this.getRequestOptions(),method:"post"};return this.http.post(this.apiUrl+"/saveLocation",{mode:e,data:n},l).subscribe(v=>{let L=v;"ok"==L.status?(i.status="ok",i.result=L.result,r.next(i),r.unsubscribe()):(i.status="error1",i.result=L.result,r.next(i),r.unsubscribe())},v=>{i.status="errpr2",i.result=v,r.next(i),r.unsubscribe()}),r}getLocationNameList(e){return this.http.get(this.apiUrl+"/getLocationNameList/"+e)}getLocationWarehouseList(){return this.http.get(this.apiUrl+"/getWarehouseList")}getLocationEntryList(){return this.http.get(this.apiUrl+"/getLocationGroupList")}deleteLocation(e){let n={status:"error",result:""},i=new E.xQ,r={Name:e};const l={headers:this.authService.getRequestOption(),method:"post"};return this.http.post(this.apiUrl+"/deleteLocation",r,l).subscribe(p=>{i.next(p),i.unsubscribe()},p=>{n.status="error",n.result=p,i.next(n),i.unsubscribe()}),i}getLocationView(e){return this.http.get(this.apiUrl+"/getLocationByName?name="+e)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(y.eN),t.LFG(C.e),t.LFG(T.q))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();var M=s(67311),x=s(14970),c=s(20092);function Z(o,a){1&o&&(t.TgZ(0,"label",12),t._uU(1,"Location:"),t.qZA())}function A(o,a){1&o&&(t.TgZ(0,"label",12),t._uU(1,"Rack:"),t.qZA())}function O(o,a){if(1&o&&(t.TgZ(0,"option",23),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.s9C("value",e.NAME),t.xp6(1),t.Oqu(e.NAME)}}function P(o,a){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",11),t.YNc(2,Z,2,0,"label",20),t.YNc(3,A,2,0,"label",20),t.TgZ(4,"div",13)(5,"select",21),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.locationMaster.PARENT=i)}),t.YNc(6,O,2,2,"option",22),t.qZA()()(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngIf","rack"==e.locationMaster.TYPE),t.xp6(1),t.Q6J("ngIf","shelf"==e.locationMaster.TYPE),t.xp6(2),t.Q6J("ngModel",e.locationMaster.PARENT),t.xp6(1),t.Q6J("ngForOf",e.locationNameList)}}let S=(()=>{class o{constructor(e,n,i,r,l){this.locationEntryService=e,this.alertService=n,this.loadingService=i,this.router=r,this.activeRoute=l,this.locationMaster={},this.locationNameList=[],this.locationWarehouseList=[],this.disableOnView=!1,this.mode=""}ngOnInit(){this.getWarehouse();try{if(this.activeRoute.snapshot.params.returnUrl&&(this.returnUrl=this.activeRoute.snapshot.params.returnUrl),this.activeRoute.snapshot.params.name){let e=this.activeRoute.snapshot.params.name;this.loadingService.show("Getting Data ,please wait..."),this.locationMaster.TYPE="location",this.locationEntryService.getLocationView(e).subscribe(n=>{this.loadingService.hide(),"ok"==n.status?(this.locationMaster.NAME=n.result[0].NAME,this.locationMaster.DESCRIPTION=n.result[0].DESCRIPTION,this.locationMaster.TYPE=n.result[0].TYPE,this.locationMaster.PARENT=n.result[0].PARENT,this.locationMaster.REMARKS=n.result[0].REMARKS,this.locationMaster.Warehouse=n.result[0].WAREHOUSE,this.locationMaster.locationNameBeforeEdit=n.result[0].NAME,this.getLocations(this.locationMaster.TYPE),"edit"==this.activeRoute.snapshot.params.mode?(this.modeTitle="Edit Location Entry",this.mode="edit"):"view"==this.activeRoute.snapshot.params.mode&&(this.modeTitle="View Location Entry",this.mode="view")):(this.mode="",this.modeTitle="Edit- Error in Location Entry")},n=>{this.loadingService.hide(),this.mode="",this.modeTitle="Edit2 -Error in Loading data"})}else this.mode="add",this.modeTitle="Add Location Entry";this.activeRoute.snapshot.params.mode&&"view"==this.activeRoute.snapshot.params.mode&&(this.disableOnView=!0)}catch(e){this.alertService.info(e)}}onreset(){try{this.router.navigate(["./pages/masters/location"])}catch(e){alert(e)}}saveLocation(){console.log(this.locationMaster),null!=this.locationMaster.PARENT||"location"==this.locationMaster.TYPE?(this.loadingService.show("Saving Location Entry.Please Wait...."),this.locationEntryService.saveLocationEntry(this.mode,this.locationMaster).subscribe(e=>{console.log("result on save",e),"ok"==e.status?(this.loadingService.hide(),this.alertService.success(e.result),setTimeout(()=>{this.onreset()},1500)):(this.loadingService.hide(),this.alertService.info(e.result.error))},e=>{this.loadingService.hide(),this.alertService.info(e)})):this.alertService.info("Parent cannot be null")}getLocations(e){console.log(e),"location"!=this.locationMaster.TYPE&&this.locationEntryService.getLocationNameList(e).subscribe(n=>{console.log("result",n),"ok"==n.status&&(this.locationNameList=n.result)},n=>{this.alertService.info(n)})}getWarehouse(){this.locationEntryService.getLocationWarehouseList().subscribe(e=>{this.locationWarehouseList=e,console.log(this.locationWarehouseList)},e=>{this.alertService.info(e)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_),t.Y36(M.c),t.Y36(x.V),t.Y36(d.F0),t.Y36(d.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-location-entry-form"]],decls:44,vars:7,consts:[[1,"sticky-top","row"],[1,"col-md-4"],[1,"col-md-8"],[1,"row","pull-right",2,"margin-right","10px"],["type","submit",1,"btn","btn-info",2,"font-size","12px",3,"disabled","click"],["type","button","routerLink","/pages/masters/location","title","Cancel",1,"btn","btn-info",2,"font-size","12px"],[1,"card"],[1,"card-header"],[1,"page-title"],[1,"card-body"],[1,"container"],[1,"form-group","row"],[1,"col-sm-2","form-control-label",2,"font-size","13px"],[1,"col-sm-9"],["id","type","name","type",2,"height","4vh","font-size","14px","width","40vw",3,"ngModel","ngModelChange","change"],["value","location"],["value","rack"],["value","shelf"],[4,"ngIf"],["type","text","id","Parent","autocomplete","off",1,"form-control",2,"height","4vh","font-size","14px",3,"ngModel","ngModelChange"],["class","col-sm-2 form-control-label","style","font-size: 13px;",4,"ngIf"],["id","type","name","type",2,"height","4vh","font-size","14px","width","40vw",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5"),t._uU(3,"Location Entry "),t.qZA()(),t.TgZ(4,"div",2)(5,"div",3)(6,"form")(7,"button",4),t.NdJ("click",function(){return n.saveLocation()}),t._uU(8,"Save"),t.qZA(),t.TgZ(9,"button",5),t._uU(10,"Reset"),t.qZA()()()()(),t.TgZ(11,"div",6)(12,"div",7)(13,"h5",8),t._uU(14),t.qZA()(),t.TgZ(15,"div",9)(16,"div",10)(17,"div",11)(18,"label",12),t._uU(19,"Type:"),t.qZA(),t.TgZ(20,"div",13)(21,"select",14),t.NdJ("ngModelChange",function(r){return n.locationMaster.TYPE=r})("change",function(r){return n.getLocations(r.target.value)}),t.TgZ(22,"option",15),t._uU(23,"Location"),t.qZA(),t.TgZ(24,"option",16),t._uU(25,"Rack"),t.qZA(),t.TgZ(26,"option",17),t._uU(27,"Shelf"),t.qZA()()()(),t.YNc(28,P,7,4,"ng-container",18),t.TgZ(29,"div",11)(30,"label",12),t._uU(31,"Name:"),t.qZA(),t.TgZ(32,"div",13)(33,"input",19),t.NdJ("ngModelChange",function(r){return n.locationMaster.NAME=r}),t.qZA()()(),t.TgZ(34,"div",11)(35,"label",12),t._uU(36,"Description:"),t.qZA(),t.TgZ(37,"div",13)(38,"input",19),t.NdJ("ngModelChange",function(r){return n.locationMaster.DESCRIPTION=r}),t.qZA()()(),t.TgZ(39,"div",11)(40,"label",12),t._uU(41,"Remarks:"),t.qZA(),t.TgZ(42,"div",13)(43,"input",19),t.NdJ("ngModelChange",function(r){return n.locationMaster.REMARKS=r}),t.qZA()()()()()()),2&e&&(t.xp6(7),t.Q6J("disabled",n.disableOnView),t.xp6(7),t.Oqu(n.modeTitle),t.xp6(7),t.Q6J("ngModel",n.locationMaster.TYPE),t.xp6(7),t.Q6J("ngIf","rack"==n.locationMaster.TYPE||"shelf"==n.locationMaster.TYPE),t.xp6(5),t.Q6J("ngModel",n.locationMaster.NAME),t.xp6(5),t.Q6J("ngModel",n.locationMaster.DESCRIPTION),t.xp6(5),t.Q6J("ngModel",n.locationMaster.REMARKS))},dependencies:[h.sg,h.O5,d.rH,c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,c.On,c.F],styles:[".card[_ngcontent-%COMP%]{margin:2px 30px 0 300px!important;width:60%}.card-body[_ngcontent-%COMP%]{padding:10px 16px}"]}),o})();var N=s(53074),w=s(77879);let F=(()=>{class o{transform(e,n){if(e)return n?e.filter(i=>{const r=n.replace(/[^A-Z0-9]/gi,"").toLowerCase();if(-1!==(i.NAME?i.NAME.replace(/[^A-Z0-9]/gi,"").toLowerCase():"").indexOf(r))return i}):e}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=t.Yjl({name:"searchData",type:o,pure:!1}),o})();function R(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td",22),t._uU(2),t.qZA(),t.TgZ(3,"td",23),t._uU(4),t.qZA(),t.TgZ(5,"td",24),t._uU(6),t.qZA(),t.TgZ(7,"td",24),t._uU(8),t.qZA(),t.TgZ(9,"td",23),t._uU(10),t.qZA(),t.TgZ(11,"td",23),t._uU(12),t.qZA(),t.TgZ(13,"td",25)(14,"a",26),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.onView(r))}),t._uU(15,"View"),t.qZA(),t.TgZ(16,"button",27,5),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.onEditClicked(r))}),t._uU(18,"Edit"),t.qZA(),t.TgZ(19,"button",27,5),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.deleteLocation(r))}),t._uU(21,"Delete"),t.qZA()()()}if(2&o){const e=a.$implicit,n=a.index,i=t.MAs(17),r=t.oxw(2);t.xp6(2),t.Oqu(n+1+(r.currentPage-1)*r.itemsPerPage),t.xp6(2),t.Oqu(e.shelfName),t.xp6(2),t.Oqu(e.rackName),t.xp6(2),t.Oqu(e.locationName),t.xp6(2),t.Oqu(e.Warehouse),t.xp6(2),t.Oqu(e.Description),t.xp6(4),t.Q6J("disabled",i.isOldFYearDB()),t.xp6(3),t.Q6J("disabled",i.isOldFYearDB())}}const U=function(o,a,e){return{itemsPerPage:o,currentPage:a,totalItems:e}};function Y(o,a){if(1&o&&(t.ynx(0),t.YNc(1,R,22,8,"tr",21),t.ALo(2,"paginate"),t.ALo(3,"searchData"),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,t.xi3(3,4,e.locationEntryList,e.filter),t.kEZ(7,U,e.itemsPerPage,e.currentPage,e.totalCount)))}}function k(o,a){1&o&&(t.ynx(0),t.TgZ(1,"tr")(2,"td",28)(3,"div",29),t._uU(4,"Location Entry Information are unavailable."),t.qZA()()(),t.BQk())}function J(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",30)(1,"div",31)(2,"div",32)(3,"pagination-controls",33),t.NdJ("pageChange",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.categoryPagination(i))}),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(3),t.Q6J("directionLinks",e.directionLinks)}}const q=[{path:"",component:(()=>{class o{constructor(e,n,i,r){this.router=e,this.masterRepo=n,this.alertService=i,this.locationEntryService=r,this.itemsPerPage=100,this.isLoader=!0,this.currentPage=1}ngOnInit(){this.getLocationEntry()}addLocationRate(){try{if(0==this.masterRepo.checkIsBranch())return void this.alertService.warning("Cannot add Category in branch office");this.router.navigate(["./pages/masters/location/add-location",{mode:"add",returnUrl:this.router.url}])}catch(e){this.alertService.error(e)}}onView(e){try{this.router.navigate(["./pages/masters/location/add-location",{name:e.shelfName,mode:"view",returnUrl:this.router.url}])}catch(n){console.log(n),alert(n)}}categoryPagination(e){this.isLoader=!0,this.currentPage=e;const n=this;window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{n.isLoader=!1},500)}getLocationEntry(){this.locationEntryService.getLocationEntryList().subscribe(e=>{this.locationEntryList=e})}deleteLocation(e){confirm("Are you sure you want to delete"+e.shelfName+"?")&&this.locationEntryService.deleteLocation(e.shelfName).subscribe(n=>{"ok"==n.status?(this.alertService.info(n.result),this.locationEntryService.getLocationEntryList().subscribe(i=>{i?(this.isLoader=!1,this.locationEntryList=i||[]):(this.locationEntryList=[],this.errorMessage="something is wrong.")})):this.alertService.error(n.result.error)},n=>{this.alertService.error(n.error)})}onEditClicked(e){try{this.router.navigate(["./pages/masters/location/add-location",{name:e.shelfName,mode:"edit",returnUrl:this.router.url}])}catch(n){console.log(n),alert(n)}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.F0),t.Y36(N.P),t.Y36(M.c),t.Y36(_))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-location-entry-list"]],decls:42,vars:11,consts:[[1,"row","col-md-12"],[1,"col-md-4"],[1,"col-md-8"],["routerLink","/pages/dashboard",1,"btn","btn-info","pull-right",2,"font-size","12px"],["appOldFYearDB","",1,"btn","btn-info","pull-right",2,"font-size","12px",3,"disabled","click"],["isOldFYearDB","appOldFYearDB"],[1,"row",2,"align-items","center"],[1,"col-md-12","col-sm-8",2,"margin-top","0.5rem"],[1,"card",2,"margin","auto","width","63rem"],[1,"card-header"],[2,"width","25%"],["type","search","placeholder","Search...","name","filter",2,"height","1.5rem","font-size","13px",3,"ngModel","ngModelChange"],[1,"card-body"],[1,"table","table-striped"],[2,"position","sticky","top","0","line-height","1.5rem"],["scope","col",2,"width","3%"],["scope","col",2,"width","15%"],["scope","col",2,"width","11%"],["scope","col",2,"text-align","center","width","19%"],[4,"ngIf"],["class","card-footer","style","padding:5px",4,"ngIf"],[4,"ngFor","ngForOf"],[2,"width","3%"],[2,"width","15%"],[2,"width","11%"],[2,"width","19%","text-align","center"],[1,"btn","btn-sm","btn-info","mr-1","btn-sm",2,"width","60px","color","white",3,"click"],["appOldFYearDB","",1,"btn","btn-sm","btn-info","mr-1","btn-sm",2,"width","60px","color","white",3,"disabled","click"],["colspan","7"],[1,"font-weight-bold"],[1,"card-footer",2,"padding","5px"],[1,"pagination"],[2,"margin","auto"],[1,"my-pagination",3,"directionLinks","pageChange"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5"),t._uU(3,"Location Entry Master"),t.qZA()(),t.TgZ(4,"div",2)(5,"button",3),t._uU(6,"Back"),t.qZA(),t.TgZ(7,"button",4,5),t.NdJ("click",function(){return n.addLocationRate()}),t._uU(9,"Add Location Entry"),t.qZA()()(),t.TgZ(10,"div",6)(11,"div",7)(12,"div",8)(13,"div",9)(14,"span"),t._uU(15,"Location Entry Lists"),t.qZA(),t.TgZ(16,"div",10)(17,"input",11),t.NdJ("ngModelChange",function(r){return n.filter=r}),t.qZA()()(),t.TgZ(18,"div",12)(19,"table",13)(20,"thead")(21,"tr",14)(22,"th",15),t._uU(23,"S.N"),t.qZA(),t.TgZ(24,"th",16),t._uU(25," Shelf"),t.qZA(),t.TgZ(26,"th",17),t._uU(27," Rack"),t.qZA(),t.TgZ(28,"th",17),t._uU(29," Location"),t.qZA(),t.TgZ(30,"th",16),t._uU(31," Warehouse"),t.qZA(),t.TgZ(32,"th",16),t._uU(33," Description"),t.qZA(),t.TgZ(34,"th",18),t._uU(35,"Action"),t.qZA()()(),t.TgZ(36,"tbody"),t.YNc(37,Y,4,11,"ng-container",19),t.YNc(38,k,5,0,"ng-container",19),t.ALo(39,"searchData"),t.qZA()(),t.YNc(40,J,4,1,"div",20),t.ALo(41,"searchData"),t.qZA()()()()),2&e){const i=t.MAs(8);t.xp6(7),t.Q6J("disabled",i.isOldFYearDB()),t.xp6(10),t.Q6J("ngModel",n.filter),t.xp6(20),t.Q6J("ngIf",n.locationEntryList&&n.locationEntryList.length>0),t.xp6(1),t.Q6J("ngIf",n.locationEntryList&&0===t.xi3(39,5,n.locationEntryList,n.filter).length),t.xp6(2),t.Q6J("ngIf",n.locationEntryList&&t.xi3(41,8,n.locationEntryList,n.filter).length>n.itemsPerPage)}},dependencies:[h.sg,h.O5,d.rH,c.Fj,c.JJ,c.On,g.LS,w.H,g._s,F],styles:[".card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.card-header[_ngcontent-%COMP%]:after{display:none}.card-body[_ngcontent-%COMP%]{padding:5px!important;max-height:455px!important}.main-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:60px 0}.scroll-touch[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch!important}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.1rem!important}.sticky-top[_ngcontent-%COMP%]{margin-top:60px;height:100vh}tbody[_ngcontent-%COMP%]{display:block;height:59vh;overflow:auto}thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}th[_ngcontent-%COMP%]{font-size:15px}td[_ngcontent-%COMP%]{font-size:13px}.btn-sm[_ngcontent-%COMP%]{line-height:3px}.card-header[_ngcontent-%COMP%]{padding:10px 20px}.card-footer[_ngcontent-%COMP%]{height:6vh}.searchBy[_ngcontent-%COMP%]{font-size:13px;margin-left:16rem}.my-pagination[_ngcontent-%COMP%]     .ngx-pagination .current{background:#17a2b8!important;border:transparent!important;border-radius:20px!important}.my-pagination[_ngcontent-%COMP%]     .ngx-pagination .current:hover{background:#74d4e2!important;border-radius:20px!important;border:transparent!important}.my-pagination[_ngcontent-%COMP%]     .ngx-pagination a:hover, .ngx-pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#c2c2c2;border-radius:20px!important}"]}),o})()},{path:"add-location",component:S}];let D=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.Bz.forChild(q),d.Bz]}),o})();const B={suppressScrollX:!1};let I=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[_,{provide:u.op,useValue:B}],imports:[h.ez,D,f.m,g.JX,u.Xd]}),o})()}}]);