"use strict";(self.webpackChunkimserp=self.webpackChunkimserp||[]).push([[2310],{18488:(Q,y,a)=>{a.d(y,{G:()=>A});var d=a(35732),_=a(79765),E=a(64537),k=a(7976),I=a(67297),N=a(71180);let A=(()=>{class v{constructor(c,g,f,u){this.http=c,this.activatedRoute=g,this.authService=f,this.state=u;const p=this.state.getGlobalSetting("apiUrl");p&&p.length>0&&(this.apiUrl=p)}getRequestOption(){return new d.WM({"Content-type":"application/csv",Authorization:this.authService.getAuth().token,"X-Requested-With":"XMLHttpRequest"})}RequestOptionForCSV(){return{headers:new d.WM({Authorization:this.authService.getAuth().token})}}downloadSampleFile(c,g="download"){return this.http.get(this.apiUrl+`${c}`,{headers:this.getRequestOption(),responseType:"blob"})}downloadSampleExcelforPIImport(c){return this.http.post(this.apiUrl+"/downloadSampleExcelforPIImport",c,{responseType:"blob"})}importSelectedFiles(c,g){let f={status:"error",result:"error"},u=new _.xQ;return this.http.post(this.apiUrl+`${c}`,g).subscribe(p=>{u.next(p),u.unsubscribe()},p=>{f.status="error",f.result=p,u.next(f),u.unsubscribe()}),u}}return v.\u0275fac=function(c){return new(c||v)(E.LFG(d.eN),E.LFG(k.gz),E.LFG(I.e),E.LFG(N.q))},v.\u0275prov=E.Yz7({token:v,factory:v.\u0275fac}),v})()},35514:(Q,y,a)=>{a.r(y),a.d(y,{ManualStockEntryModule:()=>Et});var d=a(88692),_=a(54536),E=a(82738),k=a(46543),I=a(72533),N=a(12640),A=a(59629),v=a(88465),O=a(55618),c=a(7976),g=a(28698),f=a(60716),u=a(68328),p=a(42326),t=a(64537),V=a(53074),h=a(20092),U=a(35732),w=a(79765),x=a(67297),J=a(71180);let T=(()=>{class r{constructor(e,n,i,o){this.http=e,this.activatedRoute=n,this.authService=i,this.state=o,this.userProfile={};const s=this.state.getGlobalSetting("apiUrl");s&&s.length>0&&(this.apiUrl=s),this.userProfile=i.getUserProfile()}deleteManualStockEntry(e,n){return this.http.post(this.apiUrl+`/deleteManualStockEntry?TNO=${e}&division=${n}`,"")}getEntryNumber(){return this.http.get(this.apiUrl+"/getManualStockID")}getBatchNumber(e,n){return this.http.get("close"==n?this.apiUrl+`/getManualStockBatchList?mode=${n}&division=${e}`:this.apiUrl+`/getManualStockBatchList?division=${e}`)}getRequestOption(){return new U.WM({"Content-type":"application/json",Authorization:this.authService.getAuth().token,"X-Requested-With":"XMLHttpRequest"})}saveManualStock(e){let n={status:"error",result:""},i=new w.xQ;return this.getRequestOption(),this.http.post(this.apiUrl+"/saveManualStockEntry",e).subscribe(s=>{i.next(s),i.unsubscribe()},s=>{n.status="error",n.result=s,i.next(n),i.unsubscribe()}),i}getManualStockListView(e,n){return this.http.get(`${this.apiUrl}/getManualStockListFroView?TNO=${e}&DIVISION=${n}`)}getWarehouseByDivision(e){let n={status:"error",result:""},i=new w.xQ;return this.http.get(`${this.apiUrl}/getWarehouseByDivision?DIVISION=${e}`).subscribe(o=>{i.next(o),i.unsubscribe()},o=>{n.status="error",n.result=o,i.next(n),i.unsubscribe()}),i}postBatchUnit(e){return this.http.post(this.apiUrl+"/saveManualStockBatch",e)}closeManualStockBatch(e){let n={status:"error",result:""},i=new w.xQ;return this.getRequestOption(),this.http.post(this.apiUrl+"/closeManualStockBatch",{BATCH:e}).subscribe(m=>{i.next(m),i.unsubscribe()},m=>{n.status="error",n.result=m,i.next(n),i.unsubscribe()}),i}loadManualBatchList(e,n){return this.http.get(this.apiUrl+"/loadManualBatchList?countDate="+e+"&division="+n)}mergeBatches(e){return this.http.post(this.apiUrl+"/saveMergedBatch",e)}viewMergedBatch(e,n){return this.http.get(this.apiUrl+"/viewMergedBatch?batch="+e+"&division="+n)}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(U.eN),t.LFG(c.gz),t.LFG(x.e),t.LFG(J.q))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),r})();var Z=a(67311),R=a(14970),G=a(87584),j=a(94534),F=a(11192),L=a(91772);const W=["genericGridview"],q=["genericGridedit"],B=function(){return{opacity:"50%"}};function Y(r,l){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"input",17),t.NdJ("ngModelChange",function(i){const s=t.CHM(e).$implicit;return t.KtG(s.checked=i)}),t.qZA()(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"date"),t.qZA()()}if(2&r){const e=l.$implicit,n=t.oxw();t.xp6(2),t.Q6J("ngModel",e.checked)("ngStyle","view"==n.mode?t.DdM(7,B):null)("checked",1==e.checked),t.xp6(2),t.Oqu(e.BATCH),t.xp6(2),t.Oqu(t.lcZ(7,5,e.DATE))}}let K=(()=>{class r{constructor(e,n,i,o){this.manualStockEntryService=e,this.alertService=n,this.loadingService=i,this.datePipe=o,this.closeEvent=new t.vpe,this.batchList=[],this.mode="new",this.disableMerge=!1,this.disableDate=!1,this.gridItemviewSettings=new g.im,this.gridItemeditSettings=new g.im}ngOnInit(){}onClose(){this.closeEvent.emit()}onLoadClick(){this.countDate?this.manualStockEntryService.loadManualBatchList(this.countDate,this.division).subscribe(e=>{if(this.addIsCheckedProperty(e.result),this.disableDate=!0,this.batchList&&this.batchList.length>0){const n=e.result.filter(i=>!this.batchList.some(o=>i.BATCH==o.BATCH&&i.DATE==o.DATE));this.batchList=[...this.batchList,...n]}else this.batchList=e.result}):this.alertService.warning("Count Date is required!!")}addIsCheckedProperty(e,n=!1){e.forEach(i=>{i.checked=n})}onMergeClick(){if(!this.countDate)return void this.alertService.warning("Count Date is required!!");if(!this.mbName)return void this.alertService.warning("Merged Batch Name is required!!");let e=this.batchList.filter(i=>1==i.checked);if(e.length<2)return void this.alertService.warning("Two or more Batches must be selected!!");let n={Mode:this.mode,Data:{BATCH:this.mbName,DIVISION:this.division,Date:this.countDate,REF_BATCH:e}};this.loadingService.show("Please wait.... Saving your data."),this.manualStockEntryService.mergeBatches(n).subscribe(i=>{this.loadingService.hide(),this.closeEvent.emit(),this.alertService.info("Batches Merged Successfully.")},i=>{this.loadingService.hide()})}dblClickedit(e,n){this.disableDate=!0,this.mode="edit",e.BATCH&&this.viewMergedBatch(e.BATCH,this.division)}dblClickview(e,n){this.mode="view",e.BATCH&&this.viewMergedBatch(e.BATCH,this.division)}viewMergedBatch(e,n){this.manualStockEntryService.viewMergedBatch(e,n).subscribe(i=>{i&&i.result&&i.result.REF_BATCH&&(this.addIsCheckedProperty(i.result.REF_BATCH,!0),this.batchList=i.result.REF_BATCH,i.result.BATCH&&(this.mbName=i.result.BATCH),i.result.DATE&&(this.countDate=this.datePipe.transform(i.result.DATE,"yyyy-MM-dd"))),"Adjusted"==i.result2?(this.disableMerge=!0,this.alertService.warning("Selected batch has already been adjusted!!")):this.disableMerge=!1})}onViewClick(){this.gridItemviewSettings={title:"View merged Batches",apiEndpoints:`/getMergedBatchPagedList/${this.division}`,defaultFilterIndex:0,columns:[{key:"BATCH",title:"Batch Name",hidden:!1,noSearch:!1},{key:"DATE",title:"Date",hidden:!1,noSearch:!1}]},console.log("show",this.genericGridview),this.genericGridview.show()}onEditClick(){this.gridItemeditSettings={title:"Edit Merged Batches",apiEndpoints:`/getMergedBatchPagedList/${this.division}`,defaultFilterIndex:0,columns:[{key:"BATCH",title:"Batch Name",hidden:!1,noSearch:!1},{key:"DATE",title:"Date",hidden:!1,noSearch:!1}]},this.genericGridedit.show()}onReset(){this.batchList=[],this.mbName="",this.countDate="",this.mode="new",this.disableDate=!1}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(T),t.Y36(Z.c),t.Y36(R.V),t.Y36(d.uU))},r.\u0275cmp=t.Xpm({type:r,selectors:[["merge-batch-popup"]],viewQuery:function(e,n){if(1&e&&(t.Gf(W,5),t.Gf(q,5)),2&e){let i;t.iGM(i=t.CRH())&&(n.genericGridview=i.first),t.iGM(i=t.CRH())&&(n.genericGridedit=i.first)}},inputs:{division:"division",divisionName:"divisionName"},outputs:{closeEvent:"closeEvent"},features:[t._Bn([T,d.uU])],decls:41,vars:14,consts:[[1,"container"],[1,"top-section"],[1,"table-title"],[1,"cross-button",3,"click"],[1,"content-section"],[1,"input-section"],["type","text","name","mb_name","autocomplete","off",3,"ngModel","ngModelChange"],["type","date","name","date",3,"ngModel","disabled","ngModelChange"],["type","text","name","division",3,"ngModel","disabled","ngModelChange"],[3,"click"],[3,"disabled","ngStyle","click"],[1,"table-section"],[4,"ngFor","ngForOf"],[1,"merge-button",3,"disabled","ngStyle","click"],[3,"popupsettings","onItemDoubleClick"],["genericGridview",""],["genericGridedit",""],["type","checkbox",3,"ngModel","ngStyle","checked","ngModelChange"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Merge Batch"),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return n.onClose()}),t._uU(5,"X"),t.qZA()(),t.TgZ(6,"div",4)(7,"div",5)(8,"div"),t._uU(9," M.B. Name: "),t.TgZ(10,"input",6),t.NdJ("ngModelChange",function(o){return n.mbName=o}),t.qZA(),t._uU(11," Date: "),t.TgZ(12,"input",7),t.NdJ("ngModelChange",function(o){return n.countDate=o}),t.qZA(),t._uU(13," Division: "),t.TgZ(14,"input",8),t.NdJ("ngModelChange",function(o){return n.divisionName=o}),t.qZA()(),t.TgZ(15,"div")(16,"button",9),t.NdJ("click",function(){return n.onReset()}),t._uU(17,"Reset"),t.qZA(),t.TgZ(18,"button",9),t.NdJ("click",function(){return n.onViewClick()}),t._uU(19,"View"),t.qZA(),t.TgZ(20,"button",9),t.NdJ("click",function(){return n.onEditClick()}),t._uU(21,"Edit"),t.qZA(),t.TgZ(22,"button",10),t.NdJ("click",function(){return n.onLoadClick()}),t._uU(23,"Load"),t.qZA()()(),t.TgZ(24,"div",11)(25,"table")(26,"thead")(27,"tr"),t._UZ(28,"th"),t.TgZ(29,"th"),t._uU(30,"Batch Name"),t.qZA(),t.TgZ(31,"th"),t._uU(32,"Counted Date"),t.qZA()()(),t.TgZ(33,"tbody"),t.YNc(34,Y,8,8,"tr",12),t.qZA()()(),t.TgZ(35,"button",13),t.NdJ("click",function(){return n.onMergeClick()}),t._uU(36,"Merge"),t.qZA()()(),t.TgZ(37,"generic-popup-grid",14,15),t.NdJ("onItemDoubleClick",function(o){return n.dblClickview(o,n.mode)}),t.qZA(),t.TgZ(39,"generic-popup-grid",14,16),t.NdJ("onItemDoubleClick",function(o){return n.dblClickedit(o,n.mode)}),t.qZA()),2&e&&(t.xp6(10),t.Q6J("ngModel",n.mbName),t.xp6(2),t.Q6J("ngModel",n.countDate)("disabled",n.disableDate),t.xp6(2),t.Q6J("ngModel",n.divisionName)("disabled",!0),t.xp6(8),t.Q6J("disabled","view"==n.mode)("ngStyle","view"==n.mode?t.DdM(12,B):null),t.xp6(12),t.Q6J("ngForOf",n.batchList),t.xp6(1),t.Q6J("disabled","view"==n.mode||"edit"==n.mode&&n.disableMerge)("ngStyle","view"==n.mode||"edit"==n.mode&&n.disableMerge?t.DdM(13,B):null),t.xp6(2),t.Q6J("popupsettings",n.gridItemviewSettings),t.xp6(2),t.Q6J("popupsettings",n.gridItemeditSettings))},dependencies:[d.sg,d.PC,h.Fj,h.Wl,h.JJ,h.On,g.Zl,d.uU],styles:[".container[_ngcontent-%COMP%]{position:fixed;top:50%;right:50%;transform:translate(50%,-50%);background-color:#fff;width:70%;border:1px solid #ccc;box-shadow:0 0 10px #0000001a;z-index:9999;padding:0 0 10px}.top-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#007bff;padding:10px}.table-title[_ngcontent-%COMP%]{font-weight:700}.cross-button[_ngcontent-%COMP%]{background-color:#ede7e7;color:#0c0101;border:none;padding:5px 10px;border-radius:5px;cursor:pointer}.content-section[_ngcontent-%COMP%]{padding:10px;margin-bottom:20px}.input-section[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px;justify-content:space-between}.input-section[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .input-section[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{margin-right:10px;padding:5px}.input-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;cursor:pointer;margin-right:5px}.table-section[_ngcontent-%COMP%]{margin-bottom:20px;max-height:calc(50vh - 100px);overflow-y:scroll}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:8px;text-align:left}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{transform:scale(1.5);align-self:center}.merge-button[_ngcontent-%COMP%]{float:right;background-color:#007bff;color:#fff;border:none;cursor:pointer}"]}),r})();var z=a(41544),$=a(54471);const X=["focusWarehouse"],tt=["genericGridItem"],et=["genericGridview"],nt=["genericGridedit"];function it(r,l){if(1&r&&(t.TgZ(0,"option",14),t._uU(1),t.qZA()),2&r){const e=l.$implicit;t.Q6J("ngValue",e.BATCH),t.xp6(1),t.hij(" ",e.BATCH," ")}}function ot(r,l){if(1&r&&(t.ynx(0),t.TgZ(1,"option",14),t._uU(2),t.qZA(),t.BQk()),2&r){const e=l.$implicit;t.xp6(1),t.Q6J("ngValue",e.NAME),t.xp6(1),t.Oqu(e.NAME)}}function rt(r,l){if(1&r){const e=t.EpF();t.TgZ(0,"div")(1,"div",38)(2,"div",39)(3,"div",40)(4,"h5",41),t._uU(5,"New Counting Batch"),t.qZA(),t.TgZ(6,"button",42),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.closeBatchModal())}),t.TgZ(7,"span",43),t._uU(8,"\xd7"),t.qZA()()(),t.TgZ(9,"div",44)(10,"div",45)(11,"label",46),t._uU(12,"Division:"),t.qZA(),t.TgZ(13,"div",47)(14,"input",48),t.NdJ("ngModelChange",function(i){t.CHM(e);const o=t.oxw();return t.KtG(o.selectedDivisionName=i)}),t.qZA()()(),t.TgZ(15,"div",45)(16,"label",46),t._uU(17,"Batch Name:"),t.qZA(),t.TgZ(18,"div",47)(19,"input",49),t.NdJ("ngModelChange",function(i){t.CHM(e);const o=t.oxw();return t.KtG(o.batchUnitObj.BATCH=i)}),t.qZA()()(),t.TgZ(20,"div",10)(21,"label",46),t._uU(22,"Date:"),t.qZA(),t.TgZ(23,"div",47)(24,"input",50),t.NdJ("ngModelChange",function(i){t.CHM(e);const o=t.oxw();return t.KtG(o.batchUnitObj.DATE=i)}),t.qZA()()()(),t.TgZ(25,"div",51)(26,"button",52),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onBatchSubmit())}),t._uU(27,"Save"),t.qZA()()()()()}if(2&r){const e=t.oxw();t.xp6(14),t.Q6J("ngModel",e.selectedDivisionName)("disabled",!0),t.xp6(5),t.Q6J("ngModel",e.batchUnitObj.BATCH),t.xp6(5),t.Q6J("ngModel",e.batchUnitObj.DATE)}}function at(r,l){if(1&r&&(t.TgZ(0,"option",56),t._uU(1),t.qZA()),2&r){const e=l.$implicit;t.Q6J("value",e.BATCH),t.xp6(1),t.hij(" ",e.BATCH," ")}}function st(r,l){if(1&r){const e=t.EpF();t.TgZ(0,"div")(1,"div",38)(2,"div",39)(3,"div",40)(4,"h5",41),t._uU(5,"Close Counting Batch"),t.qZA(),t.TgZ(6,"button",42),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.closebatchclosemodal())}),t.TgZ(7,"span",43),t._uU(8,"\xd7"),t.qZA()()(),t.TgZ(9,"div",44)(10,"div",45)(11,"label",46),t._uU(12,"Batch Name:"),t.qZA(),t.TgZ(13,"div",47)(14,"select",53),t.NdJ("ngModelChange",function(i){t.CHM(e);const o=t.oxw();return t.KtG(o.closeBatchName=i)}),t._UZ(15,"option",54),t.YNc(16,at,2,2,"option",55),t.qZA()()()(),t.TgZ(17,"div",51)(18,"button",52),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onBatchClose())}),t._uU(19,"Close Batch"),t.qZA()()()()()}if(2&r){const e=t.oxw();t.xp6(14),t.Q6J("ngModel",e.closeBatchName),t.xp6(2),t.Q6J("ngForOf",e.allBatchList)}}function lt(r,l){if(1&r){const e=t.EpF();t.TgZ(0,"merge-batch-popup",57),t.NdJ("closeEvent",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.mergeBatch())}),t.qZA()}if(2&r){const e=t.oxw();t.Q6J("division",e._trnMainService.TrnMainObj.DIVISION)("divisionName",e.selectedDivisionName)}}const ct=[{path:"",component:(()=>{class r{constructor(e,n,i,o,s,m,M,D,b,P,C){this.masterService=e,this.fb=n,this.manualStockService=i,this.alertService=o,this.loadingService=s,this._trnMainService=m,this.genericProductEntryService=M,this.itemKeyEventService=D,this.entryValidateService=b,this.quantityChangeEventService=P,this.authService=C,this.addNewBatch=!1,this.category=!1,this.addNewCategory=!1,this.batch=!1,this.showMergePopup=!1,this.divisionlist=[],this.batchlist=[],this.warehouseList=[],this.activerowIndex=0,this.mode="",this.count=0,this.selectedDivisionName="",this.manualStockEntry={},this.batchUnitObj={},this.gridItemPopupSettings=new g.im,this.gridItemviewSettings=new g.im,this.gridItemeditSettings=new g.im,this.showbatchclose=!1,this.userSetting=C.getUserProfile(),this._trnMainService.initialFormLoad(107),this._trnMainService.TrnMainObj.DIVISION=this.userSetting.userDivision,this.manualStockService.getBatchNumber(this._trnMainService.TrnMainObj.DIVISION).subscribe(S=>{this.batchlist=S}),this.manualStockService.getBatchNumber(this._trnMainService.TrnMainObj.DIVISION,"close").subscribe(S=>{this.allBatchList=S}),this.masterService.getAllDivisions().subscribe(S=>{this.divisionlist=S,this.findDivisionName()}),this.manualStockService.getWarehouseByDivision(this._trnMainService.TrnMainObj.DIVISION).subscribe(S=>{this.warehouseList=S})}updown(e){"Insert"===e.code&&1==this.batch&&(this.addNewBatch=!0)}ngOnInit(){const e=new Date;this.batchUnitObj.DATE=(0,d.p6)(e,"yyyy-MM-dd","en-US"),this.onReset(),this.gridItemPopupSettings=Object.assign(new g.im,{title:"ITEMS",apiEndpoints:"/getItemListExceptService",defaultFilterIndex:1,useDefinefilterValue:"",columns:[{key:"MENUCODE",title:"ITEM CODE",hidden:!1,noSearch:!1},{key:"DESCA",title:"ITEM NAME",hidden:!1,noSearch:!1},{key:"BASEUNIT",title:"UNIT",hidden:!1,noSearch:!0},{key:"costprice",title:"COST PRICE",hidden:!1,noSearch:!0,alignment:"right",pipe:!0}]}),this.setProductEntryTable(),this.getEntryNumber(),this._trnMainService.TrnMainObj.DIVISION=this.userSetting.userDivision}setProductEntryTable(){var e=this._trnMainService.TrnMainObj.ProdList;this.genericProductEntrySetting=new f.Vn(this._trnMainService),this.genericProductEntrySetting.columns=[{field:"SNO",header:"Sno",hidden:!1,isActiveColumnHeader:!1,isSno:!0,headerNgStyle:{width:"40px"}},{field:"MENUCODE",header:"Code",hidden:!1,isActiveColumnHeader:!0,headerNgStyle:{width:"80px"},disablePipe:(i,o)=>this.getColumnDisablePipe("disableAltQty",i,o)},{field:"BC",header:"Barcode",hidden:!1,isActiveColumnHeader:!0,headerNgStyle:{width:"100px"},disablePipe:(i,o)=>this.getColumnDisablePipe("disableBarcode",i,o)},{field:"ITEMDESC",header:"Particular",hidden:!1,isActiveColumnHeader:!0,inputType:"itemDesc",headerNgStyle:{width:"380px"},disablePipe:(i,o)=>this.getColumnDisablePipe("disableItemDesc",i,o),focusTo:"ALTUNIT"},{field:"UNIT",header:"UNIT",hidden:!1,isActiveColumnHeader:!0,inputType:"",headerNgStyle:{width:"80px"},disablePipe:(i,o)=>this.getColumnDisablePipe("disableAltUnit",i,o),focusTo:"ALTERNATEQUANTIY"},{field:"ALTERNATEQUANTIY",header:"Quantity",hidden:!1,isActiveColumnHeader:!0,inputType:"quantity",headerNgStyle:{width:"60px"},columnNgStyle:{width:"100%","text-align":"right"},onChange:(i,o,s)=>this.QuantityChangeEvent_default(i,o,s),onEnter:i=>this.quantityChangeEventService.AlternateQuantityEventClick(i),onKeyPress:(i,o,s,m)=>this.quantityChangeEventService.quantityKeyPress(i,o,s,m),applyTwoDigitPipe:!1,disablePipe:(i,o)=>this.getColumnDisablePipe("disableAltQty",i,o),focusTo:"SHEETNO"},{field:"WAREHOUSE",header:"Warehouse",hidden:!1,isActiveColumnHeader:!0,headerNgStyle:{width:"80px"}},{field:"SHEETNO",header:"SheetNo#",inputType:"inputText",hidden:!1,isActiveColumnHeader:!0,headerNgStyle:{width:"80px"},focusTo:"ITEMDESC",onEnter:(i,o,s,m)=>this.onEnterManualStockEntry(i,o,s)},{field:"",header:"",hidden:!1,isActiveColumnHeader:!0,removeButton:!0,headerNgStyle:{width:"30px"},columnNgStyle:{width:"100%","text-align":"right"},disablePipe:(i,o)=>this.getColumnDisablePipe("disableRowDelete",i,o)}],this.genericProductEntrySetting.height="100%",this.genericProductEntrySetting.prodlist=e,this.genericProductEntrySetting.voucherType=p.Km.ManualstockEntry,this.genericProductEntrySetting.setRowItemFromSelectedItem=i=>this.SetRowItemFromSelectedItem(i)}SetRowItemFromSelectedItem(e){let n=this._trnMainService.TrnMainObj.ProdList[this.genericProductEntryService.activerowIndex];this._trnMainService.prepareItem(n,e),this._trnMainService.assignPrateaAsRATE(n,e),n.WAREHOUSE=this._trnMainService.TrnMainObj.MWAREHOUSE}SetRowItemRate(e,n){n()}SetAllUnitsOfItem(){this._trnMainService.getAllUnitsOfItem(this.genericProductEntryService.activerowIndex)}QuantityChangeEvent_default(e,n,i){this.quantityChangeEventService.QuantityChangeEvent(i)}getColumnDisablePipe(e,n,i){return e}onEnterManualStockEntry(e,n,i){this.entryValidateService.mrpEnterEvent(e,n,i,()=>"default",()=>({useDefault:!0,preCheck:!1}),()=>!1)}dblClickPopupItem(e,n=""){console.log(e),setTimeout(()=>{this.masterService.focusAnyControl("ALTERNATEQUANTIY"+this.activerowIndex)},100)}focusAfterItemSelect(){2==this.userSetting.EnableBatch||this._trnMainService.TrnMainObj.VoucherType==p.Km.BatchAdjustment?null!=document.getElementById("BATCH"+this.genericProductEntryService.activerowIndex)&&setTimeout(()=>{document.getElementById("BATCH"+this.genericProductEntryService.activerowIndex).focus()},20):(null!=document.getElementById("ALTERNATEUNIT"+this.genericProductEntryService.activerowIndex)?(console.log("FOCUS HERE"),setTimeout(()=>{document.getElementById("ALTERNATEUNIT"+this.genericProductEntryService.activerowIndex).focus()},20)):null!=document.getElementById("ALTUNIT"+this.genericProductEntryService.activerowIndex)&&setTimeout(()=>{document.getElementById("ALTUNIT"+this.genericProductEntryService.activerowIndex).focus()},20),74===this._trnMainService.TrnMainObj.VoucherType&&null!=document.getElementById("ALTERNATEUNIT"+this.genericProductEntryService.activerowIndex)&&setTimeout(()=>{document.getElementById("ALTERNATEUNIT"+this.genericProductEntryService.activerowIndex).focus()},20),this._trnMainService.TrnMainObj.VoucherType===p.Km.RequisitionEntry&&null!=document.getElementById("ALTERNATEQUANTIY"+this.genericProductEntryService.activerowIndex)&&setTimeout(()=>{document.getElementById("ALTERNATEQUANTIY"+this.genericProductEntryService.activerowIndex).focus()},20))}rowClick(e,n){this.activerowIndex=e,this.data=n}onDelete(e){!this.checkValidation()||confirm("Are you sure you want to delete the entry?")&&this.manualStockService.deleteManualStockEntry(e,this._trnMainService.TrnMainObj.DIVISION).subscribe(n=>{console.log("Entry deleted successfully",n),this.onReset(),this.alertService.info(n.result)},n=>{console.error("Failed to delete entry",n)})}onReset(){this.manualStockEntry={},this.manualStockEntry.manualStockList=[],this.warehousename="",this.getEntryNumber(),this._trnMainService.barCodes={},this._trnMainService.barCodes.Quantity=1,this._trnMainService.initialFormLoad(this._trnMainService.TrnMainObj.VoucherType),this.mode="NEW",this.manualStockEntry.manualStockList.push({}),this.manualStockEntry.DIVISION=this.masterService.userProfile.userDivision,this.manualStockService.getBatchNumber(this._trnMainService.TrnMainObj.DIVISION).subscribe(n=>{this.batchlist=n}),setTimeout(()=>{this.masterService.focusAnyControl("itemname"+this.activerowIndex)},100)}focusToWarehouse(){setTimeout(()=>{this.masterService.focusAnyControl("whouse"+this.activerowIndex)}),this.manualStockEntry.TotalQty=this.manualStockEntry.manualStockList.map(e=>e.QTY).reduce((e,n)=>e+n,0)}focusToSheet(e,n){(""==this.manualStockEntry.manualStockList[this.activerowIndex].WAREHOUSE||null==this.manualStockEntry.manualStockList[this.activerowIndex].WAREHOUSE||null==this.manualStockEntry.manualStockList[this.activerowIndex].WAREHOUSE)&&this.alertService.warning("Warehouse cannot be empty"),setTimeout(()=>{this.masterService.focusAnyControl("sheet"+this.activerowIndex)})}checknegativevalue(){console.log("total Quan",this.manualStockEntry.TotalQty),this.manualStockEntry.TotalQty<0&&(this.alertService.warning("Quantity cannot be negative"),setTimeout(()=>{this.masterService.focusAnyControl("qty"+this.activerowIndex)},500))}focusToBarcode(){this.manualStockEntry.manualStockList.push({});var n=this.activerowIndex+1;this.mode=this.mode,console.log("MODE",this.mode),document.getElementById("sno"+this.activerowIndex).scrollIntoView(),setTimeout(()=>{this.masterService.focusAnyControl("itemname"+n),("NEW"==this.mode||"EDIT"==this.mode&&(null==this.manualStockEntry.manualStockList[n].MENUCODE||null==this.manualStockEntry.manualStockList[n].MENUCODE||""==this.manualStockEntry.manualStockList[n].MENUCODE))&&(this.manualStockEntry.manualStockList[n].WAREHOUSE=this.manualStockEntry.manualStockList[n-1].WAREHOUSE,this.manualStockEntry.manualStockList[n].SHEETNO=this.manualStockEntry.manualStockList[n-1].SHEETNO)},500)}addNextRow(e,n){this.manualStockEntry.manualStockList.push({WAREHOUSE:null}),this.mode=this.mode}showItemPopUp(e){if(this.checkValidation()){if(!this.warehousename)return void this.alertService.info("Please select Warehouse first!");this.genericGridForItem.show()}}dblClickview(e,n="VIEW"){this.manualStockEntry.TNO=e.TNO,this.batchlist.push({BATCH:e.BATCH}),this.manualStockEntry.BATCH=e.BATCH,this.manualStockEntry.DIVISION=e.DIVISION,this.manualStockEntry.TRNDATE=e.TRNDATE,this.manualStockService.getManualStockListView(this.manualStockEntry.TNO,this.manualStockEntry.DIVISION).subscribe(i=>{this.manualStockEntry.manualStockList=i,this.prepareprodListForViewModeAndEditMode(i),this.manualStockEntry.TotalQty=this.manualStockEntry.manualStockList.map(o=>o.QTY).reduce((o,s)=>o+s,0),this.warehousename=i[0].WAREHOUSE,this.mode="VIEW"})}prepareprodListForViewModeAndEditMode(e){this._trnMainService.TrnMainObj.ProdList=[];for(let n of e){let i={};i.BATCH=n.BATCH,i.ITEMDESC=n.DESCA,i.DIVISION=n.DIVISION,i.MCODE=n.MCODE,i.MENUCODE=n.MENUCODE,i.ALTERNATEQUANTIY=n.QTY,i.WAREHOUSE=n.WAREHOUSE,i.UNIT=n.BASEUNIT,i.BC=n.BCODE,i.SHEETNO=n.SHEETNO,i.rowMode=this.mode,i.FulfillBatchQty=!1,this._trnMainService.TrnMainObj.ProdList.push(i)}}dblClickedit(e,n="EDIT"){1!=e.ISMERGED?1!=e.ISMERGEBATCH?(this.manualStockEntry.TNO=e.TNO,this.batchlist.push({BATCH:e.BATCH}),this.manualStockEntry.BATCH=e.BATCH,this.manualStockEntry.DIVISION=e.DIVISION,this.manualStockEntry.TRNDATE=e.TRNDATE,this.manualStockService.getManualStockListView(this.manualStockEntry.TNO,this.manualStockEntry.DIVISION).subscribe(i=>{this.manualStockEntry.manualStockList=i,this.prepareprodListForViewModeAndEditMode(i),this.manualStockEntry.TotalQty=this.manualStockEntry.manualStockList.map(o=>o.QTY).reduce((o,s)=>o+s,0),this.warehousename=i[0].WAREHOUSE,this.mode="EDIT"})):this.alertService.info("This is merged batch. So, can not be edited"):this.alertService.info("This batch is already merged. So, can not be edited")}clearRow(){confirm("Are you sure you want to delete the Row? ")&&this.manualStockEntry.manualStockList.splice(this.activerowIndex,1)}findDivisionName(){this.selectedDivisionName=this.divisionlist.find(e=>e.INITIAL==this._trnMainService.TrnMainObj.DIVISION).NAME}changeDiv(){this.findDivisionName(),this.manualStockService.getWarehouseByDivision(this._trnMainService.TrnMainObj.DIVISION).subscribe(e=>{this.warehouseList=e}),this.manualStockService.getBatchNumber(this._trnMainService.TrnMainObj.DIVISION).subscribe(e=>{this.batchlist=e})}onBatchSubmit(){this.batchUnitObj.DIVISION=this._trnMainService.TrnMainObj.DIVISION,this.loadingService.show("Data is Saving ..."),this.manualStockService.postBatchUnit(this.batchUnitObj).subscribe(e=>{"ok"==e.status?(this.loadingService.hide(),this.alertService.info("Saved Successfully"),this.manualStockService.getBatchNumber(this._trnMainService.TrnMainObj.DIVISION).subscribe(n=>{this.batchlist=n}),this.closeBatchModal()):(this.loadingService.hide(),this.alertService.error(e.result))},e=>{this.loadingService.hide(),console.log(e),this.alertService.error(e.error.result)})}mapManualStockListFromProdList(){this.manualStockEntry.manualStockList=[];for(let e of this._trnMainService.TrnMainObj.ProdList){let n={};n.BATCH=e.BATCH,n.DESCA=e.ITEMDESC,n.MCODE=e.MCODE,n.MENUCODE=e.MENUCODE,n.QTY=e.ALTERNATEQUANTIY,n.WAREHOUSE=e.WAREHOUSE,n.BCODE=e.BC,n.SHEETNO=e.SHEETNO,this.manualStockEntry.manualStockList.push(n)}}onSave(){if(this._trnMainService.TrnMainObj.ProdList?.length>1&&(this._trnMainService.TrnMainObj.ProdList=this._trnMainService.TrnMainObj.ProdList.filter(e=>null!=e.MCODE&&""!=e.MCODE)),this.checkValidation()){if(this._trnMainService.TrnMainObj.ProdList.filter(e=>!e.WAREHOUSE)?.length>0)return void this.alertService.warning("Please select warehouse!");this.count=0,this.mapManualStockListFromProdList(),this.manualStockEntry.manualStockList.forEach(e=>{e.DIVISION=this._trnMainService.TrnMainObj.DIVISION,e.TNO=this.manualStockEntry.TNO,e.BATCH=this.manualStockEntry.BATCH,e.TRNDATE=this.manualStockEntry.TRNDATE,e.QTY||(e.QTY=0)}),"VIEW"==this.mode.toUpperCase()?this.alertService.error("Cannot Save in view Mode"):(this.loadingService.show("Please wait.... Saving your data."),this.manualStockService.saveManualStock({mode:this.mode,data:this.manualStockEntry.manualStockList}).subscribe(n=>{"ok"==n.status?(this.alertService.success("Data Saved Successfully"),this.loadingService.hide(),this.onReset(),this.manualStockEntry.DIVISION=this.masterService.userProfile.userDivision,this.manualStockEntry.manualStockList=[]):(this.loadingService.hide(),this.alertService.error(n.result.error))}))}}checkValidation(){return null==this.manualStockEntry.DIVISION||""==this.manualStockEntry.DIVISION||null==this.manualStockEntry.DIVISION?(this.alertService.warning("Division cannot be empty"),!1):null!=this.manualStockEntry.BATCH&&""!=this.manualStockEntry.BATCH&&null!=this.manualStockEntry.BATCH||(this.alertService.warning("Batch Number cannot be empty"),!1)}onWarehouseChange(){this.warehousename&&this.manualStockEntry.manualStockList.forEach(e=>e.WAREHOUSE=this.warehousename)}closeBatchModal(){this.addNewBatch=!1,this.batchUnitObj.BATCH=""}newUnitCreateTrigger(){this.batch=!0}TabClickUnit(){setTimeout(()=>{document.getElementById("itemname").focus()},0)}nullToZeroConverter(e){return void 0===e||null==e||null===e||""===e||"Infinity"===e||"NaN"===e||Number.isNaN(e)||isNaN(parseFloat(e))?0:parseFloat(e)}onView(e,n){console.log("Entry Number",e,n),this.gridItemviewSettings={title:"Physical Stock Entry Item",apiEndpoints:`/getPagedManualStock/${this._trnMainService.TrnMainObj.DIVISION}`,defaultFilterIndex:0,columns:[{key:"TNO",title:"Entry No",hidden:!1,noSearch:!1},{key:"BATCH",title:"Batch No",hidden:!1,noSearch:!1},{key:"DIVISION",title:"Division",hidden:!1,noSearch:!1}]},this.genericGridview.show()}onEdit(e,n){console.log("Entry Number",e,n),this.gridItemviewSettings={title:"Physical Stock Entry Item",apiEndpoints:`/getPagedManualStock/${this._trnMainService.TrnMainObj.DIVISION}`,defaultFilterIndex:0,columns:[{key:"TNO",title:"Entry No",hidden:!1,noSearch:!1},{key:"BATCH",title:"Batch No",hidden:!1,noSearch:!1},{key:"DIVISION",title:"Division",hidden:!1,noSearch:!1}]},this.gridItemeditSettings={title:"Physical Stock Entry Item",apiEndpoints:`/getPagedManualStock/${this._trnMainService.TrnMainObj.DIVISION}`,defaultFilterIndex:0,columns:[{key:"TNO",title:"Entry No",hidden:!1,noSearch:!1},{key:"BATCH",title:"Batch No",hidden:!1,noSearch:!1},{key:"DIVISION",title:"Division",hidden:!1,noSearch:!1}]},this.genericGridedit.show()}getEntryNumber(){this.manualStockService.getEntryNumber().subscribe(e=>{this.manualStockEntry.TNO=e.result,console.log("StockID",e)})}manualStockChange(e){if("%"===e)this.manualStockEntry.BATCH="%";else{this.manualStockEntry.BATCH=e;let n=this.batchlist.find(i=>i.BATCH==e)?.DATE;this.manualStockEntry.TRNDATE=n}}createBatch(){this.addNewBatch=!0}mergeBatch(){this.showMergePopup=!this.showMergePopup}closeCountingBatch(){this.showbatchclose=!0}closebatchclosemodal(){this.showbatchclose=!1}showGenericGrid(e){this.itemKeyEventService.ItemkeyEvent(e.index,e.event,()=>u.K.done,n=>(this.setItemPopupUrl(n),u.K.default),()=>u.K.default,()=>u.K.default,()=>u.K.default)}setItemPopupUrl(e){return this.genericProductEntryService.gridPopupSettings={title:"PRODUCTS",apiEndpoints:`/getMenuitemWithStockPagedList/${e}/all/NO/${this._trnMainService.userProfile.userWarehouse}`,defaultFilterIndex:this._trnMainService.userSetting.DefaultFilterIndex?this._trnMainService.userSetting.DefaultFilterIndex:0,columns:[{key:"MENUCODE",title:"ITEM CODE",hidden:!1,noSearch:!1},{key:"DESCA",title:"DESCRIPTION",hidden:!1,noSearch:!1},{key:"GroupName",title:"GROUP NAME",hidden:!1,noSearch:!0},{key:"PSTOCK",title:"P-QTY",hidden:!0,noSearch:!0},{key:"ISSUEQTY",title:"ISSUE QTY",hidden:!0,noSearch:!0},{key:"CRATE",title:"NETRATE",hidden:!0,noSearch:!0},{key:"RATE",title:"S-RATE",hidden:!0,noSearch:!0},{key:"BASEUNIT",title:"UNIT",hidden:!0,noSearch:!0},{key:"STOCK",title:"STOCK",hidden:!1,noSearch:!0,alignment:"right"},{key:"REALQTY_IN",title:"Req.Order Qty",hidden:!0,noSearch:!0},{key:"REALQTY",title:"Sales-Qty",hidden:!0,noSearch:!0},{key:"POSTOCK",title:"PO QTY",hidden:!0,noSearch:!0,alignment:"right"},{key:"POSTOCK",title:"QT QTY",hidden:!0,noSearch:!0,alignment:"right"},{key:"OPSTOCK",title:"SO QTY",hidden:!0,noSearch:!0,alignment:"right"},{key:"RATE",title:"PORATE",hidden:!0,noSearch:!0,alignment:"right",pipe:!0},{key:"RATE",title:"SO RATE",hidden:!0,noSearch:!0,alignment:"right",pipe:!0},{key:"BARCODE",title:"BARCODE",hidden:!0,noSearch:!0},{key:"MRP",title:"MRP",hidden:!0,noSearch:!0,alignment:"right",pipe:!0}]},this.genericProductEntryService.gridPopupSettings}onBatchClose(){console.log("on batch close",this.closeBatchName),this.loadingService.show("Closing Batch..."),this.manualStockService.closeManualStockBatch(this.closeBatchName).subscribe(e=>{console.log("response",e),"ok"==e.status?(this.loadingService.hide(),this.alertService.info(e.result),this.manualStockService.getBatchNumber(this._trnMainService.TrnMainObj.DIVISION).subscribe(n=>{this.batchlist=n,console.log("BatchList",n)}),this.closebatchclosemodal()):(this.loadingService.hide(),this.alertService.error(e.result))},e=>{this.loadingService.hide()})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(V.P),t.Y36(h.qu),t.Y36(T),t.Y36(Z.c),t.Y36(R.V),t.Y36(G.p),t.Y36(j.w),t.Y36(u.X),t.Y36(F.C),t.Y36(L.s),t.Y36(x.e))},r.\u0275cmp=t.Xpm({type:r,selectors:[["manualstockentry"]],viewQuery:function(e,n){if(1&e&&(t.Gf(X,5),t.Gf(tt,5),t.Gf(et,5),t.Gf(nt,5)),2&e){let i;t.iGM(i=t.CRH())&&(n.focusWarehouse=i.first),t.iGM(i=t.CRH())&&(n.genericGridForItem=i.first),t.iGM(i=t.CRH())&&(n.genericGridview=i.first),t.iGM(i=t.CRH())&&(n.genericGridedit=i.first)}},hostBindings:function(e,n){1&e&&t.NdJ("keydown",function(o){return n.updown(o)},!1,t.evT)},decls:85,vars:25,consts:[[1,"sectionWrapper"],[1,"sticky-top"],[1,"row","clearfix"],[1,"col-md-4"],[1,"col-md-8"],["routerLink","/pages/dashboard",1,"btn","btn-info","pull-right",2,"font-size","12px"],[1,"btn","btn-info","pull-right",2,"font-size","12px",3,"click"],[1,"btn","btn-info","pull-right",2,"font-size","12px",3,"disabled","click"],[1,"row","plainBackGround",2,"margin-top","0.5rem","padding-top","1rem"],[1,"col-md-3"],[1,"form-group","row"],[1,"col-md-6"],["type","number","readonly","",2,"width","14rem",3,"ngModel","disabled","ngModelChange"],["id","manualstockWH",1,"form-control",2,"width","14rem","height","25px","color","black","font-size","13px","padding","1px 12px",3,"ngModel","disabled","ngModelChange","keydown.Tab","focus"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-md-3",2,"margin-left","20px"],["id","manualStockInput",1,"form-control",2,"width","14rem","height","25px","color","black","font-size","13px","padding","1px 12px",3,"ngModel","disabled","ngModelChange"],[2,"width","auto"],[2,"font-size","13px"],[2,"width","14rem","height","25px","color","black","font-size","13px","padding","1px 12px",3,"ngModel","disabled","ngModelChange","change"],[4,"ngFor","ngForOf"],[1,"row","row-margin"],[1,"col-md-12","pd5"],[1,"midTableWrapper"],[1,"col-md-12","pd5",2,"height","61vh","overflow-x","scroll"],[3,"GenericProductEntrySetting","ShowGenericGridEvent"],[1,"sticky-bottom"],[1,"row","clearfix","footer"],[1,"col-md-12","right",2,"vertical-align","center"],[1,"row"],[1,"col-md-2",2,"margin-left","30%"],[4,"ngIf"],[3,"division","divisionName","closeEvent",4,"ngIf"],[3,"popupsettings","onItemDoubleClick"],["genericGridItem",""],["genericGridview",""],["genericGridedit",""],[1,"modal-sticky",2,"display","block","padding","0px","margin-bottom","20px","margin-right","8rem"],[1,"modal-content","modal-content-main-area",2,"width","70%"],[1,"modal-header",2,"padding","0px","background","#c0c0c0"],[1,"modal-title",2,"padding-left","5px"],["aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row",2,"margin-top","1rem"],[1,"col-sm-3","form-control-label",2,"margin-left","-12px"],[1,"col-sm-8"],["type","text","autocomplete","off",1,"form-control",2,"height","4vh","font-size","13px",3,"ngModel","disabled","ngModelChange"],["type","text","autocomplete","off",1,"form-control",2,"height","4vh","font-size","13px",3,"ngModel","ngModelChange"],["type","date",1,"date-input","form-control",2,"height","3vh",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","submit",1,"btn","btn-sm","btn-info",2,"font-size","12px",3,"click"],[1,"form-control",2,"width","14rem","height","25px","color","black","font-size","13px","padding","1px 12px",3,"ngModel","ngModelChange"],["value","%","selected",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"division","divisionName","closeEvent"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5"),t._uU(5),t.qZA()(),t.TgZ(6,"div",4)(7,"button",5),t._uU(8,"Back"),t.qZA(),t.TgZ(9,"button",6),t.NdJ("click",function(){return n.mergeBatch()}),t._uU(10,"Merge Batch"),t.qZA(),t.TgZ(11,"button",6),t.NdJ("click",function(){return n.closeCountingBatch()}),t._uU(12,"Close Batch"),t.qZA(),t.TgZ(13,"button",6),t.NdJ("click",function(){return n.createBatch()}),t._uU(14,"Create Batch"),t.qZA(),t.TgZ(15,"button",6),t.NdJ("click",function(){return n.onReset()}),t._uU(16,"Reset"),t.qZA(),t.TgZ(17,"button",7),t.NdJ("click",function(){return n.onSave()}),t._uU(18,"Save"),t.qZA(),t.TgZ(19,"button",6),t.NdJ("click",function(){return n.onDelete(n.manualStockEntry.TNO)}),t._uU(20,"Delete"),t.qZA(),t.TgZ(21,"button",6),t.NdJ("click",function(){return n.onView(n.manualStockEntry.TNO,n.manualStockEntry.DIVISION)}),t._uU(22,"View"),t.qZA(),t.TgZ(23,"button",6),t.NdJ("click",function(){return n.onEdit(n.manualStockEntry.TNO,n.manualStockEntry.DIVISION)}),t._uU(24,"Edit"),t.qZA()()()(),t.TgZ(25,"div",8)(26,"div",9)(27,"div",10)(28,"label"),t._uU(29,"Entry No :"),t.qZA(),t.TgZ(30,"div",11)(31,"input",12),t.NdJ("ngModelChange",function(o){return n.manualStockEntry.TNO=o}),t.qZA()()(),t.TgZ(32,"div",10)(33,"label"),t._uU(34,"Counting Batch No :"),t.qZA(),t.TgZ(35,"div",11)(36,"select",13),t.NdJ("ngModelChange",function(o){return n.manualStockChange(o)})("keydown.Tab",function(){return n.TabClickUnit()})("focus",function(){return n.newUnitCreateTrigger()}),t._UZ(37,"option",14),t.YNc(38,it,2,2,"option",15),t.qZA()()()(),t.TgZ(39,"div",16)(40,"div",10)(41,"label"),t._uU(42,"Division :"),t.qZA(),t.TgZ(43,"div",11)(44,"div",11)(45,"input",17),t.NdJ("ngModelChange",function(o){return n.selectedDivisionName=o}),t.qZA()()()(),t.TgZ(46,"div",10)(47,"label",18),t._uU(48,"Counting Batch Date :"),t.qZA(),t.TgZ(49,"div",11)(50,"label",19),t._uU(51),t.ALo(52,"date"),t.qZA()()()(),t.TgZ(53,"div",16)(54,"div",10)(55,"label"),t._uU(56,"Warehouse :"),t.qZA(),t.TgZ(57,"div",11)(58,"div",11)(59,"select",20),t.NdJ("ngModelChange",function(o){return n._trnMainService.TrnMainObj.MWAREHOUSE=o})("change",function(){return n.onWarehouseChange()}),t._UZ(60,"option"),t.YNc(61,ot,3,2,"ng-container",21),t.qZA()()()()()(),t.TgZ(62,"div",22)(63,"div",23),t._UZ(64,"discounts-insert"),t.qZA()(),t.TgZ(65,"div",24)(66,"div",22)(67,"div",25)(68,"generic-product-entry",26),t.NdJ("ShowGenericGridEvent",function(o){return n.showGenericGrid(o)}),t.qZA()()()(),t.TgZ(69,"div",27)(70,"div",28)(71,"div",29)(72,"div",30)(73,"div",31)(74,"h6"),t._uU(75),t.qZA()()()()()(),t.YNc(76,rt,28,4,"div",32),t.qZA(),t.YNc(77,st,20,2,"div",32),t.YNc(78,lt,1,2,"merge-batch-popup",33),t.TgZ(79,"generic-popup-grid",34,35),t.NdJ("onItemDoubleClick",function(o){return n.dblClickPopupItem(o)}),t.qZA(),t.TgZ(81,"generic-popup-grid",34,36),t.NdJ("onItemDoubleClick",function(o){return n.dblClickview(o,n.mode)}),t.qZA(),t.TgZ(83,"generic-popup-grid",34,37),t.NdJ("onItemDoubleClick",function(o){return n.dblClickedit(o,n.mode)}),t.qZA()),2&e&&(t.xp6(5),t.hij("Physical Stock Entry [",n.mode,"]"),t.xp6(12),t.Q6J("disabled","VIEW"==n.mode),t.xp6(14),t.Q6J("ngModel",n.manualStockEntry.TNO)("disabled","VIEW"==n.mode),t.xp6(5),t.Q6J("ngModel",n.manualStockEntry.BATCH)("disabled","VIEW"==n.mode),t.xp6(1),t.Q6J("ngValue","%"),t.xp6(1),t.Q6J("ngForOf",n.batchlist),t.xp6(7),t.Q6J("ngModel",n.selectedDivisionName)("disabled",!0),t.xp6(6),t.Oqu(t.xi3(52,22,n.manualStockEntry.TRNDATE,"MM-dd-yyyy")),t.xp6(8),t.Q6J("ngModel",n._trnMainService.TrnMainObj.MWAREHOUSE)("disabled","VIEW"==n.mode),t.xp6(2),t.Q6J("ngForOf",n.warehouseList),t.xp6(7),t.Q6J("GenericProductEntrySetting",n.genericProductEntrySetting),t.xp6(7),t.hij("TOTAL QTY: ",n.manualStockEntry.TotalQty," "),t.xp6(1),t.Q6J("ngIf",n.addNewBatch),t.xp6(1),t.Q6J("ngIf",n.showbatchclose),t.xp6(1),t.Q6J("ngIf",n.showMergePopup),t.xp6(1),t.Q6J("popupsettings",n.gridItemPopupSettings),t.xp6(2),t.Q6J("popupsettings",n.gridItemviewSettings),t.xp6(2),t.Q6J("popupsettings",n.gridItemeditSettings))},dependencies:[d.sg,d.O5,h.YN,h.Kr,h.Fj,h.wV,h.EJ,h.JJ,h.On,g.Zl,K,c.rH,z.Z,$.o,d.uU],styles:['td[_ngcontent-%COMP%] {\n     border: 1px solid #e6e6e6;\n}\n .footer[_ngcontent-%COMP%] {\n \n \n margin-right: 1px;\n height: 70px;\n clear: both;\n padding-top: 20px;\n border: 1px solid #eaeaea;\n background-color: #d1d6d8;\n}\n .card-body[_ngcontent-%COMP%] {\n     padding: 0 !important;\n }\n\n .form-group.row[_ngcontent-%COMP%] {\n     margin-bottom: 5px;\n }\n\n input[_ngcontent-%COMP%], select[_ngcontent-%COMP%] {\n     height: 26px;\n     font-size: 14px;\n     padding-top: 0;\n     padding-bottom: 0px;\n }\n\n th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{\n     padding: .2rem;\n     vertical-align: top;\n     border-top: 1px solid #dee2e6;\n     font-size: 14px;\n }\n th[_ngcontent-%COMP%]{\n     position: sticky; top: -1px; z-index: 1;\n     background-color: #7ed0ff;\n }\n\n th[_ngcontent-%COMP%]:first-child {\n     border-bottom: 1px solid #dee2e6;\n }\n .highlighted[_ngcontent-%COMP%]{\n     background-color: #ced6d3;\n }\n .row[_ngcontent-%COMP%]:after {\ncontent: "";\ndisplay: table;\nclear: both;\n}\n.column[_ngcontent-%COMP%] {\nfloat: left;\nwidth: 25%;\npadding: 10px;\n\n}']}),r})()}];let ut=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[c.Bz.forChild(ct),c.Bz]}),r})();var dt=a(63321);let ht=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[T],imports:[d.ez,h.u5,h.UX,dt._]}),r})();var gt=a(34579),pt=a(56209),mt=a(60694),St=a(7782),vt=a(74263);let Et=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[T,mt.T,L.s,St.y,vt.R],imports:[d.ez,k.m,I.JX,N.Xd,_.Is,E.b.forRoot(),v.x.forRoot(),O.c.forRoot(),A.Z,ht,ut,pt.u,gt.h]}),r})()}}]);